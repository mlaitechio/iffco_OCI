function XP(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in t)){const s=Object.getOwnPropertyDescriptor(n,o);s&&Object.defineProperty(t,o,s.get?s:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();var F=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function nm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}),r}var im={exports:{}},ac={},om={exports:{}},$={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ts=Symbol.for("react.element"),ZP=Symbol.for("react.portal"),eR=Symbol.for("react.fragment"),tR=Symbol.for("react.strict_mode"),rR=Symbol.for("react.profiler"),nR=Symbol.for("react.provider"),iR=Symbol.for("react.context"),oR=Symbol.for("react.forward_ref"),sR=Symbol.for("react.suspense"),aR=Symbol.for("react.memo"),cR=Symbol.for("react.lazy"),oh=Symbol.iterator;function uR(t){return t===null||typeof t!="object"?null:(t=oh&&t[oh]||t["@@iterator"],typeof t=="function"?t:null)}var sm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},am=Object.assign,cm={};function Fn(t,e,r){this.props=t,this.context=e,this.refs=cm,this.updater=r||sm}Fn.prototype.isReactComponent={};Fn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function um(){}um.prototype=Fn.prototype;function Np(t,e,r){this.props=t,this.context=e,this.refs=cm,this.updater=r||sm}var zp=Np.prototype=new um;zp.constructor=Np;am(zp,Fn.prototype);zp.isPureReactComponent=!0;var sh=Array.isArray,lm=Object.prototype.hasOwnProperty,jp={current:null},pm={key:!0,ref:!0,__self:!0,__source:!0};function dm(t,e,r){var n,o={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)lm.call(e,n)&&!pm.hasOwnProperty(n)&&(o[n]=e[n]);var i=arguments.length-2;if(i===1)o.children=r;else if(1<i){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(n in i=t.defaultProps,i)o[n]===void 0&&(o[n]=i[n]);return{$$typeof:Ts,type:t,key:s,ref:a,props:o,_owner:jp.current}}function lR(t,e){return{$$typeof:Ts,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ts}function pR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var ah=/\/+/g;function Nu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pR(""+t.key):e.toString(36)}function pa(t,e,r,n,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ts:case ZP:a=!0}}if(a)return a=t,o=o(a),t=n===""?"."+Nu(a,0):n,sh(o)?(r="",t!=null&&(r=t.replace(ah,"$&/")+"/"),pa(o,e,r,"",function(u){return u})):o!=null&&(xp(o)&&(o=lR(o,r+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(ah,"$&/")+"/")+t)),e.push(o)),1;if(a=0,n=n===""?".":n+":",sh(t))for(var i=0;i<t.length;i++){s=t[i];var c=n+Nu(s,i);a+=pa(s,e,r,c,o)}else if(c=uR(t),typeof c=="function")for(t=c.call(t),i=0;!(s=t.next()).done;)s=s.value,c=n+Nu(s,i++),a+=pa(s,e,r,c,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ws(t,e,r){if(t==null)return t;var n=[],o=0;return pa(t,n,"","",function(s){return e.call(r,s,o++)}),n}function dR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Le={current:null},da={transition:null},hR={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:da,ReactCurrentOwner:jp};$.Children={map:Ws,forEach:function(t,e,r){Ws(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ws(t,function(){e++}),e},toArray:function(t){return Ws(t,function(e){return e})||[]},only:function(t){if(!xp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$.Component=Fn;$.Fragment=eR;$.Profiler=rR;$.PureComponent=Np;$.StrictMode=tR;$.Suspense=sR;$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hR;$.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=am({},t.props),o=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=jp.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var i=t.type.defaultProps;for(c in e)lm.call(e,c)&&!pm.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&i!==void 0?i[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){i=Array(c);for(var u=0;u<c;u++)i[u]=arguments[u+2];n.children=i}return{$$typeof:Ts,type:t.type,key:o,ref:s,props:n,_owner:a}};$.createContext=function(t){return t={$$typeof:iR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nR,_context:t},t.Consumer=t};$.createElement=dm;$.createFactory=function(t){var e=dm.bind(null,t);return e.type=t,e};$.createRef=function(){return{current:null}};$.forwardRef=function(t){return{$$typeof:oR,render:t}};$.isValidElement=xp;$.lazy=function(t){return{$$typeof:cR,_payload:{_status:-1,_result:t},_init:dR}};$.memo=function(t,e){return{$$typeof:aR,type:t,compare:e===void 0?null:e}};$.startTransition=function(t){var e=da.transition;da.transition={};try{t()}finally{da.transition=e}};$.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};$.useCallback=function(t,e){return Le.current.useCallback(t,e)};$.useContext=function(t){return Le.current.useContext(t)};$.useDebugValue=function(){};$.useDeferredValue=function(t){return Le.current.useDeferredValue(t)};$.useEffect=function(t,e){return Le.current.useEffect(t,e)};$.useId=function(){return Le.current.useId()};$.useImperativeHandle=function(t,e,r){return Le.current.useImperativeHandle(t,e,r)};$.useInsertionEffect=function(t,e){return Le.current.useInsertionEffect(t,e)};$.useLayoutEffect=function(t,e){return Le.current.useLayoutEffect(t,e)};$.useMemo=function(t,e){return Le.current.useMemo(t,e)};$.useReducer=function(t,e,r){return Le.current.useReducer(t,e,r)};$.useRef=function(t){return Le.current.useRef(t)};$.useState=function(t){return Le.current.useState(t)};$.useSyncExternalStore=function(t,e,r){return Le.current.useSyncExternalStore(t,e,r)};$.useTransition=function(){return Le.current.useTransition()};$.version="18.2.0";om.exports=$;var T=om.exports;const Lt=rm(T),vR=XP({__proto__:null,default:Lt},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fR=T,gR=Symbol.for("react.element"),mR=Symbol.for("react.fragment"),yR=Object.prototype.hasOwnProperty,SR=fR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CR={key:!0,ref:!0,__self:!0,__source:!0};function hm(t,e,r){var n,o={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)yR.call(e,n)&&!CR.hasOwnProperty(n)&&(o[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)o[n]===void 0&&(o[n]=e[n]);return{$$typeof:gR,type:t,key:s,ref:a,props:o,_owner:SR.current}}ac.Fragment=mR;ac.jsx=hm;ac.jsxs=hm;im.exports=ac;var A=im.exports,_l={},vm={exports:{}},Ze={},fm={exports:{}},gm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,z){var L=k.length;k.push(z);e:for(;0<L;){var X=L-1>>>1,se=k[X];if(0<o(se,z))k[X]=z,k[L]=se,L=X;else break e}}function r(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var z=k[0],L=k.pop();if(L!==z){k[0]=L;e:for(var X=0,se=k.length,on=se>>>1;X<on;){var _t=2*(X+1)-1,Qn=k[_t],At=_t+1,sn=k[At];if(0>o(Qn,L))At<se&&0>o(sn,Qn)?(k[X]=sn,k[At]=L,X=At):(k[X]=Qn,k[_t]=L,X=_t);else if(At<se&&0>o(sn,L))k[X]=sn,k[At]=L,X=At;else break e}}return z}function o(k,z){var L=k.sortIndex-z.sortIndex;return L!==0?L:k.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,i=a.now();t.unstable_now=function(){return a.now()-i}}var c=[],u=[],l=1,p=null,d=3,h=!1,v=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(k){for(var z=r(u);z!==null;){if(z.callback===null)n(u);else if(z.startTime<=k)n(u),z.sortIndex=z.expirationTime,e(c,z);else break;z=r(u)}}function C(k){if(m=!1,S(k),!v)if(r(c)!==null)v=!0,Jn(P);else{var z=r(u);z!==null&&Gn(C,z.startTime-k)}}function P(k,z){v=!1,m&&(m=!1,f(I),I=-1),h=!0;var L=d;try{for(S(z),p=r(c);p!==null&&(!(p.expirationTime>z)||k&&!we());){var X=p.callback;if(typeof X=="function"){p.callback=null,d=p.priorityLevel;var se=X(p.expirationTime<=z);z=t.unstable_now(),typeof se=="function"?p.callback=se:p===r(c)&&n(c),S(z)}else n(c);p=r(c)}if(p!==null)var on=!0;else{var _t=r(u);_t!==null&&Gn(C,_t.startTime-z),on=!1}return on}finally{p=null,d=L,h=!1}}var R=!1,_=null,I=-1,W=5,x=-1;function we(){return!(t.unstable_now()-x<W)}function Ct(){if(_!==null){var k=t.unstable_now();x=k;var z=!0;try{z=_(!0,k)}finally{z?ue():(R=!1,_=null)}}else R=!1}var ue;if(typeof g=="function")ue=function(){g(Ct)};else if(typeof MessageChannel<"u"){var Kn=new MessageChannel,bu=Kn.port2;Kn.port1.onmessage=Ct,ue=function(){bu.postMessage(null)}}else ue=function(){y(Ct,0)};function Jn(k){_=k,R||(R=!0,ue())}function Gn(k,z){I=y(function(){k(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,Jn(P))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(k){switch(d){case 1:case 2:case 3:var z=3;break;default:z=d}var L=d;d=z;try{return k()}finally{d=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,z){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var L=d;d=k;try{return z()}finally{d=L}},t.unstable_scheduleCallback=function(k,z,L){var X=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?X+L:X):L=X,k){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=L+se,k={id:l++,callback:z,priorityLevel:k,startTime:L,expirationTime:se,sortIndex:-1},L>X?(k.sortIndex=L,e(u,k),r(c)===null&&k===r(u)&&(m?(f(I),I=-1):m=!0,Gn(C,L-X))):(k.sortIndex=se,e(c,k),v||h||(v=!0,Jn(P))),k},t.unstable_shouldYield=we,t.unstable_wrapCallback=function(k){var z=d;return function(){var L=d;d=z;try{return k.apply(this,arguments)}finally{d=L}}}})(gm);fm.exports=gm;var PR=fm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm=T,Xe=PR;function w(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ym=new Set,ss={};function en(t,e){kn(t,e),kn(t+"Capture",e)}function kn(t,e){for(ss[t]=e,t=0;t<e.length;t++)ym.add(e[t])}var qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Al=Object.prototype.hasOwnProperty,RR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ch={},uh={};function ER(t){return Al.call(uh,t)?!0:Al.call(ch,t)?!1:RR.test(t)?uh[t]=!0:(ch[t]=!0,!1)}function wR(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function IR(t,e,r,n){if(e===null||typeof e>"u"||wR(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Be(t,e,r,n,o,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pe[t]=new Be(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pe[e]=new Be(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pe[t]=new Be(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pe[t]=new Be(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pe[t]=new Be(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pe[t]=new Be(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pe[t]=new Be(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pe[t]=new Be(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pe[t]=new Be(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lp=/[\-:]([a-z])/g;function Bp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lp,Bp);Pe[e]=new Be(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lp,Bp);Pe[e]=new Be(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lp,Bp);Pe[e]=new Be(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pe[t]=new Be(t,1,!1,t.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new Be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pe[t]=new Be(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fp(t,e,r,n){var o=Pe.hasOwnProperty(e)?Pe[e]:null;(o!==null?o.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(IR(e,r,o,n)&&(r=null),n||o===null?ER(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):o.mustUseProperty?t[o.propertyName]=r===null?o.type===3?!1:"":r:(e=o.attributeName,n=o.attributeNamespace,r===null?t.removeAttribute(e):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Vt=mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hs=Symbol.for("react.element"),ln=Symbol.for("react.portal"),pn=Symbol.for("react.fragment"),qp=Symbol.for("react.strict_mode"),kl=Symbol.for("react.profiler"),Sm=Symbol.for("react.provider"),Cm=Symbol.for("react.context"),Up=Symbol.for("react.forward_ref"),Ol=Symbol.for("react.suspense"),Ml=Symbol.for("react.suspense_list"),$p=Symbol.for("react.memo"),Gt=Symbol.for("react.lazy"),Pm=Symbol.for("react.offscreen"),lh=Symbol.iterator;function Yn(t){return t===null||typeof t!="object"?null:(t=lh&&t[lh]||t["@@iterator"],typeof t=="function"?t:null)}var te=Object.assign,zu;function Ho(t){if(zu===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);zu=e&&e[1]||""}return`
`+zu+t}var ju=!1;function xu(t,e){if(!t||ju)return"";ju=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),s=n.stack.split(`
`),a=o.length-1,i=s.length-1;1<=a&&0<=i&&o[a]!==s[i];)i--;for(;1<=a&&0<=i;a--,i--)if(o[a]!==s[i]){if(a!==1||i!==1)do if(a--,i--,0>i||o[a]!==s[i]){var c=`
`+o[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=i);break}}}finally{ju=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ho(t):""}function TR(t){switch(t.tag){case 5:return Ho(t.type);case 16:return Ho("Lazy");case 13:return Ho("Suspense");case 19:return Ho("SuspenseList");case 0:case 2:case 15:return t=xu(t.type,!1),t;case 11:return t=xu(t.type.render,!1),t;case 1:return t=xu(t.type,!0),t;default:return""}}function bl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pn:return"Fragment";case ln:return"Portal";case kl:return"Profiler";case qp:return"StrictMode";case Ol:return"Suspense";case Ml:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cm:return(t.displayName||"Context")+".Consumer";case Sm:return(t._context.displayName||"Context")+".Provider";case Up:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $p:return e=t.displayName||null,e!==null?e:bl(t.type)||"Memo";case Gt:e=t._payload,t=t._init;try{return bl(t(e))}catch{}}return null}function _R(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bl(e);case 8:return e===qp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function AR(t){var e=Rm(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vs(t){t._valueTracker||(t._valueTracker=AR(t))}function Em(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Rm(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ka(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dl(t,e){var r=e.checked;return te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function ph(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=fr(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wm(t,e){e=e.checked,e!=null&&Fp(t,"checked",e,!1)}function Nl(t,e){wm(t,e);var r=fr(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zl(t,e.type,r):e.hasOwnProperty("defaultValue")&&zl(t,e.type,fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dh(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function zl(t,e,r){(e!=="number"||ka(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Vo=Array.isArray;function Rn(t,e,r,n){if(t=t.options,e){e={};for(var o=0;o<r.length;o++)e["$"+r[o]]=!0;for(r=0;r<t.length;r++)o=e.hasOwnProperty("$"+t[r].value),t[r].selected!==o&&(t[r].selected=o),o&&n&&(t[r].defaultSelected=!0)}else{for(r=""+fr(r),e=null,o=0;o<t.length;o++){if(t[o].value===r){t[o].selected=!0,n&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function jl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(w(91));return te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hh(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(w(92));if(Vo(r)){if(1<r.length)throw Error(w(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:fr(r)}}function Im(t,e){var r=fr(e.value),n=fr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function vh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ks,_m=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,o){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ks=Ks||document.createElement("div"),Ks.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ks.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function as(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kR=["Webkit","ms","Moz","O"];Object.keys(Qo).forEach(function(t){kR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qo[e]=Qo[t]})});function Am(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Qo.hasOwnProperty(t)&&Qo[t]?(""+e).trim():e+"px"}function km(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=Am(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,o):t[r]=o}}var OR=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ll(t,e){if(e){if(OR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(w(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(w(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(w(61))}if(e.style!=null&&typeof e.style!="object")throw Error(w(62))}}function Bl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fl=null;function Wp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ql=null,En=null,wn=null;function fh(t){if(t=ks(t)){if(typeof ql!="function")throw Error(w(280));var e=t.stateNode;e&&(e=dc(e),ql(t.stateNode,t.type,e))}}function Om(t){En?wn?wn.push(t):wn=[t]:En=t}function Mm(){if(En){var t=En,e=wn;if(wn=En=null,fh(t),e)for(t=0;t<e.length;t++)fh(e[t])}}function bm(t,e){return t(e)}function Dm(){}var Lu=!1;function Nm(t,e,r){if(Lu)return t(e,r);Lu=!0;try{return bm(t,e,r)}finally{Lu=!1,(En!==null||wn!==null)&&(Dm(),Mm())}}function cs(t,e){var r=t.stateNode;if(r===null)return null;var n=dc(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(w(231,e,typeof r));return r}var Ul=!1;if(qt)try{var Xn={};Object.defineProperty(Xn,"passive",{get:function(){Ul=!0}}),window.addEventListener("test",Xn,Xn),window.removeEventListener("test",Xn,Xn)}catch{Ul=!1}function MR(t,e,r,n,o,s,a,i,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(l){this.onError(l)}}var Yo=!1,Oa=null,Ma=!1,$l=null,bR={onError:function(t){Yo=!0,Oa=t}};function DR(t,e,r,n,o,s,a,i,c){Yo=!1,Oa=null,MR.apply(bR,arguments)}function NR(t,e,r,n,o,s,a,i,c){if(DR.apply(this,arguments),Yo){if(Yo){var u=Oa;Yo=!1,Oa=null}else throw Error(w(198));Ma||(Ma=!0,$l=u)}}function tn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function zm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gh(t){if(tn(t)!==t)throw Error(w(188))}function zR(t){var e=t.alternate;if(!e){if(e=tn(t),e===null)throw Error(w(188));return e!==t?null:t}for(var r=t,n=e;;){var o=r.return;if(o===null)break;var s=o.alternate;if(s===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===r)return gh(o),t;if(s===n)return gh(o),e;s=s.sibling}throw Error(w(188))}if(r.return!==n.return)r=o,n=s;else{for(var a=!1,i=o.child;i;){if(i===r){a=!0,r=o,n=s;break}if(i===n){a=!0,n=o,r=s;break}i=i.sibling}if(!a){for(i=s.child;i;){if(i===r){a=!0,r=s,n=o;break}if(i===n){a=!0,n=s,r=o;break}i=i.sibling}if(!a)throw Error(w(189))}}if(r.alternate!==n)throw Error(w(190))}if(r.tag!==3)throw Error(w(188));return r.stateNode.current===r?t:e}function jm(t){return t=zR(t),t!==null?xm(t):null}function xm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xm(t);if(e!==null)return e;t=t.sibling}return null}var Lm=Xe.unstable_scheduleCallback,mh=Xe.unstable_cancelCallback,jR=Xe.unstable_shouldYield,xR=Xe.unstable_requestPaint,oe=Xe.unstable_now,LR=Xe.unstable_getCurrentPriorityLevel,Hp=Xe.unstable_ImmediatePriority,Bm=Xe.unstable_UserBlockingPriority,ba=Xe.unstable_NormalPriority,BR=Xe.unstable_LowPriority,Fm=Xe.unstable_IdlePriority,cc=null,It=null;function FR(t){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(cc,t,void 0,(t.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:$R,qR=Math.log,UR=Math.LN2;function $R(t){return t>>>=0,t===0?32:31-(qR(t)/UR|0)|0}var Js=64,Gs=4194304;function Ko(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Da(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,o=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var i=a&~o;i!==0?n=Ko(i):(s&=a,s!==0&&(n=Ko(s)))}else a=r&~o,a!==0?n=Ko(a):s!==0&&(n=Ko(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&o)&&(o=n&-n,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-vt(e),o=1<<r,n|=t[r],e&=~o;return n}function WR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HR(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-vt(s),i=1<<a,c=o[a];c===-1?(!(i&r)||i&n)&&(o[a]=WR(i,e)):c<=e&&(t.expiredLanes|=i),s&=~i}}function Wl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qm(){var t=Js;return Js<<=1,!(Js&4194240)&&(Js=64),t}function Bu(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function _s(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vt(e),t[e]=r}function VR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var o=31-vt(r),s=1<<o;e[o]=0,n[o]=-1,t[o]=-1,r&=~s}}function Vp(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-vt(r),o=1<<n;o&e|t[n]&e&&(t[n]|=e),r&=~o}}var K=0;function Um(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $m,Kp,Wm,Hm,Vm,Hl=!1,Qs=[],sr=null,ar=null,cr=null,us=new Map,ls=new Map,Zt=[],KR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yh(t,e){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":us.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ls.delete(e.pointerId)}}function Zn(t,e,r,n,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[o]},e!==null&&(e=ks(e),e!==null&&Kp(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function JR(t,e,r,n,o){switch(e){case"focusin":return sr=Zn(sr,t,e,r,n,o),!0;case"dragenter":return ar=Zn(ar,t,e,r,n,o),!0;case"mouseover":return cr=Zn(cr,t,e,r,n,o),!0;case"pointerover":var s=o.pointerId;return us.set(s,Zn(us.get(s)||null,t,e,r,n,o)),!0;case"gotpointercapture":return s=o.pointerId,ls.set(s,Zn(ls.get(s)||null,t,e,r,n,o)),!0}return!1}function Km(t){var e=Ur(t.target);if(e!==null){var r=tn(e);if(r!==null){if(e=r.tag,e===13){if(e=zm(r),e!==null){t.blockedOn=e,Vm(t.priority,function(){Wm(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ha(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Vl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Fl=n,r.target.dispatchEvent(n),Fl=null}else return e=ks(r),e!==null&&Kp(e),t.blockedOn=r,!1;e.shift()}return!0}function Sh(t,e,r){ha(t)&&r.delete(e)}function GR(){Hl=!1,sr!==null&&ha(sr)&&(sr=null),ar!==null&&ha(ar)&&(ar=null),cr!==null&&ha(cr)&&(cr=null),us.forEach(Sh),ls.forEach(Sh)}function ei(t,e){t.blockedOn===e&&(t.blockedOn=null,Hl||(Hl=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,GR)))}function ps(t){function e(o){return ei(o,t)}if(0<Qs.length){ei(Qs[0],t);for(var r=1;r<Qs.length;r++){var n=Qs[r];n.blockedOn===t&&(n.blockedOn=null)}}for(sr!==null&&ei(sr,t),ar!==null&&ei(ar,t),cr!==null&&ei(cr,t),us.forEach(e),ls.forEach(e),r=0;r<Zt.length;r++)n=Zt[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Zt.length&&(r=Zt[0],r.blockedOn===null);)Km(r),r.blockedOn===null&&Zt.shift()}var In=Vt.ReactCurrentBatchConfig,Na=!0;function QR(t,e,r,n){var o=K,s=In.transition;In.transition=null;try{K=1,Jp(t,e,r,n)}finally{K=o,In.transition=s}}function YR(t,e,r,n){var o=K,s=In.transition;In.transition=null;try{K=4,Jp(t,e,r,n)}finally{K=o,In.transition=s}}function Jp(t,e,r,n){if(Na){var o=Vl(t,e,r,n);if(o===null)Gu(t,e,n,za,r),yh(t,n);else if(JR(o,t,e,r,n))n.stopPropagation();else if(yh(t,n),e&4&&-1<KR.indexOf(t)){for(;o!==null;){var s=ks(o);if(s!==null&&$m(s),s=Vl(t,e,r,n),s===null&&Gu(t,e,n,za,r),s===o)break;o=s}o!==null&&n.stopPropagation()}else Gu(t,e,n,null,r)}}var za=null;function Vl(t,e,r,n){if(za=null,t=Wp(n),t=Ur(t),t!==null)if(e=tn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=zm(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return za=t,null}function Jm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LR()){case Hp:return 1;case Bm:return 4;case ba:case BR:return 16;case Fm:return 536870912;default:return 16}default:return 16}}var rr=null,Gp=null,va=null;function Gm(){if(va)return va;var t,e=Gp,r=e.length,n,o="value"in rr?rr.value:rr.textContent,s=o.length;for(t=0;t<r&&e[t]===o[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===o[s-n];n++);return va=o.slice(t,1<n?1-n:void 0)}function fa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ys(){return!0}function Ch(){return!1}function et(t){function e(r,n,o,s,a){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var i in t)t.hasOwnProperty(i)&&(r=t[i],this[i]=r?r(s):s[i]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ys:Ch,this.isPropagationStopped=Ch,this}return te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),e}var qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qp=et(qn),As=te({},qn,{view:0,detail:0}),XR=et(As),Fu,qu,ti,uc=te({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ti&&(ti&&t.type==="mousemove"?(Fu=t.screenX-ti.screenX,qu=t.screenY-ti.screenY):qu=Fu=0,ti=t),Fu)},movementY:function(t){return"movementY"in t?t.movementY:qu}}),Ph=et(uc),ZR=te({},uc,{dataTransfer:0}),eE=et(ZR),tE=te({},As,{relatedTarget:0}),Uu=et(tE),rE=te({},qn,{animationName:0,elapsedTime:0,pseudoElement:0}),nE=et(rE),iE=te({},qn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oE=et(iE),sE=te({},qn,{data:0}),Rh=et(sE),aE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uE[t])?!!e[t]:!1}function Yp(){return lE}var pE=te({},As,{key:function(t){if(t.key){var e=aE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yp,charCode:function(t){return t.type==="keypress"?fa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dE=et(pE),hE=te({},uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eh=et(hE),vE=te({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yp}),fE=et(vE),gE=te({},qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),mE=et(gE),yE=te({},uc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),SE=et(yE),CE=[9,13,27,32],Xp=qt&&"CompositionEvent"in window,Xo=null;qt&&"documentMode"in document&&(Xo=document.documentMode);var PE=qt&&"TextEvent"in window&&!Xo,Qm=qt&&(!Xp||Xo&&8<Xo&&11>=Xo),wh=" ",Ih=!1;function Ym(t,e){switch(t){case"keyup":return CE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dn=!1;function RE(t,e){switch(t){case"compositionend":return Xm(e);case"keypress":return e.which!==32?null:(Ih=!0,wh);case"textInput":return t=e.data,t===wh&&Ih?null:t;default:return null}}function EE(t,e){if(dn)return t==="compositionend"||!Xp&&Ym(t,e)?(t=Gm(),va=Gp=rr=null,dn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Qm&&e.locale!=="ko"?null:e.data;default:return null}}var wE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Th(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wE[t.type]:e==="textarea"}function Zm(t,e,r,n){Om(n),e=ja(e,"onChange"),0<e.length&&(r=new Qp("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Zo=null,ds=null;function IE(t){ly(t,0)}function lc(t){var e=fn(t);if(Em(e))return t}function TE(t,e){if(t==="change")return e}var ey=!1;if(qt){var $u;if(qt){var Wu="oninput"in document;if(!Wu){var _h=document.createElement("div");_h.setAttribute("oninput","return;"),Wu=typeof _h.oninput=="function"}$u=Wu}else $u=!1;ey=$u&&(!document.documentMode||9<document.documentMode)}function Ah(){Zo&&(Zo.detachEvent("onpropertychange",ty),ds=Zo=null)}function ty(t){if(t.propertyName==="value"&&lc(ds)){var e=[];Zm(e,ds,t,Wp(t)),Nm(IE,e)}}function _E(t,e,r){t==="focusin"?(Ah(),Zo=e,ds=r,Zo.attachEvent("onpropertychange",ty)):t==="focusout"&&Ah()}function AE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lc(ds)}function kE(t,e){if(t==="click")return lc(e)}function OE(t,e){if(t==="input"||t==="change")return lc(e)}function ME(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gt=typeof Object.is=="function"?Object.is:ME;function hs(t,e){if(gt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!Al.call(e,o)||!gt(t[o],e[o]))return!1}return!0}function kh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Oh(t,e){var r=kh(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=kh(r)}}function ry(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ry(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ny(){for(var t=window,e=ka();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ka(t.document)}return e}function Zp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bE(t){var e=ny(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&ry(r.ownerDocument.documentElement,r)){if(n!==null&&Zp(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=r.textContent.length,s=Math.min(n.start,o);n=n.end===void 0?s:Math.min(n.end,o),!t.extend&&s>n&&(o=n,n=s,s=o),o=Oh(r,s);var a=Oh(r,n);o&&a&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var DE=qt&&"documentMode"in document&&11>=document.documentMode,hn=null,Kl=null,es=null,Jl=!1;function Mh(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Jl||hn==null||hn!==ka(n)||(n=hn,"selectionStart"in n&&Zp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),es&&hs(es,n)||(es=n,n=ja(Kl,"onSelect"),0<n.length&&(e=new Qp("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=hn)))}function Xs(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var vn={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionend:Xs("Transition","TransitionEnd")},Hu={},iy={};qt&&(iy=document.createElement("div").style,"AnimationEvent"in window||(delete vn.animationend.animation,delete vn.animationiteration.animation,delete vn.animationstart.animation),"TransitionEvent"in window||delete vn.transitionend.transition);function pc(t){if(Hu[t])return Hu[t];if(!vn[t])return t;var e=vn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in iy)return Hu[t]=e[r];return t}var oy=pc("animationend"),sy=pc("animationiteration"),ay=pc("animationstart"),cy=pc("transitionend"),uy=new Map,bh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(t,e){uy.set(t,e),en(e,[t])}for(var Vu=0;Vu<bh.length;Vu++){var Ku=bh[Vu],NE=Ku.toLowerCase(),zE=Ku[0].toUpperCase()+Ku.slice(1);mr(NE,"on"+zE)}mr(oy,"onAnimationEnd");mr(sy,"onAnimationIteration");mr(ay,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(cy,"onTransitionEnd");kn("onMouseEnter",["mouseout","mouseover"]);kn("onMouseLeave",["mouseout","mouseover"]);kn("onPointerEnter",["pointerout","pointerover"]);kn("onPointerLeave",["pointerout","pointerover"]);en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));en("onBeforeInput",["compositionend","keypress","textInput","paste"]);en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jo));function Dh(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,NR(n,e,void 0,t),t.currentTarget=null}function ly(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],o=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var i=n[a],c=i.instance,u=i.currentTarget;if(i=i.listener,c!==s&&o.isPropagationStopped())break e;Dh(o,i,u),s=c}else for(a=0;a<n.length;a++){if(i=n[a],c=i.instance,u=i.currentTarget,i=i.listener,c!==s&&o.isPropagationStopped())break e;Dh(o,i,u),s=c}}}if(Ma)throw t=$l,Ma=!1,$l=null,t}function G(t,e){var r=e[Zl];r===void 0&&(r=e[Zl]=new Set);var n=t+"__bubble";r.has(n)||(py(e,t,2,!1),r.add(n))}function Ju(t,e,r){var n=0;e&&(n|=4),py(r,t,n,e)}var Zs="_reactListening"+Math.random().toString(36).slice(2);function vs(t){if(!t[Zs]){t[Zs]=!0,ym.forEach(function(r){r!=="selectionchange"&&(jE.has(r)||Ju(r,!1,t),Ju(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zs]||(e[Zs]=!0,Ju("selectionchange",!1,e))}}function py(t,e,r,n){switch(Jm(e)){case 1:var o=QR;break;case 4:o=YR;break;default:o=Jp}r=o.bind(null,e,r,t),o=void 0,!Ul||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),n?o!==void 0?t.addEventListener(e,r,{capture:!0,passive:o}):t.addEventListener(e,r,!0):o!==void 0?t.addEventListener(e,r,{passive:o}):t.addEventListener(e,r,!1)}function Gu(t,e,r,n,o){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var i=n.stateNode.containerInfo;if(i===o||i.nodeType===8&&i.parentNode===o)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;a=a.return}for(;i!==null;){if(a=Ur(i),a===null)return;if(c=a.tag,c===5||c===6){n=s=a;continue e}i=i.parentNode}}n=n.return}Nm(function(){var u=s,l=Wp(r),p=[];e:{var d=uy.get(t);if(d!==void 0){var h=Qp,v=t;switch(t){case"keypress":if(fa(r)===0)break e;case"keydown":case"keyup":h=dE;break;case"focusin":v="focus",h=Uu;break;case"focusout":v="blur",h=Uu;break;case"beforeblur":case"afterblur":h=Uu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Ph;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=eE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=fE;break;case oy:case sy:case ay:h=nE;break;case cy:h=mE;break;case"scroll":h=XR;break;case"wheel":h=SE;break;case"copy":case"cut":case"paste":h=oE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Eh}var m=(e&4)!==0,y=!m&&t==="scroll",f=m?d!==null?d+"Capture":null:d;m=[];for(var g=u,S;g!==null;){S=g;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,f!==null&&(C=cs(g,f),C!=null&&m.push(fs(g,C,S)))),y)break;g=g.return}0<m.length&&(d=new h(d,v,null,r,l),p.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&r!==Fl&&(v=r.relatedTarget||r.fromElement)&&(Ur(v)||v[Ut]))break e;if((h||d)&&(d=l.window===l?l:(d=l.ownerDocument)?d.defaultView||d.parentWindow:window,h?(v=r.relatedTarget||r.toElement,h=u,v=v?Ur(v):null,v!==null&&(y=tn(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(h=null,v=u),h!==v)){if(m=Ph,C="onMouseLeave",f="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(m=Eh,C="onPointerLeave",f="onPointerEnter",g="pointer"),y=h==null?d:fn(h),S=v==null?d:fn(v),d=new m(C,g+"leave",h,r,l),d.target=y,d.relatedTarget=S,C=null,Ur(l)===u&&(m=new m(f,g+"enter",v,r,l),m.target=S,m.relatedTarget=y,C=m),y=C,h&&v)t:{for(m=h,f=v,g=0,S=m;S;S=an(S))g++;for(S=0,C=f;C;C=an(C))S++;for(;0<g-S;)m=an(m),g--;for(;0<S-g;)f=an(f),S--;for(;g--;){if(m===f||f!==null&&m===f.alternate)break t;m=an(m),f=an(f)}m=null}else m=null;h!==null&&Nh(p,d,h,m,!1),v!==null&&y!==null&&Nh(p,y,v,m,!0)}}e:{if(d=u?fn(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var P=TE;else if(Th(d))if(ey)P=OE;else{P=AE;var R=_E}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(P=kE);if(P&&(P=P(t,u))){Zm(p,P,r,l);break e}R&&R(t,d,u),t==="focusout"&&(R=d._wrapperState)&&R.controlled&&d.type==="number"&&zl(d,"number",d.value)}switch(R=u?fn(u):window,t){case"focusin":(Th(R)||R.contentEditable==="true")&&(hn=R,Kl=u,es=null);break;case"focusout":es=Kl=hn=null;break;case"mousedown":Jl=!0;break;case"contextmenu":case"mouseup":case"dragend":Jl=!1,Mh(p,r,l);break;case"selectionchange":if(DE)break;case"keydown":case"keyup":Mh(p,r,l)}var _;if(Xp)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else dn?Ym(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(Qm&&r.locale!=="ko"&&(dn||I!=="onCompositionStart"?I==="onCompositionEnd"&&dn&&(_=Gm()):(rr=l,Gp="value"in rr?rr.value:rr.textContent,dn=!0)),R=ja(u,I),0<R.length&&(I=new Rh(I,t,null,r,l),p.push({event:I,listeners:R}),_?I.data=_:(_=Xm(r),_!==null&&(I.data=_)))),(_=PE?RE(t,r):EE(t,r))&&(u=ja(u,"onBeforeInput"),0<u.length&&(l=new Rh("onBeforeInput","beforeinput",null,r,l),p.push({event:l,listeners:u}),l.data=_))}ly(p,e)})}function fs(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ja(t,e){for(var r=e+"Capture",n=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=cs(t,r),s!=null&&n.unshift(fs(t,s,o)),s=cs(t,e),s!=null&&n.push(fs(t,s,o))),t=t.return}return n}function an(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nh(t,e,r,n,o){for(var s=e._reactName,a=[];r!==null&&r!==n;){var i=r,c=i.alternate,u=i.stateNode;if(c!==null&&c===n)break;i.tag===5&&u!==null&&(i=u,o?(c=cs(r,s),c!=null&&a.unshift(fs(r,c,i))):o||(c=cs(r,s),c!=null&&a.push(fs(r,c,i)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var xE=/\r\n?/g,LE=/\u0000|\uFFFD/g;function zh(t){return(typeof t=="string"?t:""+t).replace(xE,`
`).replace(LE,"")}function ea(t,e,r){if(e=zh(e),zh(t)!==e&&r)throw Error(w(425))}function xa(){}var Gl=null,Ql=null;function Yl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xl=typeof setTimeout=="function"?setTimeout:void 0,BE=typeof clearTimeout=="function"?clearTimeout:void 0,jh=typeof Promise=="function"?Promise:void 0,FE=typeof queueMicrotask=="function"?queueMicrotask:typeof jh<"u"?function(t){return jh.resolve(null).then(t).catch(qE)}:Xl;function qE(t){setTimeout(function(){throw t})}function Qu(t,e){var r=e,n=0;do{var o=r.nextSibling;if(t.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(n===0){t.removeChild(o),ps(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=o}while(r);ps(e)}function ur(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Un=Math.random().toString(36).slice(2),Et="__reactFiber$"+Un,gs="__reactProps$"+Un,Ut="__reactContainer$"+Un,Zl="__reactEvents$"+Un,UE="__reactListeners$"+Un,$E="__reactHandles$"+Un;function Ur(t){var e=t[Et];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ut]||r[Et]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=xh(t);t!==null;){if(r=t[Et])return r;t=xh(t)}return e}t=r,r=t.parentNode}return null}function ks(t){return t=t[Et]||t[Ut],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(w(33))}function dc(t){return t[gs]||null}var ep=[],gn=-1;function yr(t){return{current:t}}function Q(t){0>gn||(t.current=ep[gn],ep[gn]=null,gn--)}function J(t,e){gn++,ep[gn]=t.current,t.current=e}var gr={},Ne=yr(gr),$e=yr(!1),Kr=gr;function On(t,e){var r=t.type.contextTypes;if(!r)return gr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in r)o[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function We(t){return t=t.childContextTypes,t!=null}function La(){Q($e),Q(Ne)}function Lh(t,e,r){if(Ne.current!==gr)throw Error(w(168));J(Ne,e),J($e,r)}function dy(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in e))throw Error(w(108,_R(t)||"Unknown",o));return te({},r,n)}function Ba(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gr,Kr=Ne.current,J(Ne,t),J($e,$e.current),!0}function Bh(t,e,r){var n=t.stateNode;if(!n)throw Error(w(169));r?(t=dy(t,e,Kr),n.__reactInternalMemoizedMergedChildContext=t,Q($e),Q(Ne),J(Ne,t)):Q($e),J($e,r)}var zt=null,hc=!1,Yu=!1;function hy(t){zt===null?zt=[t]:zt.push(t)}function WE(t){hc=!0,hy(t)}function Sr(){if(!Yu&&zt!==null){Yu=!0;var t=0,e=K;try{var r=zt;for(K=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}zt=null,hc=!1}catch(o){throw zt!==null&&(zt=zt.slice(t+1)),Lm(Hp,Sr),o}finally{K=e,Yu=!1}}return null}var mn=[],yn=0,Fa=null,qa=0,nt=[],it=0,Jr=null,jt=1,xt="";function Br(t,e){mn[yn++]=qa,mn[yn++]=Fa,Fa=t,qa=e}function vy(t,e,r){nt[it++]=jt,nt[it++]=xt,nt[it++]=Jr,Jr=t;var n=jt;t=xt;var o=32-vt(n)-1;n&=~(1<<o),r+=1;var s=32-vt(e)+o;if(30<s){var a=o-o%5;s=(n&(1<<a)-1).toString(32),n>>=a,o-=a,jt=1<<32-vt(e)+o|r<<o|n,xt=s+t}else jt=1<<s|r<<o|n,xt=t}function ed(t){t.return!==null&&(Br(t,1),vy(t,1,0))}function td(t){for(;t===Fa;)Fa=mn[--yn],mn[yn]=null,qa=mn[--yn],mn[yn]=null;for(;t===Jr;)Jr=nt[--it],nt[it]=null,xt=nt[--it],nt[it]=null,jt=nt[--it],nt[it]=null}var Ye=null,Ge=null,Y=!1,ht=null;function fy(t,e){var r=ot(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Fh(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ye=t,Ge=ur(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ye=t,Ge=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Jr!==null?{id:jt,overflow:xt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=ot(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ye=t,Ge=null,!0):!1;default:return!1}}function tp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rp(t){if(Y){var e=Ge;if(e){var r=e;if(!Fh(t,e)){if(tp(t))throw Error(w(418));e=ur(r.nextSibling);var n=Ye;e&&Fh(t,e)?fy(n,r):(t.flags=t.flags&-4097|2,Y=!1,Ye=t)}}else{if(tp(t))throw Error(w(418));t.flags=t.flags&-4097|2,Y=!1,Ye=t}}}function qh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ye=t}function ta(t){if(t!==Ye)return!1;if(!Y)return qh(t),Y=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yl(t.type,t.memoizedProps)),e&&(e=Ge)){if(tp(t))throw gy(),Error(w(418));for(;e;)fy(t,e),e=ur(e.nextSibling)}if(qh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(w(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ge=ur(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ge=null}}else Ge=Ye?ur(t.stateNode.nextSibling):null;return!0}function gy(){for(var t=Ge;t;)t=ur(t.nextSibling)}function Mn(){Ge=Ye=null,Y=!1}function rd(t){ht===null?ht=[t]:ht.push(t)}var HE=Vt.ReactCurrentBatchConfig;function pt(t,e){if(t&&t.defaultProps){e=te({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Ua=yr(null),$a=null,Sn=null,nd=null;function id(){nd=Sn=$a=null}function od(t){var e=Ua.current;Q(Ua),t._currentValue=e}function np(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Tn(t,e){$a=t,nd=Sn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ue=!0),t.firstContext=null)}function at(t){var e=t._currentValue;if(nd!==t)if(t={context:t,memoizedValue:e,next:null},Sn===null){if($a===null)throw Error(w(308));Sn=t,$a.dependencies={lanes:0,firstContext:t}}else Sn=Sn.next=t;return e}var $r=null;function sd(t){$r===null?$r=[t]:$r.push(t)}function my(t,e,r,n){var o=e.interleaved;return o===null?(r.next=r,sd(e)):(r.next=o.next,o.next=r),e.interleaved=r,$t(t,n)}function $t(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Qt=!1;function ad(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function lr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,H&2){var o=n.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),n.pending=e,$t(t,r)}return o=n.interleaved,o===null?(e.next=e,sd(n)):(e.next=o.next,o.next=e),n.interleaved=e,$t(t,r)}function ga(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Vp(t,r)}}function Uh(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?o=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?o=s=e:s=s.next=e}else o=s=e;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Wa(t,e,r,n){var o=t.updateQueue;Qt=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,i=o.shared.pending;if(i!==null){o.shared.pending=null;var c=i,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var l=t.alternate;l!==null&&(l=l.updateQueue,i=l.lastBaseUpdate,i!==a&&(i===null?l.firstBaseUpdate=u:i.next=u,l.lastBaseUpdate=c))}if(s!==null){var p=o.baseState;a=0,l=u=c=null,i=s;do{var d=i.lane,h=i.eventTime;if((n&d)===d){l!==null&&(l=l.next={eventTime:h,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var v=t,m=i;switch(d=e,h=r,m.tag){case 1:if(v=m.payload,typeof v=="function"){p=v.call(h,p,d);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=m.payload,d=typeof v=="function"?v.call(h,p,d):v,d==null)break e;p=te({},p,d);break e;case 2:Qt=!0}}i.callback!==null&&i.lane!==0&&(t.flags|=64,d=o.effects,d===null?o.effects=[i]:d.push(i))}else h={eventTime:h,lane:d,tag:i.tag,payload:i.payload,callback:i.callback,next:null},l===null?(u=l=h,c=p):l=l.next=h,a|=d;if(i=i.next,i===null){if(i=o.shared.pending,i===null)break;d=i,i=d.next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}while(!0);if(l===null&&(c=p),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=l,e=o.shared.interleaved,e!==null){o=e;do a|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);Qr|=a,t.lanes=a,t.memoizedState=p}}function $h(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(w(191,o));o.call(n)}}}var Sy=new mm.Component().refs;function ip(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:te({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var vc={isMounted:function(t){return(t=t._reactInternals)?tn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=xe(),o=dr(t),s=Bt(n,o);s.payload=e,r!=null&&(s.callback=r),e=lr(t,s,o),e!==null&&(ft(e,t,o,n),ga(e,t,o))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=xe(),o=dr(t),s=Bt(n,o);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=lr(t,s,o),e!==null&&(ft(e,t,o,n),ga(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=xe(),n=dr(t),o=Bt(r,n);o.tag=2,e!=null&&(o.callback=e),e=lr(t,o,n),e!==null&&(ft(e,t,n,r),ga(e,t,n))}};function Wh(t,e,r,n,o,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!hs(r,n)||!hs(o,s):!0}function Cy(t,e,r){var n=!1,o=gr,s=e.contextType;return typeof s=="object"&&s!==null?s=at(s):(o=We(e)?Kr:Ne.current,n=e.contextTypes,s=(n=n!=null)?On(t,o):gr),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vc,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function Hh(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&vc.enqueueReplaceState(e,e.state,null)}function op(t,e,r,n){var o=t.stateNode;o.props=r,o.state=t.memoizedState,o.refs=Sy,ad(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=at(s):(s=We(e)?Kr:Ne.current,o.context=On(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ip(t,e,s,r),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&vc.enqueueReplaceState(o,o.state,null),Wa(t,r,o,n),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function ri(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(w(309));var n=r.stateNode}if(!n)throw Error(w(147,t));var o=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var i=o.refs;i===Sy&&(i=o.refs={}),a===null?delete i[s]:i[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(w(284));if(!r._owner)throw Error(w(290,t))}return t}function ra(t,e){throw t=Object.prototype.toString.call(e),Error(w(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vh(t){var e=t._init;return e(t._payload)}function Py(t){function e(f,g){if(t){var S=f.deletions;S===null?(f.deletions=[g],f.flags|=16):S.push(g)}}function r(f,g){if(!t)return null;for(;g!==null;)e(f,g),g=g.sibling;return null}function n(f,g){for(f=new Map;g!==null;)g.key!==null?f.set(g.key,g):f.set(g.index,g),g=g.sibling;return f}function o(f,g){return f=hr(f,g),f.index=0,f.sibling=null,f}function s(f,g,S){return f.index=S,t?(S=f.alternate,S!==null?(S=S.index,S<g?(f.flags|=2,g):S):(f.flags|=2,g)):(f.flags|=1048576,g)}function a(f){return t&&f.alternate===null&&(f.flags|=2),f}function i(f,g,S,C){return g===null||g.tag!==6?(g=il(S,f.mode,C),g.return=f,g):(g=o(g,S),g.return=f,g)}function c(f,g,S,C){var P=S.type;return P===pn?l(f,g,S.props.children,C,S.key):g!==null&&(g.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Gt&&Vh(P)===g.type)?(C=o(g,S.props),C.ref=ri(f,g,S),C.return=f,C):(C=Ra(S.type,S.key,S.props,null,f.mode,C),C.ref=ri(f,g,S),C.return=f,C)}function u(f,g,S,C){return g===null||g.tag!==4||g.stateNode.containerInfo!==S.containerInfo||g.stateNode.implementation!==S.implementation?(g=ol(S,f.mode,C),g.return=f,g):(g=o(g,S.children||[]),g.return=f,g)}function l(f,g,S,C,P){return g===null||g.tag!==7?(g=Vr(S,f.mode,C,P),g.return=f,g):(g=o(g,S),g.return=f,g)}function p(f,g,S){if(typeof g=="string"&&g!==""||typeof g=="number")return g=il(""+g,f.mode,S),g.return=f,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Hs:return S=Ra(g.type,g.key,g.props,null,f.mode,S),S.ref=ri(f,null,g),S.return=f,S;case ln:return g=ol(g,f.mode,S),g.return=f,g;case Gt:var C=g._init;return p(f,C(g._payload),S)}if(Vo(g)||Yn(g))return g=Vr(g,f.mode,S,null),g.return=f,g;ra(f,g)}return null}function d(f,g,S,C){var P=g!==null?g.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return P!==null?null:i(f,g,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Hs:return S.key===P?c(f,g,S,C):null;case ln:return S.key===P?u(f,g,S,C):null;case Gt:return P=S._init,d(f,g,P(S._payload),C)}if(Vo(S)||Yn(S))return P!==null?null:l(f,g,S,C,null);ra(f,S)}return null}function h(f,g,S,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return f=f.get(S)||null,i(g,f,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Hs:return f=f.get(C.key===null?S:C.key)||null,c(g,f,C,P);case ln:return f=f.get(C.key===null?S:C.key)||null,u(g,f,C,P);case Gt:var R=C._init;return h(f,g,S,R(C._payload),P)}if(Vo(C)||Yn(C))return f=f.get(S)||null,l(g,f,C,P,null);ra(g,C)}return null}function v(f,g,S,C){for(var P=null,R=null,_=g,I=g=0,W=null;_!==null&&I<S.length;I++){_.index>I?(W=_,_=null):W=_.sibling;var x=d(f,_,S[I],C);if(x===null){_===null&&(_=W);break}t&&_&&x.alternate===null&&e(f,_),g=s(x,g,I),R===null?P=x:R.sibling=x,R=x,_=W}if(I===S.length)return r(f,_),Y&&Br(f,I),P;if(_===null){for(;I<S.length;I++)_=p(f,S[I],C),_!==null&&(g=s(_,g,I),R===null?P=_:R.sibling=_,R=_);return Y&&Br(f,I),P}for(_=n(f,_);I<S.length;I++)W=h(_,f,I,S[I],C),W!==null&&(t&&W.alternate!==null&&_.delete(W.key===null?I:W.key),g=s(W,g,I),R===null?P=W:R.sibling=W,R=W);return t&&_.forEach(function(we){return e(f,we)}),Y&&Br(f,I),P}function m(f,g,S,C){var P=Yn(S);if(typeof P!="function")throw Error(w(150));if(S=P.call(S),S==null)throw Error(w(151));for(var R=P=null,_=g,I=g=0,W=null,x=S.next();_!==null&&!x.done;I++,x=S.next()){_.index>I?(W=_,_=null):W=_.sibling;var we=d(f,_,x.value,C);if(we===null){_===null&&(_=W);break}t&&_&&we.alternate===null&&e(f,_),g=s(we,g,I),R===null?P=we:R.sibling=we,R=we,_=W}if(x.done)return r(f,_),Y&&Br(f,I),P;if(_===null){for(;!x.done;I++,x=S.next())x=p(f,x.value,C),x!==null&&(g=s(x,g,I),R===null?P=x:R.sibling=x,R=x);return Y&&Br(f,I),P}for(_=n(f,_);!x.done;I++,x=S.next())x=h(_,f,I,x.value,C),x!==null&&(t&&x.alternate!==null&&_.delete(x.key===null?I:x.key),g=s(x,g,I),R===null?P=x:R.sibling=x,R=x);return t&&_.forEach(function(Ct){return e(f,Ct)}),Y&&Br(f,I),P}function y(f,g,S,C){if(typeof S=="object"&&S!==null&&S.type===pn&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Hs:e:{for(var P=S.key,R=g;R!==null;){if(R.key===P){if(P=S.type,P===pn){if(R.tag===7){r(f,R.sibling),g=o(R,S.props.children),g.return=f,f=g;break e}}else if(R.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Gt&&Vh(P)===R.type){r(f,R.sibling),g=o(R,S.props),g.ref=ri(f,R,S),g.return=f,f=g;break e}r(f,R);break}else e(f,R);R=R.sibling}S.type===pn?(g=Vr(S.props.children,f.mode,C,S.key),g.return=f,f=g):(C=Ra(S.type,S.key,S.props,null,f.mode,C),C.ref=ri(f,g,S),C.return=f,f=C)}return a(f);case ln:e:{for(R=S.key;g!==null;){if(g.key===R)if(g.tag===4&&g.stateNode.containerInfo===S.containerInfo&&g.stateNode.implementation===S.implementation){r(f,g.sibling),g=o(g,S.children||[]),g.return=f,f=g;break e}else{r(f,g);break}else e(f,g);g=g.sibling}g=ol(S,f.mode,C),g.return=f,f=g}return a(f);case Gt:return R=S._init,y(f,g,R(S._payload),C)}if(Vo(S))return v(f,g,S,C);if(Yn(S))return m(f,g,S,C);ra(f,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,g!==null&&g.tag===6?(r(f,g.sibling),g=o(g,S),g.return=f,f=g):(r(f,g),g=il(S,f.mode,C),g.return=f,f=g),a(f)):r(f,g)}return y}var bn=Py(!0),Ry=Py(!1),Os={},Tt=yr(Os),ms=yr(Os),ys=yr(Os);function Wr(t){if(t===Os)throw Error(w(174));return t}function cd(t,e){switch(J(ys,e),J(ms,t),J(Tt,Os),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xl(e,t)}Q(Tt),J(Tt,e)}function Dn(){Q(Tt),Q(ms),Q(ys)}function Ey(t){Wr(ys.current);var e=Wr(Tt.current),r=xl(e,t.type);e!==r&&(J(ms,t),J(Tt,r))}function ud(t){ms.current===t&&(Q(Tt),Q(ms))}var Z=yr(0);function Ha(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xu=[];function ld(){for(var t=0;t<Xu.length;t++)Xu[t]._workInProgressVersionPrimary=null;Xu.length=0}var ma=Vt.ReactCurrentDispatcher,Zu=Vt.ReactCurrentBatchConfig,Gr=0,ee=null,le=null,de=null,Va=!1,ts=!1,Ss=0,VE=0;function Ie(){throw Error(w(321))}function pd(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!gt(t[r],e[r]))return!1;return!0}function dd(t,e,r,n,o,s){if(Gr=s,ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ma.current=t===null||t.memoizedState===null?QE:YE,t=r(n,o),ts){s=0;do{if(ts=!1,Ss=0,25<=s)throw Error(w(301));s+=1,de=le=null,e.updateQueue=null,ma.current=XE,t=r(n,o)}while(ts)}if(ma.current=Ka,e=le!==null&&le.next!==null,Gr=0,de=le=ee=null,Va=!1,e)throw Error(w(300));return t}function hd(){var t=Ss!==0;return Ss=0,t}function Rt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?ee.memoizedState=de=t:de=de.next=t,de}function ct(){if(le===null){var t=ee.alternate;t=t!==null?t.memoizedState:null}else t=le.next;var e=de===null?ee.memoizedState:de.next;if(e!==null)de=e,le=t;else{if(t===null)throw Error(w(310));le=t,t={memoizedState:le.memoizedState,baseState:le.baseState,baseQueue:le.baseQueue,queue:le.queue,next:null},de===null?ee.memoizedState=de=t:de=de.next=t}return de}function Cs(t,e){return typeof e=="function"?e(t):e}function el(t){var e=ct(),r=e.queue;if(r===null)throw Error(w(311));r.lastRenderedReducer=t;var n=le,o=n.baseQueue,s=r.pending;if(s!==null){if(o!==null){var a=o.next;o.next=s.next,s.next=a}n.baseQueue=o=s,r.pending=null}if(o!==null){s=o.next,n=n.baseState;var i=a=null,c=null,u=s;do{var l=u.lane;if((Gr&l)===l)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var p={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(i=c=p,a=n):c=c.next=p,ee.lanes|=l,Qr|=l}u=u.next}while(u!==null&&u!==s);c===null?a=n:c.next=i,gt(n,e.memoizedState)||(Ue=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){o=t;do s=o.lane,ee.lanes|=s,Qr|=s,o=o.next;while(o!==t)}else o===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function tl(t){var e=ct(),r=e.queue;if(r===null)throw Error(w(311));r.lastRenderedReducer=t;var n=r.dispatch,o=r.pending,s=e.memoizedState;if(o!==null){r.pending=null;var a=o=o.next;do s=t(s,a.action),a=a.next;while(a!==o);gt(s,e.memoizedState)||(Ue=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function wy(){}function Iy(t,e){var r=ee,n=ct(),o=e(),s=!gt(n.memoizedState,o);if(s&&(n.memoizedState=o,Ue=!0),n=n.queue,vd(Ay.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||de!==null&&de.memoizedState.tag&1){if(r.flags|=2048,Ps(9,_y.bind(null,r,n,o,e),void 0,null),he===null)throw Error(w(349));Gr&30||Ty(r,e,o)}return o}function Ty(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function _y(t,e,r,n){e.value=r,e.getSnapshot=n,ky(e)&&Oy(t)}function Ay(t,e,r){return r(function(){ky(e)&&Oy(t)})}function ky(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!gt(t,r)}catch{return!0}}function Oy(t){var e=$t(t,1);e!==null&&ft(e,t,1,-1)}function Kh(t){var e=Rt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:t},e.queue=t,t=t.dispatch=GE.bind(null,ee,t),[e.memoizedState,t]}function Ps(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function My(){return ct().memoizedState}function ya(t,e,r,n){var o=Rt();ee.flags|=t,o.memoizedState=Ps(1|e,r,void 0,n===void 0?null:n)}function fc(t,e,r,n){var o=ct();n=n===void 0?null:n;var s=void 0;if(le!==null){var a=le.memoizedState;if(s=a.destroy,n!==null&&pd(n,a.deps)){o.memoizedState=Ps(e,r,s,n);return}}ee.flags|=t,o.memoizedState=Ps(1|e,r,s,n)}function Jh(t,e){return ya(8390656,8,t,e)}function vd(t,e){return fc(2048,8,t,e)}function by(t,e){return fc(4,2,t,e)}function Dy(t,e){return fc(4,4,t,e)}function Ny(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zy(t,e,r){return r=r!=null?r.concat([t]):null,fc(4,4,Ny.bind(null,e,t),r)}function fd(){}function jy(t,e){var r=ct();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&pd(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function xy(t,e){var r=ct();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&pd(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Ly(t,e,r){return Gr&21?(gt(r,e)||(r=qm(),ee.lanes|=r,Qr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ue=!0),t.memoizedState=r)}function KE(t,e){var r=K;K=r!==0&&4>r?r:4,t(!0);var n=Zu.transition;Zu.transition={};try{t(!1),e()}finally{K=r,Zu.transition=n}}function By(){return ct().memoizedState}function JE(t,e,r){var n=dr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Fy(t))qy(e,r);else if(r=my(t,e,r,n),r!==null){var o=xe();ft(r,t,n,o),Uy(r,e,n)}}function GE(t,e,r){var n=dr(t),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Fy(t))qy(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,i=s(a,r);if(o.hasEagerState=!0,o.eagerState=i,gt(i,a)){var c=e.interleaved;c===null?(o.next=o,sd(e)):(o.next=c.next,c.next=o),e.interleaved=o;return}}catch{}finally{}r=my(t,e,o,n),r!==null&&(o=xe(),ft(r,t,n,o),Uy(r,e,n))}}function Fy(t){var e=t.alternate;return t===ee||e!==null&&e===ee}function qy(t,e){ts=Va=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Uy(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Vp(t,r)}}var Ka={readContext:at,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},QE={readContext:at,useCallback:function(t,e){return Rt().memoizedState=[t,e===void 0?null:e],t},useContext:at,useEffect:Jh,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ya(4194308,4,Ny.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ya(4194308,4,t,e)},useInsertionEffect:function(t,e){return ya(4,2,t,e)},useMemo:function(t,e){var r=Rt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Rt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=JE.bind(null,ee,t),[n.memoizedState,t]},useRef:function(t){var e=Rt();return t={current:t},e.memoizedState=t},useState:Kh,useDebugValue:fd,useDeferredValue:function(t){return Rt().memoizedState=t},useTransition:function(){var t=Kh(!1),e=t[0];return t=KE.bind(null,t[1]),Rt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ee,o=Rt();if(Y){if(r===void 0)throw Error(w(407));r=r()}else{if(r=e(),he===null)throw Error(w(349));Gr&30||Ty(n,e,r)}o.memoizedState=r;var s={value:r,getSnapshot:e};return o.queue=s,Jh(Ay.bind(null,n,s,t),[t]),n.flags|=2048,Ps(9,_y.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Rt(),e=he.identifierPrefix;if(Y){var r=xt,n=jt;r=(n&~(1<<32-vt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ss++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=VE++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},YE={readContext:at,useCallback:jy,useContext:at,useEffect:vd,useImperativeHandle:zy,useInsertionEffect:by,useLayoutEffect:Dy,useMemo:xy,useReducer:el,useRef:My,useState:function(){return el(Cs)},useDebugValue:fd,useDeferredValue:function(t){var e=ct();return Ly(e,le.memoizedState,t)},useTransition:function(){var t=el(Cs)[0],e=ct().memoizedState;return[t,e]},useMutableSource:wy,useSyncExternalStore:Iy,useId:By,unstable_isNewReconciler:!1},XE={readContext:at,useCallback:jy,useContext:at,useEffect:vd,useImperativeHandle:zy,useInsertionEffect:by,useLayoutEffect:Dy,useMemo:xy,useReducer:tl,useRef:My,useState:function(){return tl(Cs)},useDebugValue:fd,useDeferredValue:function(t){var e=ct();return le===null?e.memoizedState=t:Ly(e,le.memoizedState,t)},useTransition:function(){var t=tl(Cs)[0],e=ct().memoizedState;return[t,e]},useMutableSource:wy,useSyncExternalStore:Iy,useId:By,unstable_isNewReconciler:!1};function Nn(t,e){try{var r="",n=e;do r+=TR(n),n=n.return;while(n);var o=r}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function rl(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function sp(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var ZE=typeof WeakMap=="function"?WeakMap:Map;function $y(t,e,r){r=Bt(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ga||(Ga=!0,gp=n),sp(t,e)},r}function Wy(t,e,r){r=Bt(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var o=e.value;r.payload=function(){return n(o)},r.callback=function(){sp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){sp(t,e),typeof n!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function Gh(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new ZE;var o=new Set;n.set(e,o)}else o=n.get(e),o===void 0&&(o=new Set,n.set(e,o));o.has(r)||(o.add(r),t=hw.bind(null,t,e,r),e.then(t,t))}function Qh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yh(t,e,r,n,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Bt(-1,1),e.tag=2,lr(r,e,1))),r.lanes|=1),t)}var ew=Vt.ReactCurrentOwner,Ue=!1;function je(t,e,r,n){e.child=t===null?Ry(e,null,r,n):bn(e,t.child,r,n)}function Xh(t,e,r,n,o){r=r.render;var s=e.ref;return Tn(e,o),n=dd(t,e,r,n,s,o),r=hd(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Wt(t,e,o)):(Y&&r&&ed(e),e.flags|=1,je(t,e,n,o),e.child)}function Zh(t,e,r,n,o){if(t===null){var s=r.type;return typeof s=="function"&&!Ed(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Hy(t,e,s,n,o)):(t=Ra(r.type,null,n,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:hs,r(a,n)&&t.ref===e.ref)return Wt(t,e,o)}return e.flags|=1,t=hr(s,n),t.ref=e.ref,t.return=e,e.child=t}function Hy(t,e,r,n,o){if(t!==null){var s=t.memoizedProps;if(hs(s,n)&&t.ref===e.ref)if(Ue=!1,e.pendingProps=n=s,(t.lanes&o)!==0)t.flags&131072&&(Ue=!0);else return e.lanes=t.lanes,Wt(t,e,o)}return ap(t,e,r,n,o)}function Vy(t,e,r){var n=e.pendingProps,o=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(Pn,Je),Je|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,J(Pn,Je),Je|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,J(Pn,Je),Je|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,J(Pn,Je),Je|=n;return je(t,e,o,r),e.child}function Ky(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ap(t,e,r,n,o){var s=We(r)?Kr:Ne.current;return s=On(e,s),Tn(e,o),r=dd(t,e,r,n,s,o),n=hd(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Wt(t,e,o)):(Y&&n&&ed(e),e.flags|=1,je(t,e,r,o),e.child)}function ev(t,e,r,n,o){if(We(r)){var s=!0;Ba(e)}else s=!1;if(Tn(e,o),e.stateNode===null)Sa(t,e),Cy(e,r,n),op(e,r,n,o),n=!0;else if(t===null){var a=e.stateNode,i=e.memoizedProps;a.props=i;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=at(u):(u=We(r)?Kr:Ne.current,u=On(e,u));var l=r.getDerivedStateFromProps,p=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==n||c!==u)&&Hh(e,a,n,u),Qt=!1;var d=e.memoizedState;a.state=d,Wa(e,n,a,o),c=e.memoizedState,i!==n||d!==c||$e.current||Qt?(typeof l=="function"&&(ip(e,r,l,n),c=e.memoizedState),(i=Qt||Wh(e,r,i,n,d,c,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=i):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,yy(t,e),i=e.memoizedProps,u=e.type===e.elementType?i:pt(e.type,i),a.props=u,p=e.pendingProps,d=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=at(c):(c=We(r)?Kr:Ne.current,c=On(e,c));var h=r.getDerivedStateFromProps;(l=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==p||d!==c)&&Hh(e,a,n,c),Qt=!1,d=e.memoizedState,a.state=d,Wa(e,n,a,o);var v=e.memoizedState;i!==p||d!==v||$e.current||Qt?(typeof h=="function"&&(ip(e,r,h,n),v=e.memoizedState),(u=Qt||Wh(e,r,u,n,d,v,c)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return cp(t,e,r,n,s,o)}function cp(t,e,r,n,o,s){Ky(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return o&&Bh(e,r,!1),Wt(t,e,s);n=e.stateNode,ew.current=e;var i=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=bn(e,t.child,null,s),e.child=bn(e,null,i,s)):je(t,e,i,s),e.memoizedState=n.state,o&&Bh(e,r,!0),e.child}function Jy(t){var e=t.stateNode;e.pendingContext?Lh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lh(t,e.context,!1),cd(t,e.containerInfo)}function tv(t,e,r,n,o){return Mn(),rd(o),e.flags|=256,je(t,e,r,n),e.child}var up={dehydrated:null,treeContext:null,retryLane:0};function lp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gy(t,e,r){var n=e.pendingProps,o=Z.current,s=!1,a=(e.flags&128)!==0,i;if((i=a)||(i=t!==null&&t.memoizedState===null?!1:(o&2)!==0),i?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),J(Z,o&1),t===null)return rp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=yc(a,n,0,null),t=Vr(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=lp(r),e.memoizedState=up,t):gd(e,a));if(o=t.memoizedState,o!==null&&(i=o.dehydrated,i!==null))return tw(t,e,a,n,i,o,r);if(s){s=n.fallback,a=e.mode,o=t.child,i=o.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==o?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=hr(o,c),n.subtreeFlags=o.subtreeFlags&14680064),i!==null?s=hr(i,s):(s=Vr(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?lp(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=up,n}return s=t.child,t=s.sibling,n=hr(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function gd(t,e){return e=yc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function na(t,e,r,n){return n!==null&&rd(n),bn(e,t.child,null,r),t=gd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tw(t,e,r,n,o,s,a){if(r)return e.flags&256?(e.flags&=-257,n=rl(Error(w(422))),na(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,o=e.mode,n=yc({mode:"visible",children:n.children},o,0,null),s=Vr(s,o,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&bn(e,t.child,null,a),e.child.memoizedState=lp(a),e.memoizedState=up,s);if(!(e.mode&1))return na(t,e,a,null);if(o.data==="$!"){if(n=o.nextSibling&&o.nextSibling.dataset,n)var i=n.dgst;return n=i,s=Error(w(419)),n=rl(s,n,void 0),na(t,e,a,n)}if(i=(a&t.childLanes)!==0,Ue||i){if(n=he,n!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(n.suspendedLanes|a)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,$t(t,o),ft(n,t,o,-1))}return Rd(),n=rl(Error(w(421))),na(t,e,a,n)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=vw.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,Ge=ur(o.nextSibling),Ye=e,Y=!0,ht=null,t!==null&&(nt[it++]=jt,nt[it++]=xt,nt[it++]=Jr,jt=t.id,xt=t.overflow,Jr=e),e=gd(e,n.children),e.flags|=4096,e)}function rv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),np(t.return,e,r)}function nl(t,e,r,n,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=o)}function Qy(t,e,r){var n=e.pendingProps,o=n.revealOrder,s=n.tail;if(je(t,e,n.children,r),n=Z.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rv(t,r,e);else if(t.tag===19)rv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(J(Z,n),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(r=e.child,o=null;r!==null;)t=r.alternate,t!==null&&Ha(t)===null&&(o=r),r=r.sibling;r=o,r===null?(o=e.child,e.child=null):(o=r.sibling,r.sibling=null),nl(e,!1,o,r,s);break;case"backwards":for(r=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Ha(t)===null){e.child=o;break}t=o.sibling,o.sibling=r,r=o,o=t}nl(e,!0,r,null,s);break;case"together":nl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Qr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(w(153));if(e.child!==null){for(t=e.child,r=hr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=hr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function rw(t,e,r){switch(e.tag){case 3:Jy(e),Mn();break;case 5:Ey(e);break;case 1:We(e.type)&&Ba(e);break;case 4:cd(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,o=e.memoizedProps.value;J(Ua,n._currentValue),n._currentValue=o;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(J(Z,Z.current&1),e.flags|=128,null):r&e.child.childLanes?Gy(t,e,r):(J(Z,Z.current&1),t=Wt(t,e,r),t!==null?t.sibling:null);J(Z,Z.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Qy(t,e,r);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),J(Z,Z.current),n)break;return null;case 22:case 23:return e.lanes=0,Vy(t,e,r)}return Wt(t,e,r)}var Yy,pp,Xy,Zy;Yy=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};pp=function(){};Xy=function(t,e,r,n){var o=t.memoizedProps;if(o!==n){t=e.stateNode,Wr(Tt.current);var s=null;switch(r){case"input":o=Dl(t,o),n=Dl(t,n),s=[];break;case"select":o=te({},o,{value:void 0}),n=te({},n,{value:void 0}),s=[];break;case"textarea":o=jl(t,o),n=jl(t,n),s=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=xa)}Ll(r,n);var a;r=null;for(u in o)if(!n.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var i=o[u];for(a in i)i.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ss.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(i=o!=null?o[u]:void 0,n.hasOwnProperty(u)&&c!==i&&(c!=null||i!=null))if(u==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ss.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&G("scroll",t),s||i===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Zy=function(t,e,r,n){r!==n&&(e.flags|=4)};function ni(t,e){if(!Y)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Te(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var o=t.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags&14680064,n|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function nw(t,e,r){var n=e.pendingProps;switch(td(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(e),null;case 1:return We(e.type)&&La(),Te(e),null;case 3:return n=e.stateNode,Dn(),Q($e),Q(Ne),ld(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ta(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ht!==null&&(Sp(ht),ht=null))),pp(t,e),Te(e),null;case 5:ud(e);var o=Wr(ys.current);if(r=e.type,t!==null&&e.stateNode!=null)Xy(t,e,r,n,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(w(166));return Te(e),null}if(t=Wr(Tt.current),ta(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Et]=e,n[gs]=s,t=(e.mode&1)!==0,r){case"dialog":G("cancel",n),G("close",n);break;case"iframe":case"object":case"embed":G("load",n);break;case"video":case"audio":for(o=0;o<Jo.length;o++)G(Jo[o],n);break;case"source":G("error",n);break;case"img":case"image":case"link":G("error",n),G("load",n);break;case"details":G("toggle",n);break;case"input":ph(n,s),G("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},G("invalid",n);break;case"textarea":hh(n,s),G("invalid",n)}Ll(r,s),o=null;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];a==="children"?typeof i=="string"?n.textContent!==i&&(s.suppressHydrationWarning!==!0&&ea(n.textContent,i,t),o=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(s.suppressHydrationWarning!==!0&&ea(n.textContent,i,t),o=["children",""+i]):ss.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&G("scroll",n)}switch(r){case"input":Vs(n),dh(n,s,!0);break;case"textarea":Vs(n),vh(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=xa)}n=o,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tm(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Et]=e,t[gs]=n,Yy(t,e,!1,!1),e.stateNode=t;e:{switch(a=Bl(r,n),r){case"dialog":G("cancel",t),G("close",t),o=n;break;case"iframe":case"object":case"embed":G("load",t),o=n;break;case"video":case"audio":for(o=0;o<Jo.length;o++)G(Jo[o],t);o=n;break;case"source":G("error",t),o=n;break;case"img":case"image":case"link":G("error",t),G("load",t),o=n;break;case"details":G("toggle",t),o=n;break;case"input":ph(t,n),o=Dl(t,n),G("invalid",t);break;case"option":o=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},o=te({},n,{value:void 0}),G("invalid",t);break;case"textarea":hh(t,n),o=jl(t,n),G("invalid",t);break;default:o=n}Ll(r,o),i=o;for(s in i)if(i.hasOwnProperty(s)){var c=i[s];s==="style"?km(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_m(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&as(t,c):typeof c=="number"&&as(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ss.hasOwnProperty(s)?c!=null&&s==="onScroll"&&G("scroll",t):c!=null&&Fp(t,s,c,a))}switch(r){case"input":Vs(t),dh(t,n,!1);break;case"textarea":Vs(t),vh(t);break;case"option":n.value!=null&&t.setAttribute("value",""+fr(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Rn(t,!!n.multiple,s,!1):n.defaultValue!=null&&Rn(t,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=xa)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Te(e),null;case 6:if(t&&e.stateNode!=null)Zy(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(w(166));if(r=Wr(ys.current),Wr(Tt.current),ta(e)){if(n=e.stateNode,r=e.memoizedProps,n[Et]=e,(s=n.nodeValue!==r)&&(t=Ye,t!==null))switch(t.tag){case 3:ea(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ea(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Et]=e,e.stateNode=n}return Te(e),null;case 13:if(Q(Z),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Y&&Ge!==null&&e.mode&1&&!(e.flags&128))gy(),Mn(),e.flags|=98560,s=!1;else if(s=ta(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(w(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(w(317));s[Et]=e}else Mn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Te(e),s=!1}else ht!==null&&(Sp(ht),ht=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Z.current&1?pe===0&&(pe=3):Rd())),e.updateQueue!==null&&(e.flags|=4),Te(e),null);case 4:return Dn(),pp(t,e),t===null&&vs(e.stateNode.containerInfo),Te(e),null;case 10:return od(e.type._context),Te(e),null;case 17:return We(e.type)&&La(),Te(e),null;case 19:if(Q(Z),s=e.memoizedState,s===null)return Te(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)ni(s,!1);else{if(pe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ha(t),a!==null){for(e.flags|=128,ni(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return J(Z,Z.current&1|2),e.child}t=t.sibling}s.tail!==null&&oe()>zn&&(e.flags|=128,n=!0,ni(s,!1),e.lanes=4194304)}else{if(!n)if(t=Ha(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ni(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Y)return Te(e),null}else 2*oe()-s.renderingStartTime>zn&&r!==1073741824&&(e.flags|=128,n=!0,ni(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=oe(),e.sibling=null,r=Z.current,J(Z,n?r&1|2:r&1),e):(Te(e),null);case 22:case 23:return Pd(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Je&1073741824&&(Te(e),e.subtreeFlags&6&&(e.flags|=8192)):Te(e),null;case 24:return null;case 25:return null}throw Error(w(156,e.tag))}function iw(t,e){switch(td(e),e.tag){case 1:return We(e.type)&&La(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Dn(),Q($e),Q(Ne),ld(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ud(e),null;case 13:if(Q(Z),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(w(340));Mn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Q(Z),null;case 4:return Dn(),null;case 10:return od(e.type._context),null;case 22:case 23:return Pd(),null;case 24:return null;default:return null}}var ia=!1,De=!1,ow=typeof WeakSet=="function"?WeakSet:Set,O=null;function Cn(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ne(t,e,n)}else r.current=null}function dp(t,e,r){try{r()}catch(n){ne(t,e,n)}}var nv=!1;function sw(t,e){if(Gl=Na,t=ny(),Zp(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var o=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,i=-1,c=-1,u=0,l=0,p=t,d=null;t:for(;;){for(var h;p!==r||o!==0&&p.nodeType!==3||(i=a+o),p!==s||n!==0&&p.nodeType!==3||(c=a+n),p.nodeType===3&&(a+=p.nodeValue.length),(h=p.firstChild)!==null;)d=p,p=h;for(;;){if(p===t)break t;if(d===r&&++u===o&&(i=a),d===s&&++l===n&&(c=a),(h=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=h}r=i===-1||c===-1?null:{start:i,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ql={focusedElem:t,selectionRange:r},Na=!1,O=e;O!==null;)if(e=O,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,O=t;else for(;O!==null;){e=O;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var m=v.memoizedProps,y=v.memoizedState,f=e.stateNode,g=f.getSnapshotBeforeUpdate(e.elementType===e.type?m:pt(e.type,m),y);f.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(w(163))}}catch(C){ne(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,O=t;break}O=e.return}return v=nv,nv=!1,v}function rs(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&dp(e,r,s)}o=o.next}while(o!==n)}}function gc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function hp(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function eS(t){var e=t.alternate;e!==null&&(t.alternate=null,eS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Et],delete e[gs],delete e[Zl],delete e[UE],delete e[$E])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tS(t){return t.tag===5||t.tag===3||t.tag===4}function iv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=xa));else if(n!==4&&(t=t.child,t!==null))for(vp(t,e,r),t=t.sibling;t!==null;)vp(t,e,r),t=t.sibling}function fp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(fp(t,e,r),t=t.sibling;t!==null;)fp(t,e,r),t=t.sibling}var me=null,dt=!1;function Jt(t,e,r){for(r=r.child;r!==null;)rS(t,e,r),r=r.sibling}function rS(t,e,r){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(cc,r)}catch{}switch(r.tag){case 5:De||Cn(r,e);case 6:var n=me,o=dt;me=null,Jt(t,e,r),me=n,dt=o,me!==null&&(dt?(t=me,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):me.removeChild(r.stateNode));break;case 18:me!==null&&(dt?(t=me,r=r.stateNode,t.nodeType===8?Qu(t.parentNode,r):t.nodeType===1&&Qu(t,r),ps(t)):Qu(me,r.stateNode));break;case 4:n=me,o=dt,me=r.stateNode.containerInfo,dt=!0,Jt(t,e,r),me=n,dt=o;break;case 0:case 11:case 14:case 15:if(!De&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){o=n=n.next;do{var s=o,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&dp(r,e,a),o=o.next}while(o!==n)}Jt(t,e,r);break;case 1:if(!De&&(Cn(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(i){ne(r,e,i)}Jt(t,e,r);break;case 21:Jt(t,e,r);break;case 22:r.mode&1?(De=(n=De)||r.memoizedState!==null,Jt(t,e,r),De=n):Jt(t,e,r);break;default:Jt(t,e,r)}}function ov(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new ow),e.forEach(function(n){var o=fw.bind(null,t,n);r.has(n)||(r.add(n),n.then(o,o))})}}function lt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var o=r[n];try{var s=t,a=e,i=a;e:for(;i!==null;){switch(i.tag){case 5:me=i.stateNode,dt=!1;break e;case 3:me=i.stateNode.containerInfo,dt=!0;break e;case 4:me=i.stateNode.containerInfo,dt=!0;break e}i=i.return}if(me===null)throw Error(w(160));rS(s,a,o),me=null,dt=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){ne(o,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nS(e,t),e=e.sibling}function nS(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(lt(e,t),Pt(t),n&4){try{rs(3,t,t.return),gc(3,t)}catch(m){ne(t,t.return,m)}try{rs(5,t,t.return)}catch(m){ne(t,t.return,m)}}break;case 1:lt(e,t),Pt(t),n&512&&r!==null&&Cn(r,r.return);break;case 5:if(lt(e,t),Pt(t),n&512&&r!==null&&Cn(r,r.return),t.flags&32){var o=t.stateNode;try{as(o,"")}catch(m){ne(t,t.return,m)}}if(n&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,i=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{i==="input"&&s.type==="radio"&&s.name!=null&&wm(o,s),Bl(i,a);var u=Bl(i,s);for(a=0;a<c.length;a+=2){var l=c[a],p=c[a+1];l==="style"?km(o,p):l==="dangerouslySetInnerHTML"?_m(o,p):l==="children"?as(o,p):Fp(o,l,p,u)}switch(i){case"input":Nl(o,s);break;case"textarea":Im(o,s);break;case"select":var d=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Rn(o,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Rn(o,!!s.multiple,s.defaultValue,!0):Rn(o,!!s.multiple,s.multiple?[]:"",!1))}o[gs]=s}catch(m){ne(t,t.return,m)}}break;case 6:if(lt(e,t),Pt(t),n&4){if(t.stateNode===null)throw Error(w(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(m){ne(t,t.return,m)}}break;case 3:if(lt(e,t),Pt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ps(e.containerInfo)}catch(m){ne(t,t.return,m)}break;case 4:lt(e,t),Pt(t);break;case 13:lt(e,t),Pt(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Sd=oe())),n&4&&ov(t);break;case 22:if(l=r!==null&&r.memoizedState!==null,t.mode&1?(De=(u=De)||l,lt(e,t),De=u):lt(e,t),Pt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!l&&t.mode&1)for(O=t,l=t.child;l!==null;){for(p=O=l;O!==null;){switch(d=O,h=d.child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:Cn(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(m){ne(n,r,m)}}break;case 5:Cn(d,d.return);break;case 22:if(d.memoizedState!==null){av(p);continue}}h!==null?(h.return=d,O=h):av(p)}l=l.sibling}e:for(l=null,p=t;;){if(p.tag===5){if(l===null){l=p;try{o=p.stateNode,u?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(i=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=Am("display",a))}catch(m){ne(t,t.return,m)}}}else if(p.tag===6){if(l===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(m){ne(t,t.return,m)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;l===p&&(l=null),p=p.return}l===p&&(l=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:lt(e,t),Pt(t),n&4&&ov(t);break;case 21:break;default:lt(e,t),Pt(t)}}function Pt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(tS(r)){var n=r;break e}r=r.return}throw Error(w(160))}switch(n.tag){case 5:var o=n.stateNode;n.flags&32&&(as(o,""),n.flags&=-33);var s=iv(t);fp(t,s,o);break;case 3:case 4:var a=n.stateNode.containerInfo,i=iv(t);vp(t,i,a);break;default:throw Error(w(161))}}catch(c){ne(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aw(t,e,r){O=t,iS(t)}function iS(t,e,r){for(var n=(t.mode&1)!==0;O!==null;){var o=O,s=o.child;if(o.tag===22&&n){var a=o.memoizedState!==null||ia;if(!a){var i=o.alternate,c=i!==null&&i.memoizedState!==null||De;i=ia;var u=De;if(ia=a,(De=c)&&!u)for(O=o;O!==null;)a=O,c=a.child,a.tag===22&&a.memoizedState!==null?cv(o):c!==null?(c.return=a,O=c):cv(o);for(;s!==null;)O=s,iS(s),s=s.sibling;O=o,ia=i,De=u}sv(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,O=s):sv(t)}}function sv(t){for(;O!==null;){var e=O;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:De||gc(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!De)if(r===null)n.componentDidMount();else{var o=e.elementType===e.type?r.memoizedProps:pt(e.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&$h(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}$h(e,a,r)}break;case 5:var i=e.stateNode;if(r===null&&e.flags&4){r=i;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var p=l.dehydrated;p!==null&&ps(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(w(163))}De||e.flags&512&&hp(e)}catch(d){ne(e,e.return,d)}}if(e===t){O=null;break}if(r=e.sibling,r!==null){r.return=e.return,O=r;break}O=e.return}}function av(t){for(;O!==null;){var e=O;if(e===t){O=null;break}var r=e.sibling;if(r!==null){r.return=e.return,O=r;break}O=e.return}}function cv(t){for(;O!==null;){var e=O;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{gc(4,e)}catch(c){ne(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var o=e.return;try{n.componentDidMount()}catch(c){ne(e,o,c)}}var s=e.return;try{hp(e)}catch(c){ne(e,s,c)}break;case 5:var a=e.return;try{hp(e)}catch(c){ne(e,a,c)}}}catch(c){ne(e,e.return,c)}if(e===t){O=null;break}var i=e.sibling;if(i!==null){i.return=e.return,O=i;break}O=e.return}}var cw=Math.ceil,Ja=Vt.ReactCurrentDispatcher,md=Vt.ReactCurrentOwner,st=Vt.ReactCurrentBatchConfig,H=0,he=null,ce=null,Se=0,Je=0,Pn=yr(0),pe=0,Rs=null,Qr=0,mc=0,yd=0,ns=null,qe=null,Sd=0,zn=1/0,Nt=null,Ga=!1,gp=null,pr=null,oa=!1,nr=null,Qa=0,is=0,mp=null,Ca=-1,Pa=0;function xe(){return H&6?oe():Ca!==-1?Ca:Ca=oe()}function dr(t){return t.mode&1?H&2&&Se!==0?Se&-Se:HE.transition!==null?(Pa===0&&(Pa=qm()),Pa):(t=K,t!==0||(t=window.event,t=t===void 0?16:Jm(t.type)),t):1}function ft(t,e,r,n){if(50<is)throw is=0,mp=null,Error(w(185));_s(t,r,n),(!(H&2)||t!==he)&&(t===he&&(!(H&2)&&(mc|=r),pe===4&&er(t,Se)),He(t,n),r===1&&H===0&&!(e.mode&1)&&(zn=oe()+500,hc&&Sr()))}function He(t,e){var r=t.callbackNode;HR(t,e);var n=Da(t,t===he?Se:0);if(n===0)r!==null&&mh(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&mh(r),e===1)t.tag===0?WE(uv.bind(null,t)):hy(uv.bind(null,t)),FE(function(){!(H&6)&&Sr()}),r=null;else{switch(Um(n)){case 1:r=Hp;break;case 4:r=Bm;break;case 16:r=ba;break;case 536870912:r=Fm;break;default:r=ba}r=dS(r,oS.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function oS(t,e){if(Ca=-1,Pa=0,H&6)throw Error(w(327));var r=t.callbackNode;if(_n()&&t.callbackNode!==r)return null;var n=Da(t,t===he?Se:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ya(t,n);else{e=n;var o=H;H|=2;var s=aS();(he!==t||Se!==e)&&(Nt=null,zn=oe()+500,Hr(t,e));do try{pw();break}catch(i){sS(t,i)}while(!0);id(),Ja.current=s,H=o,ce!==null?e=0:(he=null,Se=0,e=pe)}if(e!==0){if(e===2&&(o=Wl(t),o!==0&&(n=o,e=yp(t,o))),e===1)throw r=Rs,Hr(t,0),er(t,n),He(t,oe()),r;if(e===6)er(t,n);else{if(o=t.current.alternate,!(n&30)&&!uw(o)&&(e=Ya(t,n),e===2&&(s=Wl(t),s!==0&&(n=s,e=yp(t,s))),e===1))throw r=Rs,Hr(t,0),er(t,n),He(t,oe()),r;switch(t.finishedWork=o,t.finishedLanes=n,e){case 0:case 1:throw Error(w(345));case 2:Fr(t,qe,Nt);break;case 3:if(er(t,n),(n&130023424)===n&&(e=Sd+500-oe(),10<e)){if(Da(t,0)!==0)break;if(o=t.suspendedLanes,(o&n)!==n){xe(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Xl(Fr.bind(null,t,qe,Nt),e);break}Fr(t,qe,Nt);break;case 4:if(er(t,n),(n&4194240)===n)break;for(e=t.eventTimes,o=-1;0<n;){var a=31-vt(n);s=1<<a,a=e[a],a>o&&(o=a),n&=~s}if(n=o,n=oe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*cw(n/1960))-n,10<n){t.timeoutHandle=Xl(Fr.bind(null,t,qe,Nt),n);break}Fr(t,qe,Nt);break;case 5:Fr(t,qe,Nt);break;default:throw Error(w(329))}}}return He(t,oe()),t.callbackNode===r?oS.bind(null,t):null}function yp(t,e){var r=ns;return t.current.memoizedState.isDehydrated&&(Hr(t,e).flags|=256),t=Ya(t,e),t!==2&&(e=qe,qe=r,e!==null&&Sp(e)),t}function Sp(t){qe===null?qe=t:qe.push.apply(qe,t)}function uw(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var o=r[n],s=o.getSnapshot;o=o.value;try{if(!gt(s(),o))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function er(t,e){for(e&=~yd,e&=~mc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-vt(e),n=1<<r;t[r]=-1,e&=~n}}function uv(t){if(H&6)throw Error(w(327));_n();var e=Da(t,0);if(!(e&1))return He(t,oe()),null;var r=Ya(t,e);if(t.tag!==0&&r===2){var n=Wl(t);n!==0&&(e=n,r=yp(t,n))}if(r===1)throw r=Rs,Hr(t,0),er(t,e),He(t,oe()),r;if(r===6)throw Error(w(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fr(t,qe,Nt),He(t,oe()),null}function Cd(t,e){var r=H;H|=1;try{return t(e)}finally{H=r,H===0&&(zn=oe()+500,hc&&Sr())}}function Yr(t){nr!==null&&nr.tag===0&&!(H&6)&&_n();var e=H;H|=1;var r=st.transition,n=K;try{if(st.transition=null,K=1,t)return t()}finally{K=n,st.transition=r,H=e,!(H&6)&&Sr()}}function Pd(){Je=Pn.current,Q(Pn)}function Hr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,BE(r)),ce!==null)for(r=ce.return;r!==null;){var n=r;switch(td(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&La();break;case 3:Dn(),Q($e),Q(Ne),ld();break;case 5:ud(n);break;case 4:Dn();break;case 13:Q(Z);break;case 19:Q(Z);break;case 10:od(n.type._context);break;case 22:case 23:Pd()}r=r.return}if(he=t,ce=t=hr(t.current,null),Se=Je=e,pe=0,Rs=null,yd=mc=Qr=0,qe=ns=null,$r!==null){for(e=0;e<$r.length;e++)if(r=$r[e],n=r.interleaved,n!==null){r.interleaved=null;var o=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=o,n.next=a}r.pending=n}$r=null}return t}function sS(t,e){do{var r=ce;try{if(id(),ma.current=Ka,Va){for(var n=ee.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}Va=!1}if(Gr=0,de=le=ee=null,ts=!1,Ss=0,md.current=null,r===null||r.return===null){pe=1,Rs=e,ce=null;break}e:{var s=t,a=r.return,i=r,c=e;if(e=Se,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,l=i,p=l.tag;if(!(l.mode&1)&&(p===0||p===11||p===15)){var d=l.alternate;d?(l.updateQueue=d.updateQueue,l.memoizedState=d.memoizedState,l.lanes=d.lanes):(l.updateQueue=null,l.memoizedState=null)}var h=Qh(a);if(h!==null){h.flags&=-257,Yh(h,a,i,s,e),h.mode&1&&Gh(s,u,e),e=h,c=u;var v=e.updateQueue;if(v===null){var m=new Set;m.add(c),e.updateQueue=m}else v.add(c);break e}else{if(!(e&1)){Gh(s,u,e),Rd();break e}c=Error(w(426))}}else if(Y&&i.mode&1){var y=Qh(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Yh(y,a,i,s,e),rd(Nn(c,i));break e}}s=c=Nn(c,i),pe!==4&&(pe=2),ns===null?ns=[s]:ns.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var f=$y(s,c,e);Uh(s,f);break e;case 1:i=c;var g=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(pr===null||!pr.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=Wy(s,i,e);Uh(s,C);break e}}s=s.return}while(s!==null)}uS(r)}catch(P){e=P,ce===r&&r!==null&&(ce=r=r.return);continue}break}while(!0)}function aS(){var t=Ja.current;return Ja.current=Ka,t===null?Ka:t}function Rd(){(pe===0||pe===3||pe===2)&&(pe=4),he===null||!(Qr&268435455)&&!(mc&268435455)||er(he,Se)}function Ya(t,e){var r=H;H|=2;var n=aS();(he!==t||Se!==e)&&(Nt=null,Hr(t,e));do try{lw();break}catch(o){sS(t,o)}while(!0);if(id(),H=r,Ja.current=n,ce!==null)throw Error(w(261));return he=null,Se=0,pe}function lw(){for(;ce!==null;)cS(ce)}function pw(){for(;ce!==null&&!jR();)cS(ce)}function cS(t){var e=pS(t.alternate,t,Je);t.memoizedProps=t.pendingProps,e===null?uS(t):ce=e,md.current=null}function uS(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=iw(r,e),r!==null){r.flags&=32767,ce=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pe=6,ce=null;return}}else if(r=nw(r,e,Je),r!==null){ce=r;return}if(e=e.sibling,e!==null){ce=e;return}ce=e=t}while(e!==null);pe===0&&(pe=5)}function Fr(t,e,r){var n=K,o=st.transition;try{st.transition=null,K=1,dw(t,e,r,n)}finally{st.transition=o,K=n}return null}function dw(t,e,r,n){do _n();while(nr!==null);if(H&6)throw Error(w(327));r=t.finishedWork;var o=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(w(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(VR(t,s),t===he&&(ce=he=null,Se=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||oa||(oa=!0,dS(ba,function(){return _n(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=st.transition,st.transition=null;var a=K;K=1;var i=H;H|=4,md.current=null,sw(t,r),nS(r,t),bE(Ql),Na=!!Gl,Ql=Gl=null,t.current=r,aw(r),xR(),H=i,K=a,st.transition=s}else t.current=r;if(oa&&(oa=!1,nr=t,Qa=o),s=t.pendingLanes,s===0&&(pr=null),FR(r.stateNode),He(t,oe()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)o=e[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(Ga)throw Ga=!1,t=gp,gp=null,t;return Qa&1&&t.tag!==0&&_n(),s=t.pendingLanes,s&1?t===mp?is++:(is=0,mp=t):is=0,Sr(),null}function _n(){if(nr!==null){var t=Um(Qa),e=st.transition,r=K;try{if(st.transition=null,K=16>t?16:t,nr===null)var n=!1;else{if(t=nr,nr=null,Qa=0,H&6)throw Error(w(331));var o=H;for(H|=4,O=t.current;O!==null;){var s=O,a=s.child;if(O.flags&16){var i=s.deletions;if(i!==null){for(var c=0;c<i.length;c++){var u=i[c];for(O=u;O!==null;){var l=O;switch(l.tag){case 0:case 11:case 15:rs(8,l,s)}var p=l.child;if(p!==null)p.return=l,O=p;else for(;O!==null;){l=O;var d=l.sibling,h=l.return;if(eS(l),l===u){O=null;break}if(d!==null){d.return=h,O=d;break}O=h}}}var v=s.alternate;if(v!==null){var m=v.child;if(m!==null){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}O=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,O=a;else e:for(;O!==null;){if(s=O,s.flags&2048)switch(s.tag){case 0:case 11:case 15:rs(9,s,s.return)}var f=s.sibling;if(f!==null){f.return=s.return,O=f;break e}O=s.return}}var g=t.current;for(O=g;O!==null;){a=O;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,O=S;else e:for(a=g;O!==null;){if(i=O,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:gc(9,i)}}catch(P){ne(i,i.return,P)}if(i===a){O=null;break e}var C=i.sibling;if(C!==null){C.return=i.return,O=C;break e}O=i.return}}if(H=o,Sr(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(cc,t)}catch{}n=!0}return n}finally{K=r,st.transition=e}}return!1}function lv(t,e,r){e=Nn(r,e),e=$y(t,e,1),t=lr(t,e,1),e=xe(),t!==null&&(_s(t,1,e),He(t,e))}function ne(t,e,r){if(t.tag===3)lv(t,t,r);else for(;e!==null;){if(e.tag===3){lv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(pr===null||!pr.has(n))){t=Nn(r,t),t=Wy(e,t,1),e=lr(e,t,1),t=xe(),e!==null&&(_s(e,1,t),He(e,t));break}}e=e.return}}function hw(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=xe(),t.pingedLanes|=t.suspendedLanes&r,he===t&&(Se&r)===r&&(pe===4||pe===3&&(Se&130023424)===Se&&500>oe()-Sd?Hr(t,0):yd|=r),He(t,e)}function lS(t,e){e===0&&(t.mode&1?(e=Gs,Gs<<=1,!(Gs&130023424)&&(Gs=4194304)):e=1);var r=xe();t=$t(t,e),t!==null&&(_s(t,e,r),He(t,r))}function vw(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),lS(t,r)}function fw(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,o=t.memoizedState;o!==null&&(r=o.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(w(314))}n!==null&&n.delete(e),lS(t,r)}var pS;pS=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||$e.current)Ue=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ue=!1,rw(t,e,r);Ue=!!(t.flags&131072)}else Ue=!1,Y&&e.flags&1048576&&vy(e,qa,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Sa(t,e),t=e.pendingProps;var o=On(e,Ne.current);Tn(e,r),o=dd(null,e,n,t,o,r);var s=hd();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,We(n)?(s=!0,Ba(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,ad(e),o.updater=vc,e.stateNode=o,o._reactInternals=e,op(e,n,t,r),e=cp(null,e,n,!0,s,r)):(e.tag=0,Y&&s&&ed(e),je(null,e,o,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Sa(t,e),t=e.pendingProps,o=n._init,n=o(n._payload),e.type=n,o=e.tag=mw(n),t=pt(n,t),o){case 0:e=ap(null,e,n,t,r);break e;case 1:e=ev(null,e,n,t,r);break e;case 11:e=Xh(null,e,n,t,r);break e;case 14:e=Zh(null,e,n,pt(n.type,t),r);break e}throw Error(w(306,n,""))}return e;case 0:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:pt(n,o),ap(t,e,n,o,r);case 1:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:pt(n,o),ev(t,e,n,o,r);case 3:e:{if(Jy(e),t===null)throw Error(w(387));n=e.pendingProps,s=e.memoizedState,o=s.element,yy(t,e),Wa(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Nn(Error(w(423)),e),e=tv(t,e,n,r,o);break e}else if(n!==o){o=Nn(Error(w(424)),e),e=tv(t,e,n,r,o);break e}else for(Ge=ur(e.stateNode.containerInfo.firstChild),Ye=e,Y=!0,ht=null,r=Ry(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Mn(),n===o){e=Wt(t,e,r);break e}je(t,e,n,r)}e=e.child}return e;case 5:return Ey(e),t===null&&rp(e),n=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,a=o.children,Yl(n,o)?a=null:s!==null&&Yl(n,s)&&(e.flags|=32),Ky(t,e),je(t,e,a,r),e.child;case 6:return t===null&&rp(e),null;case 13:return Gy(t,e,r);case 4:return cd(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=bn(e,null,n,r):je(t,e,n,r),e.child;case 11:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:pt(n,o),Xh(t,e,n,o,r);case 7:return je(t,e,e.pendingProps,r),e.child;case 8:return je(t,e,e.pendingProps.children,r),e.child;case 12:return je(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,o=e.pendingProps,s=e.memoizedProps,a=o.value,J(Ua,n._currentValue),n._currentValue=a,s!==null)if(gt(s.value,a)){if(s.children===o.children&&!$e.current){e=Wt(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var i=s.dependencies;if(i!==null){a=s.child;for(var c=i.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Bt(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?c.next=c:(c.next=l.next,l.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),np(s.return,r,e),i.lanes|=r;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(w(341));a.lanes|=r,i=a.alternate,i!==null&&(i.lanes|=r),np(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}je(t,e,o.children,r),e=e.child}return e;case 9:return o=e.type,n=e.pendingProps.children,Tn(e,r),o=at(o),n=n(o),e.flags|=1,je(t,e,n,r),e.child;case 14:return n=e.type,o=pt(n,e.pendingProps),o=pt(n.type,o),Zh(t,e,n,o,r);case 15:return Hy(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:pt(n,o),Sa(t,e),e.tag=1,We(n)?(t=!0,Ba(e)):t=!1,Tn(e,r),Cy(e,n,o),op(e,n,o,r),cp(null,e,n,!0,t,r);case 19:return Qy(t,e,r);case 22:return Vy(t,e,r)}throw Error(w(156,e.tag))};function dS(t,e){return Lm(t,e)}function gw(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ot(t,e,r,n){return new gw(t,e,r,n)}function Ed(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mw(t){if(typeof t=="function")return Ed(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Up)return 11;if(t===$p)return 14}return 2}function hr(t,e){var r=t.alternate;return r===null?(r=ot(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ra(t,e,r,n,o,s){var a=2;if(n=t,typeof t=="function")Ed(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case pn:return Vr(r.children,o,s,e);case qp:a=8,o|=8;break;case kl:return t=ot(12,r,e,o|2),t.elementType=kl,t.lanes=s,t;case Ol:return t=ot(13,r,e,o),t.elementType=Ol,t.lanes=s,t;case Ml:return t=ot(19,r,e,o),t.elementType=Ml,t.lanes=s,t;case Pm:return yc(r,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sm:a=10;break e;case Cm:a=9;break e;case Up:a=11;break e;case $p:a=14;break e;case Gt:a=16,n=null;break e}throw Error(w(130,t==null?t:typeof t,""))}return e=ot(a,r,e,o),e.elementType=t,e.type=n,e.lanes=s,e}function Vr(t,e,r,n){return t=ot(7,t,n,e),t.lanes=r,t}function yc(t,e,r,n){return t=ot(22,t,n,e),t.elementType=Pm,t.lanes=r,t.stateNode={isHidden:!1},t}function il(t,e,r){return t=ot(6,t,null,e),t.lanes=r,t}function ol(t,e,r){return e=ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yw(t,e,r,n,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bu(0),this.expirationTimes=Bu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bu(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function wd(t,e,r,n,o,s,a,i,c){return t=new yw(t,e,r,i,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ot(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ad(s),t}function Sw(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ln,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function hS(t){if(!t)return gr;t=t._reactInternals;e:{if(tn(t)!==t||t.tag!==1)throw Error(w(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(We(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(w(171))}if(t.tag===1){var r=t.type;if(We(r))return dy(t,r,e)}return e}function vS(t,e,r,n,o,s,a,i,c){return t=wd(r,n,!0,t,o,s,a,i,c),t.context=hS(null),r=t.current,n=xe(),o=dr(r),s=Bt(n,o),s.callback=e??null,lr(r,s,o),t.current.lanes=o,_s(t,o,n),He(t,n),t}function Sc(t,e,r,n){var o=e.current,s=xe(),a=dr(o);return r=hS(r),e.context===null?e.context=r:e.pendingContext=r,e=Bt(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=lr(o,e,a),t!==null&&(ft(t,o,a,s),ga(t,o,a)),a}function Xa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function pv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Id(t,e){pv(t,e),(t=t.alternate)&&pv(t,e)}function Cw(){return null}var fS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Td(t){this._internalRoot=t}Cc.prototype.render=Td.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(w(409));Sc(t,e,null,null)};Cc.prototype.unmount=Td.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yr(function(){Sc(null,t,null,null)}),e[Ut]=null}};function Cc(t){this._internalRoot=t}Cc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hm();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Zt.length&&e!==0&&e<Zt[r].priority;r++);Zt.splice(r,0,t),r===0&&Km(t)}};function _d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dv(){}function Pw(t,e,r,n,o){if(o){if(typeof n=="function"){var s=n;n=function(){var u=Xa(a);s.call(u)}}var a=vS(e,n,t,0,null,!1,!1,"",dv);return t._reactRootContainer=a,t[Ut]=a.current,vs(t.nodeType===8?t.parentNode:t),Yr(),a}for(;o=t.lastChild;)t.removeChild(o);if(typeof n=="function"){var i=n;n=function(){var u=Xa(c);i.call(u)}}var c=wd(t,0,!1,null,null,!1,!1,"",dv);return t._reactRootContainer=c,t[Ut]=c.current,vs(t.nodeType===8?t.parentNode:t),Yr(function(){Sc(e,c,r,n)}),c}function Rc(t,e,r,n,o){var s=r._reactRootContainer;if(s){var a=s;if(typeof o=="function"){var i=o;o=function(){var c=Xa(a);i.call(c)}}Sc(e,a,t,o)}else a=Pw(r,e,t,o,n);return Xa(a)}$m=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ko(e.pendingLanes);r!==0&&(Vp(e,r|1),He(e,oe()),!(H&6)&&(zn=oe()+500,Sr()))}break;case 13:Yr(function(){var n=$t(t,1);if(n!==null){var o=xe();ft(n,t,1,o)}}),Id(t,1)}};Kp=function(t){if(t.tag===13){var e=$t(t,134217728);if(e!==null){var r=xe();ft(e,t,134217728,r)}Id(t,134217728)}};Wm=function(t){if(t.tag===13){var e=dr(t),r=$t(t,e);if(r!==null){var n=xe();ft(r,t,e,n)}Id(t,e)}};Hm=function(){return K};Vm=function(t,e){var r=K;try{return K=t,e()}finally{K=r}};ql=function(t,e,r){switch(e){case"input":if(Nl(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var o=dc(n);if(!o)throw Error(w(90));Em(n),Nl(n,o)}}}break;case"textarea":Im(t,r);break;case"select":e=r.value,e!=null&&Rn(t,!!r.multiple,e,!1)}};bm=Cd;Dm=Yr;var Rw={usingClientEntryPoint:!1,Events:[ks,fn,dc,Om,Mm,Cd]},ii={findFiberByHostInstance:Ur,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Ew={bundleType:ii.bundleType,version:ii.version,rendererPackageName:ii.rendererPackageName,rendererConfig:ii.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jm(t),t===null?null:t.stateNode},findFiberByHostInstance:ii.findFiberByHostInstance||Cw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sa.isDisabled&&sa.supportsFiber)try{cc=sa.inject(Ew),It=sa}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rw;Ze.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_d(e))throw Error(w(200));return Sw(t,e,null,r)};Ze.createRoot=function(t,e){if(!_d(t))throw Error(w(299));var r=!1,n="",o=fS;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=wd(t,1,!1,null,null,r,!1,n,o),t[Ut]=e.current,vs(t.nodeType===8?t.parentNode:t),new Td(e)};Ze.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(w(188)):(t=Object.keys(t).join(","),Error(w(268,t)));return t=jm(e),t=t===null?null:t.stateNode,t};Ze.flushSync=function(t){return Yr(t)};Ze.hydrate=function(t,e,r){if(!Pc(e))throw Error(w(200));return Rc(null,t,e,!0,r)};Ze.hydrateRoot=function(t,e,r){if(!_d(t))throw Error(w(405));var n=r!=null&&r.hydratedSources||null,o=!1,s="",a=fS;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=vS(e,null,t,1,r??null,o,!1,s,a),t[Ut]=e.current,vs(t),n)for(t=0;t<n.length;t++)r=n[t],o=r._getVersion,o=o(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,o]:e.mutableSourceEagerHydrationData.push(r,o);return new Cc(e)};Ze.render=function(t,e,r){if(!Pc(e))throw Error(w(200));return Rc(null,t,e,!1,r)};Ze.unmountComponentAtNode=function(t){if(!Pc(t))throw Error(w(40));return t._reactRootContainer?(Yr(function(){Rc(null,null,t,!1,function(){t._reactRootContainer=null,t[Ut]=null})}),!0):!1};Ze.unstable_batchedUpdates=Cd;Ze.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Pc(r))throw Error(w(200));if(t==null||t._reactInternals===void 0)throw Error(w(38));return Rc(t,e,r,!1,n)};Ze.version="18.2.0-next-9e3b772b8-20220608";function gS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gS)}catch(t){console.error(t)}}gS(),vm.exports=Ze;var ww=vm.exports,hv=ww;_l.createRoot=hv.createRoot,_l.hydrateRoot=hv.hydrateRoot;/**
 * @remix-run/router v1.15.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Za(){return Za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Za.apply(this,arguments)}var ir;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ir||(ir={}));const vv="popstate";function Iw(t){t===void 0&&(t={});function e(n,o){let{pathname:s,search:a,hash:i}=n.location;return Cp("",{pathname:s,search:a,hash:i},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(n,o){return typeof o=="string"?o:yS(o)}return _w(e,r,null,t)}function Ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Tw(){return Math.random().toString(36).substr(2,8)}function fv(t,e){return{usr:t.state,key:t.key,idx:e}}function Cp(t,e,r,n){return r===void 0&&(r=null),Za({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ec(e):e,{state:r,key:e&&e.key||n||Tw()})}function yS(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ec(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function _w(t,e,r,n){n===void 0&&(n={});let{window:o=document.defaultView,v5Compat:s=!1}=n,a=o.history,i=ir.Pop,c=null,u=l();u==null&&(u=0,a.replaceState(Za({},a.state,{idx:u}),""));function l(){return(a.state||{idx:null}).idx}function p(){i=ir.Pop;let y=l(),f=y==null?null:y-u;u=y,c&&c({action:i,location:m.location,delta:f})}function d(y,f){i=ir.Push;let g=Cp(m.location,y,f);r&&r(g,y),u=l()+1;let S=fv(g,u),C=m.createHref(g);try{a.pushState(S,"",C)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;o.location.assign(C)}s&&c&&c({action:i,location:m.location,delta:1})}function h(y,f){i=ir.Replace;let g=Cp(m.location,y,f);r&&r(g,y),u=l();let S=fv(g,u),C=m.createHref(g);a.replaceState(S,"",C),s&&c&&c({action:i,location:m.location,delta:0})}function v(y){let f=o.location.origin!=="null"?o.location.origin:o.location.href,g=typeof y=="string"?y:yS(y);return g=g.replace(/ $/,"%20"),Ve(f,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,f)}let m={get action(){return i},get location(){return t(o,a)},listen(y){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(vv,p),c=y,()=>{o.removeEventListener(vv,p),c=null}},createHref(y){return e(o,y)},createURL:v,encodeLocation(y){let f=v(y);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:d,replace:h,go(y){return a.go(y)}};return m}var gv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(gv||(gv={}));function Aw(t,e,r){r===void 0&&(r="/");let n=typeof e=="string"?Ec(e):e,o=PS(n.pathname||"/",r);if(o==null)return null;let s=SS(t);kw(s);let a=null;for(let i=0;a==null&&i<s.length;++i){let c=qw(o);a=Lw(s[i],c)}return a}function SS(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let o=(s,a,i)=>{let c={relativePath:i===void 0?s.path||"":i,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(Ve(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=An([n,c.relativePath]),l=r.concat(c);s.children&&s.children.length>0&&(Ve(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),SS(s.children,e,l,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:jw(u,s.index),routesMeta:l})};return t.forEach((s,a)=>{var i;if(s.path===""||!((i=s.path)!=null&&i.includes("?")))o(s,a);else for(let c of CS(s.path))o(s,a,c)}),e}function CS(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,o=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return o?[s,""]:[s];let a=CS(n.join("/")),i=[];return i.push(...a.map(c=>c===""?s:[s,c].join("/"))),o&&i.push(...a),i.map(c=>t.startsWith("/")&&c===""?"/":c)}function kw(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:xw(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Ow=/^:[\w-]+$/,Mw=3,bw=2,Dw=1,Nw=10,zw=-2,mv=t=>t==="*";function jw(t,e){let r=t.split("/"),n=r.length;return r.some(mv)&&(n+=zw),e&&(n+=bw),r.filter(o=>!mv(o)).reduce((o,s)=>o+(Ow.test(s)?Mw:s===""?Dw:Nw),n)}function xw(t,e){return t.length===e.length&&t.slice(0,-1).every((n,o)=>n===e[o])?t[t.length-1]-e[e.length-1]:0}function Lw(t,e){let{routesMeta:r}=t,n={},o="/",s=[];for(let a=0;a<r.length;++a){let i=r[a],c=a===r.length-1,u=o==="/"?e:e.slice(o.length)||"/",l=Bw({path:i.relativePath,caseSensitive:i.caseSensitive,end:c},u);if(!l)return null;Object.assign(n,l.params);let p=i.route;s.push({params:n,pathname:An([o,l.pathname]),pathnameBase:Uw(An([o,l.pathnameBase])),route:p}),l.pathnameBase!=="/"&&(o=An([o,l.pathnameBase]))}return s}function Bw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Fw(t.path,t.caseSensitive,t.end),o=e.match(r);if(!o)return null;let s=o[0],a=s.replace(/(.)\/+$/,"$1"),i=o.slice(1);return{params:n.reduce((u,l,p)=>{let{paramName:d,isOptional:h}=l;if(d==="*"){let m=i[p]||"";a=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const v=i[p];return h&&!v?u[d]=void 0:u[d]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:t}}function Fw(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),mS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(n.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),n]}function qw(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function PS(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const An=t=>t.join("/").replace(/\/\/+/g,"/"),Uw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function $w(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const RS=["post","put","patch","delete"];new Set(RS);const Ww=["get",...RS];new Set(Ww);/**
 * React Router v6.22.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ec(){return ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ec.apply(this,arguments)}const Hw=T.createContext(null),Vw=T.createContext(null),ES=T.createContext(null),wc=T.createContext(null),Ic=T.createContext({outlet:null,matches:[],isDataRoute:!1}),wS=T.createContext(null);function Ad(){return T.useContext(wc)!=null}function Kw(){return Ad()||Ve(!1),T.useContext(wc).location}function Jw(t,e){return Gw(t,e)}function Gw(t,e,r,n){Ad()||Ve(!1);let{navigator:o}=T.useContext(ES),{matches:s}=T.useContext(Ic),a=s[s.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Kw(),l;if(e){var p;let y=typeof e=="string"?Ec(e):e;c==="/"||(p=y.pathname)!=null&&p.startsWith(c)||Ve(!1),l=y}else l=u;let d=l.pathname||"/",h=d;if(c!=="/"){let y=c.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=Aw(t,{pathname:h}),m=e0(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},i,y.params),pathname:An([c,o.encodeLocation?o.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:An([c,o.encodeLocation?o.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return e&&m?T.createElement(wc.Provider,{value:{location:ec({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:ir.Pop}},m):m}function Qw(){let t=i0(),e=$w(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:o},r):null,null)}const Yw=T.createElement(Qw,null);class Xw extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?T.createElement(Ic.Provider,{value:this.props.routeContext},T.createElement(wS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Zw(t){let{routeContext:e,match:r,children:n}=t,o=T.useContext(Hw);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(Ic.Provider,{value:e},n)}function e0(t,e,r,n){var o;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if((s=r)!=null&&s.errors)t=r.matches;else return null}let a=t,i=(o=r)==null?void 0:o.errors;if(i!=null){let l=a.findIndex(p=>p.route.id&&(i==null?void 0:i[p.route.id]));l>=0||Ve(!1),a=a.slice(0,Math.min(a.length,l+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let l=0;l<a.length;l++){let p=a[l];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=l),p.route.id){let{loaderData:d,errors:h}=r,v=p.route.loader&&d[p.route.id]===void 0&&(!h||h[p.route.id]===void 0);if(p.route.lazy||v){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((l,p,d)=>{let h,v=!1,m=null,y=null;r&&(h=i&&p.route.id?i[p.route.id]:void 0,m=p.route.errorElement||Yw,c&&(u<0&&d===0?(o0("route-fallback",!1),v=!0,y=null):u===d&&(v=!0,y=p.route.hydrateFallbackElement||null)));let f=e.concat(a.slice(0,d+1)),g=()=>{let S;return h?S=m:v?S=y:p.route.Component?S=T.createElement(p.route.Component,null):p.route.element?S=p.route.element:S=l,T.createElement(Zw,{match:p,routeContext:{outlet:l,matches:f,isDataRoute:r!=null},children:S})};return r&&(p.route.ErrorBoundary||p.route.errorElement||d===0)?T.createElement(Xw,{location:r.location,revalidation:r.revalidation,component:m,error:h,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var Pp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Pp||{});function t0(t){let e=T.useContext(Vw);return e||Ve(!1),e}function r0(t){let e=T.useContext(Ic);return e||Ve(!1),e}function n0(t){let e=r0(),r=e.matches[e.matches.length-1];return r.route.id||Ve(!1),r.route.id}function i0(){var t;let e=T.useContext(wS),r=t0(Pp.UseRouteError),n=n0(Pp.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}const yv={};function o0(t,e,r){!e&&!yv[t]&&(yv[t]=!0)}function IS(t){Ve(!1)}function s0(t){let{basename:e="/",children:r=null,location:n,navigationType:o=ir.Pop,navigator:s,static:a=!1,future:i}=t;Ad()&&Ve(!1);let c=e.replace(/^\/*/,"/"),u=T.useMemo(()=>({basename:c,navigator:s,static:a,future:ec({v7_relativeSplatPath:!1},i)}),[c,i,s,a]);typeof n=="string"&&(n=Ec(n));let{pathname:l="/",search:p="",hash:d="",state:h=null,key:v="default"}=n,m=T.useMemo(()=>{let y=PS(l,c);return y==null?null:{location:{pathname:y,search:p,hash:d,state:h,key:v},navigationType:o}},[c,l,p,d,h,v,o]);return m==null?null:T.createElement(ES.Provider,{value:u},T.createElement(wc.Provider,{children:r,value:m}))}function a0(t){let{children:e,location:r}=t;return Jw(Rp(e),r)}new Promise(()=>{});function Rp(t,e){e===void 0&&(e=[]);let r=[];return T.Children.forEach(t,(n,o)=>{if(!T.isValidElement(n))return;let s=[...e,o];if(n.type===T.Fragment){r.push.apply(r,Rp(n.props.children,s));return}n.type!==IS&&Ve(!1),!n.props.index||!n.props.children||Ve(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Rp(n.props.children,s)),r.push(a)}),r}/**
 * React Router DOM v6.22.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const c0="6";try{window.__reactRouterVersion=c0}catch{}const u0="startTransition",Sv=vR[u0];function l0(t){let{basename:e,children:r,future:n,window:o}=t,s=T.useRef();s.current==null&&(s.current=Iw({window:o,v5Compat:!0}));let a=s.current,[i,c]=T.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},l=T.useCallback(p=>{u&&Sv?Sv(()=>c(p)):c(p)},[c,u]);return T.useLayoutEffect(()=>a.listen(l),[a,l]),T.createElement(s0,{basename:e,children:r,location:i.location,navigationType:i.action,navigator:a,future:n})}var Cv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Cv||(Cv={}));var Pv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Pv||(Pv={}));let aa;const p0=new Uint8Array(16);function TS(){if(!aa&&(aa=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!aa))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return aa(p0)}const d0=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Tc(t){return typeof t=="string"&&d0.test(t)}const ge=[];for(let t=0;t<256;++t)ge.push((t+256).toString(16).slice(1));function _c(t,e=0){return ge[t[e+0]]+ge[t[e+1]]+ge[t[e+2]]+ge[t[e+3]]+"-"+ge[t[e+4]]+ge[t[e+5]]+"-"+ge[t[e+6]]+ge[t[e+7]]+"-"+ge[t[e+8]]+ge[t[e+9]]+"-"+ge[t[e+10]]+ge[t[e+11]]+ge[t[e+12]]+ge[t[e+13]]+ge[t[e+14]]+ge[t[e+15]]}function h0(t,e=0){const r=_c(t,e);if(!Tc(r))throw TypeError("Stringified UUID is invalid");return r}let Rv,sl,al=0,cl=0;function v0(t,e,r){let n=e&&r||0;const o=e||new Array(16);t=t||{};let s=t.node||Rv,a=t.clockseq!==void 0?t.clockseq:sl;if(s==null||a==null){const d=t.random||(t.rng||TS)();s==null&&(s=Rv=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),a==null&&(a=sl=(d[6]<<8|d[7])&16383)}let i=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:cl+1;const u=i-al+(c-cl)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||i>al)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");al=i,cl=c,sl=a,i+=122192928e5;const l=((i&268435455)*1e4+c)%4294967296;o[n++]=l>>>24&255,o[n++]=l>>>16&255,o[n++]=l>>>8&255,o[n++]=l&255;const p=i/4294967296*1e4&268435455;o[n++]=p>>>8&255,o[n++]=p&255,o[n++]=p>>>24&15|16,o[n++]=p>>>16&255,o[n++]=a>>>8|128,o[n++]=a&255;for(let d=0;d<6;++d)o[n+d]=s[d];return e||_c(o)}function _S(t){if(!Tc(t))throw TypeError("Invalid UUID");let e;const r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function f0(t){t=unescape(encodeURIComponent(t));const e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}const g0="6ba7b810-9dad-11d1-80b4-00c04fd430c8",m0="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function AS(t,e,r){function n(o,s,a,i){var c;if(typeof o=="string"&&(o=f0(o)),typeof s=="string"&&(s=_S(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+o.length);if(u.set(s),u.set(o,s.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){i=i||0;for(let l=0;l<16;++l)a[i+l]=u[l];return a}return _c(u)}try{n.name=t}catch{}return n.DNS=g0,n.URL=m0,n}function y0(t){if(typeof t=="string"){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return S0(C0(P0(t),t.length*8))}function S0(t){const e=[],r=t.length*32,n="0123456789abcdef";for(let o=0;o<r;o+=8){const s=t[o>>5]>>>o%32&255,a=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(a)}return e}function kS(t){return(t+64>>>9<<4)+14+1}function C0(t,e){t[e>>5]|=128<<e%32,t[kS(e)-1]=e;let r=1732584193,n=-271733879,o=-1732584194,s=271733878;for(let a=0;a<t.length;a+=16){const i=r,c=n,u=o,l=s;r=_e(r,n,o,s,t[a],7,-680876936),s=_e(s,r,n,o,t[a+1],12,-389564586),o=_e(o,s,r,n,t[a+2],17,606105819),n=_e(n,o,s,r,t[a+3],22,-1044525330),r=_e(r,n,o,s,t[a+4],7,-176418897),s=_e(s,r,n,o,t[a+5],12,1200080426),o=_e(o,s,r,n,t[a+6],17,-1473231341),n=_e(n,o,s,r,t[a+7],22,-45705983),r=_e(r,n,o,s,t[a+8],7,1770035416),s=_e(s,r,n,o,t[a+9],12,-1958414417),o=_e(o,s,r,n,t[a+10],17,-42063),n=_e(n,o,s,r,t[a+11],22,-1990404162),r=_e(r,n,o,s,t[a+12],7,1804603682),s=_e(s,r,n,o,t[a+13],12,-40341101),o=_e(o,s,r,n,t[a+14],17,-1502002290),n=_e(n,o,s,r,t[a+15],22,1236535329),r=Ae(r,n,o,s,t[a+1],5,-165796510),s=Ae(s,r,n,o,t[a+6],9,-1069501632),o=Ae(o,s,r,n,t[a+11],14,643717713),n=Ae(n,o,s,r,t[a],20,-373897302),r=Ae(r,n,o,s,t[a+5],5,-701558691),s=Ae(s,r,n,o,t[a+10],9,38016083),o=Ae(o,s,r,n,t[a+15],14,-660478335),n=Ae(n,o,s,r,t[a+4],20,-405537848),r=Ae(r,n,o,s,t[a+9],5,568446438),s=Ae(s,r,n,o,t[a+14],9,-1019803690),o=Ae(o,s,r,n,t[a+3],14,-187363961),n=Ae(n,o,s,r,t[a+8],20,1163531501),r=Ae(r,n,o,s,t[a+13],5,-1444681467),s=Ae(s,r,n,o,t[a+2],9,-51403784),o=Ae(o,s,r,n,t[a+7],14,1735328473),n=Ae(n,o,s,r,t[a+12],20,-1926607734),r=ke(r,n,o,s,t[a+5],4,-378558),s=ke(s,r,n,o,t[a+8],11,-2022574463),o=ke(o,s,r,n,t[a+11],16,1839030562),n=ke(n,o,s,r,t[a+14],23,-35309556),r=ke(r,n,o,s,t[a+1],4,-1530992060),s=ke(s,r,n,o,t[a+4],11,1272893353),o=ke(o,s,r,n,t[a+7],16,-155497632),n=ke(n,o,s,r,t[a+10],23,-1094730640),r=ke(r,n,o,s,t[a+13],4,681279174),s=ke(s,r,n,o,t[a],11,-358537222),o=ke(o,s,r,n,t[a+3],16,-722521979),n=ke(n,o,s,r,t[a+6],23,76029189),r=ke(r,n,o,s,t[a+9],4,-640364487),s=ke(s,r,n,o,t[a+12],11,-421815835),o=ke(o,s,r,n,t[a+15],16,530742520),n=ke(n,o,s,r,t[a+2],23,-995338651),r=Oe(r,n,o,s,t[a],6,-198630844),s=Oe(s,r,n,o,t[a+7],10,1126891415),o=Oe(o,s,r,n,t[a+14],15,-1416354905),n=Oe(n,o,s,r,t[a+5],21,-57434055),r=Oe(r,n,o,s,t[a+12],6,1700485571),s=Oe(s,r,n,o,t[a+3],10,-1894986606),o=Oe(o,s,r,n,t[a+10],15,-1051523),n=Oe(n,o,s,r,t[a+1],21,-2054922799),r=Oe(r,n,o,s,t[a+8],6,1873313359),s=Oe(s,r,n,o,t[a+15],10,-30611744),o=Oe(o,s,r,n,t[a+6],15,-1560198380),n=Oe(n,o,s,r,t[a+13],21,1309151649),r=Oe(r,n,o,s,t[a+4],6,-145523070),s=Oe(s,r,n,o,t[a+11],10,-1120210379),o=Oe(o,s,r,n,t[a+2],15,718787259),n=Oe(n,o,s,r,t[a+9],21,-343485551),r=or(r,i),n=or(n,c),o=or(o,u),s=or(s,l)}return[r,n,o,s]}function P0(t){if(t.length===0)return[];const e=t.length*8,r=new Uint32Array(kS(e));for(let n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function or(t,e){const r=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(r>>16)<<16|r&65535}function R0(t,e){return t<<e|t>>>32-e}function Ac(t,e,r,n,o,s){return or(R0(or(or(e,t),or(n,s)),o),r)}function _e(t,e,r,n,o,s,a){return Ac(e&r|~e&n,t,e,o,s,a)}function Ae(t,e,r,n,o,s,a){return Ac(e&n|r&~n,t,e,o,s,a)}function ke(t,e,r,n,o,s,a){return Ac(e^r^n,t,e,o,s,a)}function Oe(t,e,r,n,o,s,a){return Ac(r^(e|~n),t,e,o,s,a)}const E0=AS("v3",48,y0),w0=E0,I0=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ev={randomUUID:I0};function tc(t,e,r){if(Ev.randomUUID&&!e&&!t)return Ev.randomUUID();t=t||{};const n=t.random||(t.rng||TS)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let o=0;o<16;++o)e[r+o]=n[o];return e}return _c(n)}function T0(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function ul(t,e){return t<<e|t>>>32-e}function _0(t){const e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){const a=unescape(encodeURIComponent(t));t=[];for(let i=0;i<a.length;++i)t.push(a.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const n=t.length/4+2,o=Math.ceil(n/16),s=new Array(o);for(let a=0;a<o;++a){const i=new Uint32Array(16);for(let c=0;c<16;++c)i[c]=t[a*64+c*4]<<24|t[a*64+c*4+1]<<16|t[a*64+c*4+2]<<8|t[a*64+c*4+3];s[a]=i}s[o-1][14]=(t.length-1)*8/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=(t.length-1)*8&4294967295;for(let a=0;a<o;++a){const i=new Uint32Array(80);for(let h=0;h<16;++h)i[h]=s[a][h];for(let h=16;h<80;++h)i[h]=ul(i[h-3]^i[h-8]^i[h-14]^i[h-16],1);let c=r[0],u=r[1],l=r[2],p=r[3],d=r[4];for(let h=0;h<80;++h){const v=Math.floor(h/20),m=ul(c,5)+T0(v,u,l,p)+d+e[v]+i[h]>>>0;d=p,p=l,l=ul(u,30)>>>0,u=c,c=m}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+p>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}const A0=AS("v5",80,_0),k0=A0,O0="00000000-0000-0000-0000-000000000000";function M0(t){if(!Tc(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}const b0=Object.freeze(Object.defineProperty({__proto__:null,NIL:O0,parse:_S,stringify:h0,v1:v0,v3:w0,v4:tc,v5:k0,validate:Tc,version:M0},Symbol.toStringTag,{value:"Module"})),wv="/assets/MLAI Digital logo-CpEYKan4.png",D0="94f6ccf27eae4c3fa2055f6f97a8b0a2",N0="southeastasia",Ea="http://127.0.0.1:5000",Iv=[{id:"1",botMessage:"Hello!"},{id:"2",botMessage:"How can I assist you today?"}];var OS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Tv=Lt.createContext&&Lt.createContext(OS),z0=["attr","size","title"];function j0(t,e){if(t==null)return{};var r=x0(t,e),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)n=s[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function x0(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,s;for(s=0;s<n.length;s++)o=n[s],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function rc(){return rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rc.apply(this,arguments)}function _v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function nc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_v(Object(r),!0).forEach(function(n){L0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_v(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function L0(t,e,r){return e=B0(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B0(t){var e=F0(t,"string");return typeof e=="symbol"?e:String(e)}function F0(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MS(t){return t&&t.map((e,r)=>Lt.createElement(e.tag,nc({key:r},e.attr),MS(e.child)))}function Ms(t){return e=>Lt.createElement(q0,rc({attr:nc({},t.attr)},e),MS(t.child))}function q0(t){var e=r=>{var{attr:n,size:o,title:s}=t,a=j0(t,z0),i=o||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),Lt.createElement("svg",rc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:c,style:nc(nc({color:t.color||r.color},r.style),t.style),height:i,width:i,xmlns:"http://www.w3.org/2000/svg"}),s&&Lt.createElement("title",null,s),t.children)};return Tv!==void 0?Lt.createElement(Tv.Consumer,null,r=>e(r)):e(OS)}function U0(t){return Ms({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function $0(t){return Ms({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13 19v-4h3l-4-5-4 5h3v4z"},child:[]},{tag:"path",attr:{d:"M7 19h2v-2H7c-1.654 0-3-1.346-3-3 0-1.404 1.199-2.756 2.673-3.015l.581-.102.192-.558C8.149 8.274 9.895 7 12 7c2.757 0 5 2.243 5 5v1h1c1.103 0 2 .897 2 2s-.897 2-2 2h-3v2h3c2.206 0 4-1.794 4-4a4.01 4.01 0 0 0-3.056-3.888C18.507 7.67 15.56 5 12 5 9.244 5 6.85 6.611 5.757 9.15 3.609 9.792 2 11.82 2 14c0 2.757 2.243 5 5 5z"},child:[]}]})(t)}let W0={data:""},H0=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||W0,V0=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,K0=/\/\*[^]*?\*\/|  +/g,Av=/\n+/g,tr=(t,e)=>{let r="",n="",o="";for(let s in t){let a=t[s];s[0]=="@"?s[1]=="i"?r=s+" "+a+";":n+=s[1]=="f"?tr(a,s):s+"{"+tr(a,s[1]=="k"?"":e)+"}":typeof a=="object"?n+=tr(a,e?e.replace(/([^,])+/g,i=>s.replace(/(^:.*)|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,i):i?i+" "+c:c)):s):a!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=tr.p?tr.p(s,a):s+":"+a+";")}return r+(e&&o?e+"{"+o+"}":o)+n},kt={},bS=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+bS(t[r]);return e}return t},J0=(t,e,r,n,o)=>{let s=bS(t),a=kt[s]||(kt[s]=(c=>{let u=0,l=11;for(;u<c.length;)l=101*l+c.charCodeAt(u++)>>>0;return"go"+l})(s));if(!kt[a]){let c=s!==t?t:(u=>{let l,p,d=[{}];for(;l=V0.exec(u.replace(K0,""));)l[4]?d.shift():l[3]?(p=l[3].replace(Av," ").trim(),d.unshift(d[0][p]=d[0][p]||{})):d[0][l[1]]=l[2].replace(Av," ").trim();return d[0]})(t);kt[a]=tr(o?{["@keyframes "+a]:c}:c,r?"":"."+a)}let i=r&&kt.g?kt.g:null;return r&&(kt.g=kt[a]),((c,u,l,p)=>{p?u.data=u.data.replace(p,c):u.data.indexOf(c)===-1&&(u.data=l?c+u.data:u.data+c)})(kt[a],e,n,i),a},G0=(t,e,r)=>t.reduce((n,o,s)=>{let a=e[s];if(a&&a.call){let i=a(r),c=i&&i.props&&i.props.className||/^go/.test(i)&&i;a=c?"."+c:i&&typeof i=="object"?i.props?"":tr(i,""):i===!1?"":i}return n+o+(a??"")},"");function kc(t){let e=this||{},r=t.call?t(e.p):t;return J0(r.unshift?r.raw?G0(r,[].slice.call(arguments,1),e.p):r.reduce((n,o)=>Object.assign(n,o&&o.call?o(e.p):o),{}):r,H0(e.target),e.g,e.o,e.k)}let DS,Ep,wp;kc.bind({g:1});let Ht=kc.bind({k:1});function Q0(t,e,r,n){tr.p=e,DS=t,Ep=r,wp=n}function Cr(t,e){let r=this||{};return function(){let n=arguments;function o(s,a){let i=Object.assign({},s),c=i.className||o.className;r.p=Object.assign({theme:Ep&&Ep()},i),r.o=/ *go\d+/.test(c),i.className=kc.apply(r,n)+(c?" "+c:""),e&&(i.ref=a);let u=t;return t[0]&&(u=i.as||t,delete i.as),wp&&u[0]&&wp(i),DS(u,i)}return e?e(o):o}}var Y0=t=>typeof t=="function",ic=(t,e)=>Y0(t)?t(e):t,X0=(()=>{let t=0;return()=>(++t).toString()})(),NS=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Z0=20,wa=new Map,e1=1e3,kv=t=>{if(wa.has(t))return;let e=setTimeout(()=>{wa.delete(t),rn({type:4,toastId:t})},e1);wa.set(t,e)},t1=t=>{let e=wa.get(t);e&&clearTimeout(e)},Ip=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,Z0)};case 1:return e.toast.id&&t1(e.toast.id),{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:r}=e;return t.toasts.find(s=>s.id===r.id)?Ip(t,{type:1,toast:r}):Ip(t,{type:0,toast:r});case 3:let{toastId:n}=e;return n?kv(n):t.toasts.forEach(s=>{kv(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===n||n===void 0?{...s,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let o=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+o}))}}},Ia=[],Ta={toasts:[],pausedAt:void 0},rn=t=>{Ta=Ip(Ta,t),Ia.forEach(e=>{e(Ta)})},r1={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},n1=(t={})=>{let[e,r]=T.useState(Ta);T.useEffect(()=>(Ia.push(r),()=>{let o=Ia.indexOf(r);o>-1&&Ia.splice(o,1)}),[e]);let n=e.toasts.map(o=>{var s,a;return{...t,...t[o.type],...o,duration:o.duration||((s=t[o.type])==null?void 0:s.duration)||(t==null?void 0:t.duration)||r1[o.type],style:{...t.style,...(a=t[o.type])==null?void 0:a.style,...o.style}}});return{...e,toasts:n}},i1=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||X0()}),bs=t=>(e,r)=>{let n=i1(e,t,r);return rn({type:2,toast:n}),n.id},Qe=(t,e)=>bs("blank")(t,e);Qe.error=bs("error");Qe.success=bs("success");Qe.loading=bs("loading");Qe.custom=bs("custom");Qe.dismiss=t=>{rn({type:3,toastId:t})};Qe.remove=t=>rn({type:4,toastId:t});Qe.promise=(t,e,r)=>{let n=Qe.loading(e.loading,{...r,...r==null?void 0:r.loading});return t.then(o=>(Qe.success(ic(e.success,o),{id:n,...r,...r==null?void 0:r.success}),o)).catch(o=>{Qe.error(ic(e.error,o),{id:n,...r,...r==null?void 0:r.error})}),t};var o1=(t,e)=>{rn({type:1,toast:{id:t,height:e}})},s1=()=>{rn({type:5,time:Date.now()})},a1=t=>{let{toasts:e,pausedAt:r}=n1(t);T.useEffect(()=>{if(r)return;let s=Date.now(),a=e.map(i=>{if(i.duration===1/0)return;let c=(i.duration||0)+i.pauseDuration-(s-i.createdAt);if(c<0){i.visible&&Qe.dismiss(i.id);return}return setTimeout(()=>Qe.dismiss(i.id),c)});return()=>{a.forEach(i=>i&&clearTimeout(i))}},[e,r]);let n=T.useCallback(()=>{r&&rn({type:6,time:Date.now()})},[r]),o=T.useCallback((s,a)=>{let{reverseOrder:i=!1,gutter:c=8,defaultPosition:u}=a||{},l=e.filter(h=>(h.position||u)===(s.position||u)&&h.height),p=l.findIndex(h=>h.id===s.id),d=l.filter((h,v)=>v<p&&h.visible).length;return l.filter(h=>h.visible).slice(...i?[d+1]:[0,d]).reduce((h,v)=>h+(v.height||0)+c,0)},[e]);return{toasts:e,handlers:{updateHeight:o1,startPause:s1,endPause:n,calculateOffset:o}}},c1=Ht`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,u1=Ht`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,l1=Ht`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,p1=Cr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${c1} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${u1} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${l1} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,d1=Ht`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,h1=Cr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${d1} 1s linear infinite;
`,v1=Ht`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,f1=Ht`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,g1=Cr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${v1} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${f1} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,m1=Cr("div")`
  position: absolute;
`,y1=Cr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,S1=Ht`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,C1=Cr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${S1} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,P1=({toast:t})=>{let{icon:e,type:r,iconTheme:n}=t;return e!==void 0?typeof e=="string"?T.createElement(C1,null,e):e:r==="blank"?null:T.createElement(y1,null,T.createElement(h1,{...n}),r!=="loading"&&T.createElement(m1,null,r==="error"?T.createElement(p1,{...n}):T.createElement(g1,{...n})))},R1=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,E1=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,w1="0%{opacity:0;} 100%{opacity:1;}",I1="0%{opacity:1;} 100%{opacity:0;}",T1=Cr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,_1=Cr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,A1=(t,e)=>{let r=t.includes("top")?1:-1,[n,o]=NS()?[w1,I1]:[R1(r),E1(r)];return{animation:e?`${Ht(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ht(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},k1=T.memo(({toast:t,position:e,style:r,children:n})=>{let o=t.height?A1(t.position||e||"top-center",t.visible):{opacity:0},s=T.createElement(P1,{toast:t}),a=T.createElement(_1,{...t.ariaProps},ic(t.message,t));return T.createElement(T1,{className:t.className,style:{...o,...r,...t.style}},typeof n=="function"?n({icon:s,message:a}):T.createElement(T.Fragment,null,s,a))});Q0(T.createElement);var O1=({id:t,className:e,style:r,onHeightUpdate:n,children:o})=>{let s=T.useCallback(a=>{if(a){let i=()=>{let c=a.getBoundingClientRect().height;n(t,c)};i(),new MutationObserver(i).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return T.createElement("div",{ref:s,className:e,style:r},o)},M1=(t,e)=>{let r=t.includes("top"),n=r?{top:0}:{bottom:0},o=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:NS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...n,...o}},b1=kc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ca=16,D1=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:n,children:o,containerStyle:s,containerClassName:a})=>{let{toasts:i,handlers:c}=a1(r);return T.createElement("div",{style:{position:"fixed",zIndex:9999,top:ca,left:ca,right:ca,bottom:ca,pointerEvents:"none",...s},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},i.map(u=>{let l=u.position||e,p=c.calculateOffset(u,{reverseOrder:t,gutter:n,defaultPosition:e}),d=M1(l,p);return T.createElement(O1,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?b1:"",style:d},u.type==="custom"?ic(u.message,u):o?o(u):T.createElement(k1,{toast:u,position:l}))}))},oi=Qe,zS={exports:{}},N1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",z1=N1,j1=z1;function jS(){}function xS(){}xS.resetWarningCache=jS;var x1=function(){function t(n,o,s,a,i,c){if(c!==j1){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:xS,resetWarningCache:jS};return r.PropTypes=r,r};zS.exports=x1();var L1=zS.exports;const V=rm(L1),Tp=({currentFile:t,addCurrentFile:e,resetChat:r})=>{const[n,o]=T.useState(!1),s=async c=>{if(c.target.files[0]){o(!0);try{const u=new FormData;u.append("file",c.target.files[0]);const l=`${Ea}/api/upload`,d=await(await fetch(l,{method:"POST",body:u})).json();oi.success("File upload successful"),console.log(d),i()}catch(u){console.log(u),oi.error("File upload error")}finally{o(!1)}}else alert("Please select a file first.")},a=async()=>{try{o(!0);const c=`${Ea}/api/deleteBlob`,l=await(await fetch(c,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name})})).json();oi.success("File remove successful"),console.log(l),r(),i()}catch(c){console.log(c),oi.error("File remove error")}finally{o(!1)}},i=async()=>{try{const u=await(await fetch(`${Ea}/api/getAllBlob`)).json();Object.keys(u).length!==0?e(u):e()}catch(c){console.log(c),oi.error("File reading error")}};return T.useEffect(()=>{i()},[]),A.jsx("div",{className:"max-w-72",children:t?A.jsxs("div",{className:"flex justify-center items-center gap-2 pl-2",children:[A.jsx("p",{children:t.name}),A.jsx("button",{className:"relative cursor-pointer bg-red-500 text-white w-8 h-8 flex justify-center items-center rounded hover:bg-red-600",onClick:a,children:A.jsx(U0,{})})]}):n?A.jsx("div",{className:"cursor-pointer bg-gray-400 text-white w-28 h-8 flex justify-center items-center rounded",title:"Loading",children:"Loading..."}):A.jsxs("div",{className:"relative cursor-pointer bg-blue-500 text-white w-28 h-8 flex justify-center items-center rounded hover:bg-blue-600 gap-2",title:"Chose file",children:[A.jsx($0,{})," Upload",A.jsx("input",{type:"file",accept:".pdf",onChange:s,className:"absolute z-50 h-[100%] w-[100%] top-0 right-0 cursor-pointer opacity-0"})]})})};Tp.propTypes={addCurrentFile:V.func,resetChat:V.func,currentFile:V.object};const LS=({currentFile:t,addCurrentFile:e,resetChat:r})=>A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"hidden lg:block",children:A.jsxs("header",{className:"flex justify-between items-center bg-white p-3 border-b",children:[A.jsx("div",{className:"flex gap-10 mb-2 ",children:A.jsx("img",{src:wv,alt:"logo",className:"h-8 "})}),A.jsx("p",{className:"text-3xl font-bold text-[#767676] text-center",children:"Generative AI Chatbot"}),A.jsx(Tp,{resetChat:r,addCurrentFile:e,currentFile:t})]})}),A.jsxs("header",{className:"flex flex-col justify-between items-center bg-white p-3 border-b relative lg:hidden",children:[A.jsxs("div",{className:"flex justify-between w-full",children:[A.jsx("div",{className:"flex gap-10 mb-2 ",children:A.jsx("img",{src:wv,alt:"logo",className:"h-8 "})}),A.jsx(Tp,{resetChat:r,addCurrentFile:e,currentFile:t})]}),A.jsx("p",{className:"text-3xl font-bold text-[#767676] text-center",children:"Generative AI Chatbot"})]})]});LS.propTypes={addCurrentFile:V.func,resetChat:V.func,currentFile:V.object};const B1="/assets/bot-LOkVBiz6.png",_p=({chat:t,loading:e,showIcon:r,handleClick:n})=>{var o,s;return A.jsxs("div",{children:[t!=null&&t.userMessage?A.jsx("div",{className:"user message_section flex justify-end gap-2",children:A.jsx("div",{className:"user_message_container py-2.5 rounded-3xl flex px-4 bg-[#e7e7e700] rounded-br",children:A.jsx("p",{children:t==null?void 0:t.userMessage})})}):null,t!=null&&t.botMessage||e?A.jsxs("div",{className:"message_section flex gap-2",children:[r?A.jsx("div",{className:"h-[35px] w-[35px]"}):A.jsx("img",{src:B1,alt:"bot icon",className:"h-[35px] w-[35px] rounded-full mt-[3px] bg-[#288FFF] p-[2px]"}),A.jsx("div",{className:`bot_message_container py-2.5 rounded-3xl flex px-4 bg-[#bf65ffd6] rounded-tl overflow-hidden ${(t==null?void 0:t.id)==="1"?"rounded-bl":""}`,children:e?A.jsxs("div",{className:"w-8 flex justify-evenly",children:[A.jsx("li",{className:"ball"}),A.jsx("li",{className:"ball"}),A.jsx("li",{className:"ball"})]}):A.jsxs("div",{className:"text-white whitespace-pre-line",children:[A.jsx("p",{children:t==null?void 0:t.botMessage}),(o=t==null?void 0:t.urlsArray)!=null&&o.length?A.jsx("div",{className:"mt-2"}):null,(s=t==null?void 0:t.urlsArray)==null?void 0:s.map(a=>{const i=a.split("#page=").at(),c=a.split("#page=").at(-1);return A.jsx("div",{className:"flex gap-2",children:A.jsxs("p",{children:["Source: Page no:"," ",A.jsx("span",{className:"underline text-blue-700 cursor-pointer hover:text-blue-500",onClick:()=>n(i,c),children:c}),","]})},a)})]})})]}):null]})};_p.propTypes={chat:V.shape({id:V.string,userMessage:V.string,botMessage:V.string,urlsArray:V.arrayOf(V.string)}),loading:V.bool,showIcon:V.bool,handleClick:V.func};const BS=({chats:t,loading:e,handleClick:r})=>{const n=T.useRef(null);return T.useEffect(()=>{var o;(o=n.current)==null||o.scrollIntoView({behavior:"smooth"})},[e]),A.jsxs("div",{className:"h-28 flex-1 min-h-[50px] overflow-y-scroll bg-fixed bg-center bg-no-repeat scroll-smooth",children:[A.jsxs("div",{className:"px-4 py-3 flex flex-col gap-2",children:[t.map((o,s)=>{var a;return A.jsx(_p,{chat:o,showIcon:!!(o!=null&&o.botMessage&&((a=t[s-1])!=null&&a.botMessage)),handleClick:r},o.id)}),e?A.jsx(_p,{loading:e}):null]}),A.jsx("div",{ref:n})]})};BS.propTypes={chats:V.arrayOf(V.shape({id:V.string,userMessage:V.string,botMessage:V.string})),loading:V.bool,handleClick:V.func};const FS=({pdfDetails:t,hidePdf:e})=>{const[r,n]=T.useState(60),[o,s]=T.useState(`${t.url}#toolbar=0&navpanes=0&page=${t.pageNo}&zoom=${r}`),a=i=>{n(c=>c+i),s(""),setTimeout(()=>{s(`${t.url}#toolbar=0&navpanes=0&page=${t.pageNo}&zoom=${r+i}`)},10)};return A.jsxs("div",{className:"h-[100%] w-[100%] overflow-hidden hidden md:block relative",children:[A.jsx("button",{className:"absolute top-0 right-0 bg-[#0000008e] text-white px-3 hover:bg-[#000000b1] rounded z-10",onClick:e,children:"X"}),A.jsxs("div",{className:"absolute bottom-5 left-0 z-10 rounded overflow-hidden",children:[A.jsx("button",{className:"bg-[#0000008e] text-white px-3 hover:bg-[#000000b1]",onClick:()=>a(10),children:"+"}),A.jsx("button",{className:"bg-[#0000008e] text-white px-3 hover:bg-[#000000b1]",onClick:()=>a(-10),children:"-"})]}),A.jsx("object",{title:"pdf",data:o,type:"application/pdf",width:"100%",height:"100%",children:A.jsxs("p",{children:["link ",A.jsx("a",{href:o,children:"to the PDF!"})]})})]})};FS.propTypes={pdfDetails:V.shape({url:V.string,pageNo:V.string}),hidePdf:V.func};function F1(t){return Ms({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(t)}function q1(t){return Ms({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M192 0C139 0 96 43 96 96V256c0 53 43 96 96 96s96-43 96-96V96c0-53-43-96-96-96zM64 216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 89.1 66.2 162.7 152 174.4V464H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h72 72c13.3 0 24-10.7 24-24s-10.7-24-24-24H216V430.4c85.8-11.7 152-85.3 152-174.4V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 70.7-57.3 128-128 128s-128-57.3-128-128V216z"},child:[]}]})(t)}function U1(t){return Ms({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"},child:[]},{tag:"path",attr:{d:"M11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"},child:[]}]})(t)}var qr={},ll={},Oc={},pl={},re={},$n={},ut={};const $1=nm(b0);Object.defineProperty(ut,"__esModule",{value:!0});ut.createNoDashGuid=ut.createGuid=void 0;const W1=$1,qS=()=>W1.v4();ut.createGuid=qS;const H1=()=>qS().replace(new RegExp("-","g"),"").toUpperCase();ut.createNoDashGuid=H1;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformEvent=t.EventType=void 0;const e=ut;(function(n){n[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.None=4]="None"})(t.EventType||(t.EventType={}));class r{constructor(o,s){this.privName=o,this.privEventId=e.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=s,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}t.PlatformEvent=r})($n);Object.defineProperty(re,"__esModule",{value:!0});re.AudioStreamNodeErrorEvent=re.AudioStreamNodeDetachedEvent=re.AudioStreamNodeAttachedEvent=re.AudioStreamNodeAttachingEvent=re.AudioStreamNodeEvent=re.AudioSourceErrorEvent=re.AudioSourceOffEvent=re.AudioSourceReadyEvent=re.AudioSourceInitializingEvent=re.AudioSourceEvent=void 0;const Ap=$n;class Wn extends Ap.PlatformEvent{constructor(e,r,n=Ap.EventType.Info){super(e,n),this.privAudioSourceId=r}get audioSourceId(){return this.privAudioSourceId}}re.AudioSourceEvent=Wn;class V1 extends Wn{constructor(e){super("AudioSourceInitializingEvent",e)}}re.AudioSourceInitializingEvent=V1;class K1 extends Wn{constructor(e){super("AudioSourceReadyEvent",e)}}re.AudioSourceReadyEvent=K1;class J1 extends Wn{constructor(e){super("AudioSourceOffEvent",e)}}re.AudioSourceOffEvent=J1;class G1 extends Wn{constructor(e,r){super("AudioSourceErrorEvent",e,Ap.EventType.Error),this.privError=r}get error(){return this.privError}}re.AudioSourceErrorEvent=G1;class Ds extends Wn{constructor(e,r,n){super(e,r),this.privAudioNodeId=n}get audioNodeId(){return this.privAudioNodeId}}re.AudioStreamNodeEvent=Ds;class Q1 extends Ds{constructor(e,r){super("AudioStreamNodeAttachingEvent",e,r)}}re.AudioStreamNodeAttachingEvent=Q1;class Y1 extends Ds{constructor(e,r){super("AudioStreamNodeAttachedEvent",e,r)}}re.AudioStreamNodeAttachedEvent=Y1;class X1 extends Ds{constructor(e,r){super("AudioStreamNodeDetachedEvent",e,r)}}re.AudioStreamNodeDetachedEvent=X1;class Z1 extends Ds{constructor(e,r,n){super("AudioStreamNodeErrorEvent",e,r),this.privError=n}get error(){return this.privError}}re.AudioStreamNodeErrorEvent=Z1;var ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.ConnectionMessageSentEvent=ae.ConnectionMessageReceivedEvent=ae.ConnectionEstablishErrorEvent=ae.ConnectionErrorEvent=ae.ConnectionClosedEvent=ae.ConnectionEstablishedEvent=ae.ConnectionStartEvent=ae.ConnectionEvent=ae.ServiceEvent=void 0;const Xr=$n;class eI extends Xr.PlatformEvent{constructor(e,r,n=Xr.EventType.Info){super(e,n),this.privJsonResult=r}get jsonString(){return this.privJsonResult}}ae.ServiceEvent=eI;class Pr extends Xr.PlatformEvent{constructor(e,r,n=Xr.EventType.Info){super(e,n),this.privConnectionId=r}get connectionId(){return this.privConnectionId}}ae.ConnectionEvent=Pr;class tI extends Pr{constructor(e,r,n){super("ConnectionStartEvent",e),this.privUri=r,this.privHeaders=n}get uri(){return this.privUri}get headers(){return this.privHeaders}}ae.ConnectionStartEvent=tI;class rI extends Pr{constructor(e){super("ConnectionEstablishedEvent",e)}}ae.ConnectionEstablishedEvent=rI;class nI extends Pr{constructor(e,r,n){super("ConnectionClosedEvent",e,Xr.EventType.Debug),this.privReason=n,this.privStatusCode=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ae.ConnectionClosedEvent=nI;class iI extends Pr{constructor(e,r,n){super("ConnectionErrorEvent",e,Xr.EventType.Debug),this.privMessage=r,this.privType=n}get message(){return this.privMessage}get type(){return this.privType}}ae.ConnectionErrorEvent=iI;class oI extends Pr{constructor(e,r,n){super("ConnectionEstablishErrorEvent",e,Xr.EventType.Error),this.privStatusCode=r,this.privReason=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ae.ConnectionEstablishErrorEvent=oI;class sI extends Pr{constructor(e,r,n){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=r,this.privMessage=n}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}ae.ConnectionMessageReceivedEvent=sI;class aI extends Pr{constructor(e,r,n){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=r,this.privMessage=n}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}ae.ConnectionMessageSentEvent=aI;var kd={},Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.ObjectDisposedError=Ce.InvalidOperationError=Ce.ArgumentNullError=void 0;class cI extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}Ce.ArgumentNullError=cI;class uI extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}Ce.InvalidOperationError=uI;class lI extends Error{constructor(e,r){super(r),this.name=e+"ObjectDisposed",this.message=r}}Ce.ObjectDisposedError=lI;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessage=t.MessageType=void 0;const e=Ce,r=ut;var n;(function(s){s[s.Text=0]="Text",s[s.Binary=1]="Binary"})(n=t.MessageType||(t.MessageType={}));class o{constructor(a,i,c,u){if(this.privBody=null,a===n.Text&&i&&typeof i!="string")throw new e.InvalidOperationError("Payload must be a string");if(a===n.Binary&&i&&!(i instanceof ArrayBuffer))throw new e.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=a,this.privBody=i,this.privHeaders=c||{},this.privId=u||r.createNoDashGuid(),this.messageType){case n.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case n.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===n.Binary)throw new e.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===n.Text)throw new e.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}t.ConnectionMessage=o})(kd);var Mc={};Object.defineProperty(Mc,"__esModule",{value:!0});Mc.ConnectionOpenResponse=void 0;class pI{constructor(e,r){this.privStatusCode=e,this.privReason=r}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}Mc.ConnectionOpenResponse=pI;var bc={};Object.defineProperty(bc,"__esModule",{value:!0});bc.DeferralMap=void 0;class dI{constructor(){this.privMap={}}add(e,r){this.privMap[e]=r}getId(e){return this.privMap[e]}complete(e,r){try{this.privMap[e].resolve(r)}catch(n){this.privMap[e].reject(n)}finally{this.privMap[e]=void 0}}}bc.DeferralMap=dI;var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.SendingAgentContextMessageEvent=Zr.DialogEvent=void 0;const Ov=$n;class US extends Ov.PlatformEvent{constructor(e,r=Ov.EventType.Info){super(e,r)}}Zr.DialogEvent=US;class hI extends US{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}}Zr.SendingAgentContextMessageEvent=hI;var Dc={},Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.EventSource=void 0;const vI=Ce,fI=ut;class gI{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new vI.ObjectDisposedError("EventSource");if(this.metadata)for(const r in this.metadata)r&&e.metadata&&(e.metadata[r]||(e.metadata[r]=this.metadata[r]));for(const r in this.privEventListeners)r&&this.privEventListeners[r]&&this.privEventListeners[r](e)}attach(e){const r=fI.createNoDashGuid();return this.privEventListeners[r]=e,{detach:()=>(delete this.privEventListeners[r],Promise.resolve())}}attachListener(e){return this.attach(r=>e.onEvent(r))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(r=>e.onEvent(r)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}Ns.EventSource=gI;Object.defineProperty(Dc,"__esModule",{value:!0});Dc.Events=void 0;const mI=Ce,yI=Ns;class Es{static setEventSource(e){if(!e)throw new mI.ArgumentNullError("eventSource");Es.privInstance=e}static get instance(){return Es.privInstance}}Dc.Events=Es;Es.privInstance=new yI.EventSource;var $S={};Object.defineProperty($S,"__esModule",{value:!0});var WS={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionState=void 0,function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(t.ConnectionState||(t.ConnectionState={}))})(WS);var HS={};Object.defineProperty(HS,"__esModule",{value:!0});var VS={};Object.defineProperty(VS,"__esModule",{value:!0});var KS={};Object.defineProperty(KS,"__esModule",{value:!0});var JS={};Object.defineProperty(JS,"__esModule",{value:!0});var GS={};Object.defineProperty(GS,"__esModule",{value:!0});var QS={};Object.defineProperty(QS,"__esModule",{value:!0});var YS={};Object.defineProperty(YS,"__esModule",{value:!0});var XS={};Object.defineProperty(XS,"__esModule",{value:!0});var zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.List=void 0;const SI=Ce;class Yt{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(const r of e)this.privList.push(r)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,r){this.throwIfDisposed(),e===0?this.privList.unshift(r):e===this.privList.length?this.privList.push(r):this.privList.splice(e,0,r),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,r){this.throwIfDisposed();const n=this.privList.splice(e,r);return this.triggerSubscriptions(this.privRemoveSubscriptions),n}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[r]=e,{detach:()=>(delete this.privAddSubscriptions[r],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[r]=e,{detach:()=>(delete this.privRemoveSubscriptions[r],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[r]=e,{detach:()=>(delete this.privDisposedSubscriptions[r],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){const e=Array();return this.privList.forEach(r=>{e.push(r)}),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let r=0;r<this.length();r++)e(this.privList[r],r)}select(e){this.throwIfDisposed();const r=[];for(let n=0;n<this.privList.length;n++)r.push(e(this.privList[n],n));return new Yt(r)}where(e){this.throwIfDisposed();const r=new Yt;for(let n=0;n<this.privList.length;n++)e(this.privList[n],n)&&r.add(this.privList[n]);return r}orderBy(e){this.throwIfDisposed();const n=this.toArray().sort(e);return new Yt(n)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((r,n)=>e(n,r))}clone(){return this.throwIfDisposed(),new Yt(this.toArray())}concat(e){return this.throwIfDisposed(),new Yt(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new Yt(this.privList.concat(e))}isDisposed(){return this.privList==null}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new SI.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(const r in e)r&&e[r]()}}zs.List=Yt;var Od={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.marshalPromiseToCallbacks=t.Sink=t.Deferred=t.PromiseResultEventSource=t.PromiseResult=t.PromiseState=void 0;var e;(function(i){i[i.None=0]="None",i[i.Resolved=1]="Resolved",i[i.Rejected=2]="Rejected"})(e=t.PromiseState||(t.PromiseState={}));class r{constructor(c){this.throwIfError=()=>{if(this.isError)throw this.error},c.on(u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=u)},u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=u)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}t.PromiseResult=r;class n{constructor(){this.setResult=c=>{this.privOnSetResult(c)},this.setError=c=>{this.privOnSetError(c)},this.on=(c,u)=>{this.privOnSetResult=c,this.privOnSetError=u}}}t.PromiseResultEventSource=n;class o{constructor(){this.resolve=c=>(this.privResolve(c),this),this.reject=c=>(this.privReject(c),this),this.privPromise=new Promise((c,u)=>{this.privResolve=c,this.privReject=u})}get promise(){return this.privPromise}}t.Deferred=o;class s{constructor(){this.privState=e.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new n,this.privPromiseResult=new r(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(c){if(this.privState!==e.None)throw new Error("'Cannot resolve a completed promise'");this.privState=e.Resolved,this.privPromiseResultEvents.setResult(c);for(let u=0;u<this.privSuccessHandlers.length;u++)this.executeSuccessCallback(c,this.privSuccessHandlers[u],this.privErrorHandlers[u]);this.detachHandlers()}reject(c){if(this.privState!==e.None)throw new Error("'Cannot reject a completed promise'");this.privState=e.Rejected,this.privPromiseResultEvents.setError(c);for(const u of this.privErrorHandlers)this.executeErrorCallback(c,u);this.detachHandlers()}on(c,u){c==null&&(c=()=>{}),this.privState===e.None?(this.privSuccessHandlers.push(c),this.privErrorHandlers.push(u)):(this.privState===e.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,c,u):this.privState===e.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,u),this.detachHandlers())}executeSuccessCallback(c,u,l){try{u(c)}catch(p){this.executeErrorCallback(`'Unhandled callback error: ${p}'`,l)}}executeErrorCallback(c,u){if(u)try{u(c)}catch(l){throw new Error(`'Unhandled callback error: ${l}. InnerError: ${c}'`)}else throw new Error(`'Unhandled error: ${c}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}t.Sink=s;function a(i,c,u){i.then(l=>{try{c&&c(l)}catch(p){if(u)try{if(p instanceof Error){const d=p;u(d.name+": "+d.message)}else u(p)}catch{}}},l=>{if(u)try{if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}catch{}})}t.marshalPromiseToCallbacks=a})(Od);var js={};Object.defineProperty(js,"__esModule",{value:!0});js.Queue=void 0;const dl=Ce,hl=zs,Mv=Od;var os;(function(t){t[t.Dequeue=0]="Dequeue",t[t.Peek=1]="Peek"})(os||(os={}));class CI{constructor(e){this.privPromiseStore=new hl.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new hl.List,this.privDetachables=[],this.privSubscribers=new hl.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(r=>r(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(r=>{this.privList.add(r)},()=>{})}dequeue(){this.throwIfDispose();const e=new Mv.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:os.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();const e=new Mv.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:os.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(e,r){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=r,this.privIsDisposing=!0;const n=this.privSubscribers;if(n){for(;n.length()>0;)n.removeFirst().deferral.resolve(void 0);this.privSubscribers===n&&(this.privSubscribers=n)}for(const o of this.privDetachables)await o.detach();if(this.privPromiseStore.length()>0&&e){const o=[];return this.privPromiseStore.toArray().forEach(s=>{o.push(s)}),Promise.all(o).finally(()=>{this.privSubscribers=null,this.privList.forEach(s=>{e(s)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(e){await this.drainAndDispose(null,e)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,r=this.privList;if(e&&r){for(;r.length()>0&&e.length()>0&&!this.privIsDisposing;){const n=e.removeFirst();if(n.type===os.Peek)n.deferral.resolve(r.first());else{const o=r.removeFirst();n.deferral.resolve(o)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===r&&(this.privList=r)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new dl.InvalidOperationError(this.privDisposeReason):new dl.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new dl.InvalidOperationError("Queue disposing")}}js.Queue=CI;var Nc={};Object.defineProperty(Nc,"__esModule",{value:!0});Nc.RawWebsocketMessage=void 0;const ua=kd,si=Ce,PI=ut;class RI{constructor(e,r,n){if(this.privPayload=null,!r)throw new si.ArgumentNullError("payload");if(e===ua.MessageType.Binary&&Object.getPrototypeOf(r).constructor.name!=="ArrayBuffer")throw new si.InvalidOperationError("Payload must be ArrayBuffer");if(e===ua.MessageType.Text&&typeof r!="string")throw new si.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=r,this.privId=n||PI.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===ua.MessageType.Binary)throw new si.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===ua.MessageType.Text)throw new si.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}Nc.RawWebsocketMessage=RI;var zc={};Object.defineProperty(zc,"__esModule",{value:!0});zc.RiffPcmEncoder=void 0;class EI{constructor(e,r){this.privActualSampleRate=e,this.privDesiredSampleRate=r}encode(e){const r=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!r)return null;const n=r.length*2,o=new ArrayBuffer(n),s=new DataView(o);return this.floatTo16BitPCM(s,0,r),o}setString(e,r,n){for(let o=0;o<n.length;o++)e.setUint8(r+o,n.charCodeAt(o))}floatTo16BitPCM(e,r,n){for(let o=0;o<n.length;o++,r+=2){const s=Math.max(-1,Math.min(1,n[o]));e.setInt16(r,s<0?s*32768:s*32767,!0)}}downSampleAudioFrame(e,r,n){if(!e)return null;if(n===r||n>r)return e;const o=r/n,s=Math.round(e.length/o),a=new Float32Array(s);let i=0,c=0;for(;c<s;){const u=Math.round((c+1)*o);let l=0,p=0;for(;i<u&&i<e.length;)l+=e[i++],p++;a[c++]=l/p}return a}}zc.RiffPcmEncoder=EI;var jc={};Object.defineProperty(jc,"__esModule",{value:!0});jc.Stream=void 0;const bv=Ce,wI=ut,Dv=js;class II{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||wI.createNoDashGuid(),this.privReaderQueue=new Dv.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch{}}read(){if(this.privIsReadEnded)throw new bv.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async e=>((e===void 0||e.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),e))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new Dv.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new bv.InvalidOperationError("Stream closed")}}jc.Stream=II;var xc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationStatus=void 0,function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(t.TranslationStatus||(t.TranslationStatus={}))})(xc);var ai={},Nv;function TI(){if(Nv)return ai;Nv=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.ChunkedArrayBufferStream=void 0;const t=b();let e=class extends t.Stream{constructor(n,o){super(o),this.privTargetChunkSize=n,this.privNextBufferReadyBytes=0}writeStreamChunk(n){if(n.isEnd||this.privNextBufferReadyBytes===0&&n.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(n);return}let o=0;for(;o<n.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=n.timeReceived);const s=Math.min(n.buffer.byteLength-o,this.privTargetChunkSize-this.privNextBufferReadyBytes),a=new Uint8Array(this.privNextBufferToWrite),i=new Uint8Array(n.buffer.slice(o,s+o));a.set(i,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=s,o+=s,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return ai.ChunkedArrayBufferStream=e,ai}var ZS={};Object.defineProperty(ZS,"__esModule",{value:!0});var Lc={};Object.defineProperty(Lc,"__esModule",{value:!0});Lc.Timeout=void 0;class Me{static load(){const e=new Map([[0,()=>{}]]),r=new Map,o="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),s=new Worker(o);return s.addEventListener("message",({data:c})=>{if(Me.isCallNotification(c)){const{params:{timerId:u}}=c,l=e.get(u);if(typeof l=="number"){const p=r.get(l);if(p===void 0||p!==u)throw new Error("The timer is in an undefined state.")}else if(typeof l<"u")l(),e.delete(u);else throw new Error("The timer is in an undefined state.")}else if(Me.isClearResponse(c)){const{id:u}=c,l=r.get(u);if(l===void 0)throw new Error("The timer is in an undefined state.");r.delete(u),e.delete(l)}else{const{error:{message:u}}=c;throw new Error(u)}}),{clearTimeout:c=>{const u=Math.random();r.set(u,c),e.set(c,u),s.postMessage({id:u,method:"clear",params:{timerId:c}})},setTimeout:(c,u)=>{const l=Math.random();return e.set(l,c),s.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:l}}),l}}}static loadWorkerTimers(){return()=>(Me.workerTimers!==null||(Me.workerTimers=Me.load()),Me.workerTimers)}static isCallNotification(e){return e.method!==void 0&&e.method==="call"}static isClearResponse(e){return e.error===null&&typeof e.id=="number"}}Lc.Timeout=Me;Me.workerTimers=null;Me.clearTimeout=t=>Me.timers().clearTimeout(t);Me.setTimeout=(t,e)=>Me.timers().setTimeout(t,e);Me.timers=Me.loadWorkerTimers();var U={};Object.defineProperty(U,"__esModule",{value:!0});U.OCSPCacheUpdateErrorEvent=U.OCSPResponseRetrievedEvent=U.OCSPCacheFetchErrorEvent=U.OCSPVerificationFailedEvent=U.OCSPCacheHitEvent=U.OCSPCacheEntryNeedsRefreshEvent=U.OCSPCacheEntryExpiredEvent=U.OCSPWSUpgradeStartedEvent=U.OCSPStapleReceivedEvent=U.OCSPCacheUpdateCompleteEvent=U.OCSPDiskCacheStoreEvent=U.OCSPMemoryCacheStoreEvent=U.OCSPCacheUpdateNeededEvent=U.OCSPDiskCacheHitEvent=U.OCSPCacheMissEvent=U.OCSPMemoryCacheHitEvent=U.OCSPEvent=void 0;const Re=$n;class Ee extends Re.PlatformEvent{constructor(e,r,n){super(e,r),this.privSignature=n}}U.OCSPEvent=Ee;class _I extends Ee{constructor(e){super("OCSPMemoryCacheHitEvent",Re.EventType.Debug,e)}}U.OCSPMemoryCacheHitEvent=_I;class AI extends Ee{constructor(e){super("OCSPCacheMissEvent",Re.EventType.Debug,e)}}U.OCSPCacheMissEvent=AI;class kI extends Ee{constructor(e){super("OCSPDiskCacheHitEvent",Re.EventType.Debug,e)}}U.OCSPDiskCacheHitEvent=kI;class OI extends Ee{constructor(e){super("OCSPCacheUpdateNeededEvent",Re.EventType.Debug,e)}}U.OCSPCacheUpdateNeededEvent=OI;class MI extends Ee{constructor(e){super("OCSPMemoryCacheStoreEvent",Re.EventType.Debug,e)}}U.OCSPMemoryCacheStoreEvent=MI;class bI extends Ee{constructor(e){super("OCSPDiskCacheStoreEvent",Re.EventType.Debug,e)}}U.OCSPDiskCacheStoreEvent=bI;class DI extends Ee{constructor(e){super("OCSPCacheUpdateCompleteEvent",Re.EventType.Debug,e)}}U.OCSPCacheUpdateCompleteEvent=DI;class NI extends Ee{constructor(){super("OCSPStapleReceivedEvent",Re.EventType.Debug,"")}}U.OCSPStapleReceivedEvent=NI;class zI extends Ee{constructor(e){super("OCSPWSUpgradeStartedEvent",Re.EventType.Debug,e)}}U.OCSPWSUpgradeStartedEvent=zI;class jI extends Ee{constructor(e,r){super("OCSPCacheEntryExpiredEvent",Re.EventType.Debug,e),this.privExpireTime=r}}U.OCSPCacheEntryExpiredEvent=jI;class xI extends Ee{constructor(e,r,n){super("OCSPCacheEntryNeedsRefreshEvent",Re.EventType.Debug,e),this.privExpireTime=n,this.privStartTime=r}}U.OCSPCacheEntryNeedsRefreshEvent=xI;class LI extends Ee{constructor(e,r,n){super("OCSPCacheHitEvent",Re.EventType.Debug,e),this.privExpireTime=n,this.privExpireTimeString=new Date(n).toLocaleDateString(),this.privStartTime=r,this.privStartTimeString=new Date(r).toLocaleTimeString()}}U.OCSPCacheHitEvent=LI;class BI extends Ee{constructor(e,r){super("OCSPVerificationFailedEvent",Re.EventType.Debug,e),this.privError=r}}U.OCSPVerificationFailedEvent=BI;class FI extends Ee{constructor(e,r){super("OCSPCacheFetchErrorEvent",Re.EventType.Debug,e),this.privError=r}}U.OCSPCacheFetchErrorEvent=FI;class qI extends Ee{constructor(e){super("OCSPResponseRetrievedEvent",Re.EventType.Debug,e)}}U.OCSPResponseRetrievedEvent=qI;class UI extends Ee{constructor(e,r){super("OCSPCacheUpdateErrorEvent",Re.EventType.Debug,e),this.privError=r}}U.OCSPCacheUpdateErrorEvent=UI;var ci={},zv;function $I(){if(zv)return ci;zv=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.BackgroundEvent=void 0;const t=b();class e extends t.PlatformEvent{constructor(n){super("BackgroundEvent",t.EventType.Error),this.privError=n}get error(){return this.privError}}return ci.BackgroundEvent=e,ci}var jv;function b(){return jv||(jv=1,function(t){var e=F&&F.__createBinding||(Object.create?function(o,s,a,i){i===void 0&&(i=a),Object.defineProperty(o,i,{enumerable:!0,get:function(){return s[a]}})}:function(o,s,a,i){i===void 0&&(i=a),o[i]=s[a]}),r=F&&F.__exportStar||function(o,s){for(var a in o)a!=="default"&&!s.hasOwnProperty(a)&&e(s,o,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(re,t),r(ae,t),r(kd,t),r(Mc,t),r(bc,t),r(Zr,t),r(Ce,t),r(Dc,t),r(Ns,t),r(ut,t),r($S,t),r(WS,t),r(HS,t),r(VS,t),r(KS,t),r(JS,t),r(GS,t),r(QS,t),r(YS,t),r(XS,t),r(zs,t),r($n,t),r(Od,t),r(js,t),r(Nc,t),r(zc,t),r(jc,t);var n=xc;Object.defineProperty(t,"TranslationStatus",{enumerable:!0,get:function(){return n.TranslationStatus}}),r(TI(),t),r(ZS,t),r(Lc,t),r(U,t),r($I(),t)}(pl)),pl}var ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.HeaderNames=void 0;class mt{}ve.HeaderNames=mt;mt.AuthKey="Ocp-Apim-Subscription-Key";mt.Authorization="Authorization";mt.SpIDAuthKey="Apim-Subscription-Id";mt.ConnectionId="X-ConnectionId";mt.ContentType="Content-Type";mt.CustomCommandsAppId="X-CommandsAppId";mt.Path="Path";mt.RequestId="X-RequestId";mt.RequestStreamId="X-StreamId";mt.RequestTimestamp="X-Timestamp";var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.AuthInfo=void 0;class WI{constructor(e,r){this.privHeaderName=e,this.privToken=r}get headerName(){return this.privHeaderName}get token(){return this.privToken}}Hn.AuthInfo=WI;Object.defineProperty(Oc,"__esModule",{value:!0});Oc.CognitiveSubscriptionKeyAuthentication=void 0;const HI=b(),VI=ve,KI=Hn;class JI{constructor(e){if(!e)throw new HI.ArgumentNullError("subscriptionKey");this.privAuthInfo=new KI.AuthInfo(VI.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}}Oc.CognitiveSubscriptionKeyAuthentication=JI;var Bc={};Object.defineProperty(Bc,"__esModule",{value:!0});Bc.CognitiveTokenAuthentication=void 0;const xv=b(),Lv=Hn,Bv=ve;class ws{constructor(e,r){if(!e)throw new xv.ArgumentNullError("fetchCallback");if(!r)throw new xv.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=r}fetch(e){return this.privFetchCallback(e).then(r=>new Lv.AuthInfo(Bv.HeaderNames.Authorization,r===void 0?void 0:ws.privTokenPrefix+r))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then(r=>new Lv.AuthInfo(Bv.HeaderNames.Authorization,r===void 0?void 0:ws.privTokenPrefix+r))}}Bc.CognitiveTokenAuthentication=ws;ws.privTokenPrefix="Bearer ";var eC={};Object.defineProperty(eC,"__esModule",{value:!0});var tC={};Object.defineProperty(tC,"__esModule",{value:!0});var ui={},vl={},Fc={};const GI={},QI=Object.freeze(Object.defineProperty({__proto__:null,default:GI},Symbol.toStringTag,{value:"Module"})),nn=nm(QI);var Md={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0;const e=b();Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return e.EventType}})})(Md);var D={};Object.defineProperty(D,"__esModule",{value:!0});D.Contracts=void 0;class Xt{static throwIfNullOrUndefined(e,r){if(e==null)throw new Error("throwIfNullOrUndefined:"+r)}static throwIfNull(e,r){if(e===null)throw new Error("throwIfNull:"+r)}static throwIfNullOrWhitespace(e,r){if(Xt.throwIfNullOrUndefined(e,r),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+r)}static throwIfNullOrTooLong(e,r,n){if(Xt.throwIfNullOrUndefined(e,r),(""+e).length>n)throw new Error("throwIfNullOrTooLong:"+r+" (more than "+n.toString()+" characters)")}static throwIfNullOrTooShort(e,r,n){if(Xt.throwIfNullOrUndefined(e,r),(""+e).length<n)throw new Error("throwIfNullOrTooShort:"+r+" (less than "+n.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,r){if(Xt.throwIfNullOrUndefined(e,r),e.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+r);for(const n of e)Xt.throwIfNullOrWhitespace(n,r)}static throwIfFileDoesNotExist(e,r){Xt.throwIfNullOrWhitespace(e,r)}static throwIfNotUndefined(e,r){if(e!==void 0)throw new Error("throwIfNotUndefined:"+r)}}D.Contracts=Xt;var YI=F&&F.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),XI=F&&F.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ZI=F&&F.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&YI(e,t,r);return XI(e,t),e};Object.defineProperty(Fc,"__esModule",{value:!0});Fc.ConsoleLoggingListener=void 0;const Fv=ZI(nn),li=Md,eT=D;class tT{constructor(e=li.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){eT.Contracts.throwIfNullOrUndefined(Fv.openSync,`
File System access not available`),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){const r=this.toString(e);if(this.logCallback&&this.logCallback(r),this.privLogPath&&Fv.writeFileSync(this.privLogPath,r+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case li.LogLevel.Debug:console.debug(r);break;case li.LogLevel.Info:console.info(r);break;case li.LogLevel.Warning:console.warn(r);break;case li.LogLevel.Error:console.error(r);break;default:console.log(r);break}}}toString(e){const r=[`${e.eventTime}`,`${e.name}`],n=e;for(const o in n)if(o&&e.hasOwnProperty(o)&&o!=="eventTime"&&o!=="eventType"&&o!=="eventId"&&o!=="name"&&o!=="constructor"){const s=n[o];let a="<NULL>";s!=null&&(typeof s=="number"||typeof s=="string"?a=s.toString():a=JSON.stringify(s)),r.push(`${o}: ${a}`)}return r.join(" | ")}}Fc.ConsoleLoggingListener=tT;var rC={};Object.defineProperty(rC,"__esModule",{value:!0});var fl={},Rr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamFormatImpl=t.AudioStreamFormat=t.AudioFormatTag=void 0;var e;(function(o){o[o.PCM=1]="PCM",o[o.MuLaw=2]="MuLaw",o[o.Siren=3]="Siren",o[o.MP3=4]="MP3",o[o.SILKSkype=5]="SILKSkype",o[o.OGG_OPUS=6]="OGG_OPUS",o[o.WEBM_OPUS=7]="WEBM_OPUS",o[o.ALaw=8]="ALaw",o[o.FLAC=9]="FLAC",o[o.OPUS=10]="OPUS"})(e=t.AudioFormatTag||(t.AudioFormatTag={}));class r{static getDefaultInputFormat(){return n.getDefaultInputFormat()}static getWaveFormat(s,a,i,c){return new n(s,a,i,c)}static getWaveFormatPCM(s,a,i){return new n(s,a,i)}}t.AudioStreamFormat=r;class n extends r{constructor(s=16e3,a=16,i=1,c=e.PCM){super();let u=!0;switch(c){case e.PCM:this.formatTag=1;break;case e.ALaw:this.formatTag=6;break;case e.MuLaw:this.formatTag=7;break;default:u=!1}if(this.bitsPerSample=a,this.samplesPerSec=s,this.channels=i,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),u){this.privHeader=new ArrayBuffer(44);const l=new DataView(this.privHeader);this.setString(l,0,"RIFF"),l.setUint32(4,0,!0),this.setString(l,8,"WAVEfmt "),l.setUint32(16,16,!0),l.setUint16(20,this.formatTag,!0),l.setUint16(22,this.channels,!0),l.setUint32(24,this.samplesPerSec,!0),l.setUint32(28,this.avgBytesPerSec,!0),l.setUint16(32,this.channels*(this.bitsPerSample/8),!0),l.setUint16(34,this.bitsPerSample,!0),this.setString(l,36,"data"),l.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new n}static getAudioContext(s){const a=window.AudioContext||window.webkitAudioContext||!1;if(a)return s!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new a({sampleRate:s}):new a;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(s,a,i){for(let c=0;c<i.length;c++)s.setUint8(a+c,i.charCodeAt(c))}}t.AudioStreamFormatImpl=n})(Rr);var qv;function rT(){return qv||(qv=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MicAudioSource=t.AudioWorkletSourceURLPropertyName=void 0;const e=M(),r=b(),n=Rr;t.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class o{constructor(a,i,c,u){this.privRecorder=a,this.deviceId=i,this.privStreams={},this.privOutputChunkSize=o.AUDIOFORMAT.avgBytesPerSec/10,this.privId=c||r.createNoDashGuid(),this.privEvents=new r.EventSource,this.privMediaStream=u||null,this.privIsClosing=!1}get format(){return Promise.resolve(o.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new r.Deferred;try{this.createAudioContext()}catch(c){if(c instanceof Error){const u=c;this.privInitializeDeferral.reject(u.name+": "+u.message)}else this.privInitializeDeferral.reject(c);return this.privInitializeDeferral.promise}const a=window.navigator;let i=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(i=(c,u,l)=>{a.mediaDevices.getUserMedia(c).then(u).catch(l)}),i){const c=()=>{this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):i({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},u=>{this.privMediaStream=u,this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},u=>{const l=`Error occurred during microphone initialization: ${u}`;this.privInitializeDeferral.reject(l),this.onEvent(new r.AudioSourceErrorEvent(this.privId,l))})};this.privContext.state==="suspended"?this.privContext.resume().then(c).catch(u=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${u}`)}):c()}else{const c="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(c),this.onEvent(new r.AudioSourceErrorEvent(c,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(i=>(this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(i.readEnded(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>i.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)))}async turnOff(){for(const a in this.privStreams)if(a){const i=this.privStreams[a];i&&i.close()}this.onEvent(new r.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:o.AUDIOFORMAT.bitsPerSample,channelcount:o.AUDIOFORMAT.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:o.AUDIOFORMAT.samplesPerSec,type:e.type.Microphones}))}setProperty(a,i){if(a===t.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(i);else throw new Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){const a="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;const i=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(i===void 0)return Promise.resolve(this.privMicrophoneLabel);const c=new r.Deferred;return navigator.mediaDevices.enumerateDevices().then(u=>{for(const l of u)if(l.deviceId===i){this.privMicrophoneLabel=l.label;break}c.resolve(this.privMicrophoneLabel)},()=>c.resolve(this.privMicrophoneLabel)),c.promise}async listen(a){await this.turnOn();const i=new r.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=i;try{this.privRecorder.record(this.privContext,this.privMediaStream,i)}catch(u){throw this.onEvent(new r.AudioStreamNodeErrorEvent(this.privId,a,u)),u}return i}onEvent(a){this.privEvents.onEvent(a),r.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=n.AudioStreamFormatImpl.getAudioContext(o.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}t.MicAudioSource=o,o.AUDIOFORMAT=n.AudioStreamFormat.getDefaultInputFormat()}(fl)),fl}var pi={},Uv;function nT(){if(Uv)return pi;Uv=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.FileAudioSource=void 0;const t=M(),e=b(),r=Rr;let n=class{constructor(s,a,i){this.privStreams={},this.privHeaderEnd=44,this.privId=i||e.createNoDashGuid(),this.privEvents=new e.EventSource,this.privSource=s,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=s.name:this.privFilename=a||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const s=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new e.AudioSourceErrorEvent(s,"")),Promise.reject(s)}this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(s){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,s));const a=await this.upload(s);return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,s)),Promise.resolve({detach:async()=>{a.readEnded(),delete this.privStreams[s],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,s)),await this.turnOff()},id:()=>s,read:()=>a.read()})}detach(s){s&&this.privStreams[s]&&(this.privStreams[s].close(),delete this.privStreams[s],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,s)))}turnOff(){for(const s in this.privStreams)if(s){const a=this.privStreams[s];a&&!a.isClosed&&a.close()}return this.onEvent(new e.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(s=>Promise.resolve({bitspersample:s.bitsPerSample,channelcount:s.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:s.samplesPerSec,type:t.type.File}))}readHeader(){const a=this.privSource.slice(0,4296),i=new e.Deferred,c=u=>{const l=new DataView(u),p=f=>String.fromCharCode(l.getUint8(f),l.getUint8(f+1),l.getUint8(f+2),l.getUint8(f+3));if(p(0)!=="RIFF"){i.reject("Invalid WAV header in file, RIFF was not found");return}if(p(8)!=="WAVE"||p(12)!=="fmt "){i.reject("Invalid WAV header in file, WAVEfmt was not found");return}const d=l.getInt32(16,!0),h=l.getUint16(22,!0),v=l.getUint32(24,!0),m=l.getUint16(34,!0);let y=36+Math.max(d-16,0);for(;p(y)!=="data";y+=2)if(y>4288){i.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=y+8,i.resolve(r.AudioStreamFormat.getWaveFormatPCM(v,m,h))};if(typeof window<"u"&&typeof Blob<"u"&&a instanceof Blob){const u=new FileReader;u.onload=l=>{const p=l.target.result;c(p)},u.readAsArrayBuffer(a)}else{const u=a;c(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength))}return i.promise}async upload(s){const a=i=>{const c=`Error occurred while processing '${this.privFilename}'. ${i}`;throw this.onEvent(new e.AudioStreamNodeErrorEvent(this.privId,s,c)),new Error(c)};try{await this.turnOn();const i=await this.privAudioFormatPromise,c=new e.ChunkedArrayBufferStream(i.avgBytesPerSec/10,s);this.privStreams[s]=c;const u=this.privSource.slice(this.privHeaderEnd),l=p=>{c.isClosed||(c.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()}),c.close())};if(typeof window<"u"&&typeof Blob<"u"&&u instanceof Blob){const p=new FileReader;p.onerror=d=>a(d.toString()),p.onload=d=>{const h=d.target.result;l(h)},p.readAsArrayBuffer(u)}else{const p=u;l(p.buffer.slice(p.byteOffset,p.byteOffset+p.byteLength))}return c}catch(i){a(i)}}onEvent(s){this.privEvents.onEvent(s),e.Events.instance.onEvent(s)}};return pi.FileAudioSource=n,pi}var qc={};Object.defineProperty(qc,"__esModule",{value:!0});qc.PcmRecorder=void 0;const iT=b();class oT{constructor(e){this.privStopInputOnRelease=e}record(e,r,n){const s=new iT.RiffPcmEncoder(e.sampleRate,16e3),a=e.createMediaStreamSource(r),i=()=>{const u=(()=>{let l=0;try{return e.createScriptProcessor(l,1,1)}catch{l=2048;let d=e.sampleRate;for(;l<16384&&d>=32e3;)l<<=1,d>>=1;return e.createScriptProcessor(l,1,1)}})();u.onaudioprocess=l=>{const p=l.inputBuffer.getChannelData(0);if(n&&!n.isClosed){const d=s.encode(p);d&&n.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:r}},c=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(e.audioWorklet&&!c){if(!this.privSpeechProcessorScript){const u=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,l=new Blob([u],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(l)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const u=new AudioWorkletNode(e,"speech-processor");u.port.onmessage=l=>{const p=l.data;if(n&&!n.isClosed){const d=s.encode(p);d&&n.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:r}}).catch(()=>{i()})}else try{i()}catch(u){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${u}`)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(r=>r.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}}qc.PcmRecorder=oT;var Uc={},xs={},sT=F&&F.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),aT=F&&F.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),nC=F&&F.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&sT(e,t,r);return aT(e,t),e},bd=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xs,"__esModule",{value:!0});xs.WebsocketMessageAdapter=void 0;const cT=nC(nn),uT=nC(nn),lT=bd(nn),pT=bd(nn),dT=bd(nn),hT=ve,j=b();class Is{constructor(e,r,n,o,s,a){if(!e)throw new j.ArgumentNullError("uri");if(!n)throw new j.ArgumentNullError("messageFormatter");this.proxyInfo=o,this.privConnectionEvents=new j.EventSource,this.privConnectionId=r,this.privMessageFormatter=n,this.privConnectionState=j.ConnectionState.None,this.privUri=e,this.privHeaders=s,this.privEnableCompression=a,this.privHeaders[hT.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===j.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new j.Deferred,this.privCertificateValidatedDeferral=new j.Deferred,this.privConnectionState=j.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!Is.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{const e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),e.agent=this.getAgent();let n=new URL(this.privUri).protocol;(n==null?void 0:n.toLocaleLowerCase())==="wss:"?n="https:":(n==null?void 0:n.toLocaleLowerCase())==="ws:"&&(n="http:"),e.agent.protocol=n,this.privWebsocketClient=new dT.default(this.privUri,e)}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new j.Queue,this.privDisconnectDeferral=new j.Deferred,this.privSendMessageQueue=new j.Queue,this.processSendQueue().catch(e=>{j.Events.instance.onEvent(new j.BackgroundEvent(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new j.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new j.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=j.ConnectionState.Connected,this.onEvent(new j.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new j.ConnectionOpenResponse(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new j.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===j.ConnectionState.Connecting?(this.privConnectionState=j.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new j.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=j.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new j.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(r=>{j.Events.instance.onEvent(new j.BackgroundEvent(r))})},this.privWebsocketClient.onmessage=e=>{const r=new Date().toISOString();if(this.privConnectionState===j.ConnectionState.Connected){const n=new j.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(n.promise),e.data instanceof ArrayBuffer){const o=new j.RawWebsocketMessage(j.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(o).then(s=>{this.onEvent(new j.ConnectionMessageReceivedEvent(this.privConnectionId,r,s)),n.resolve(s)},s=>{n.reject(`Invalid binary message format. Error: ${s}`)})}else{const o=new j.RawWebsocketMessage(j.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(o).then(s=>{this.onEvent(new j.ConnectionMessageReceivedEvent(this.privConnectionId,r,s)),n.resolve(s)},s=>{n.reject(`Invalid text message format. Error: ${s}`)})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==j.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${j.ConnectionState[this.privConnectionState]} state`);const r=new j.Deferred,n=new j.Deferred;return this.privSendMessageQueue.enqueueFromPromise(n.promise),this.privMessageFormatter.fromConnectionMessage(e).then(o=>{n.resolve({Message:e,RawWebsocketMessage:o,sendStatusDeferral:r})},o=>{n.reject(`Error formatting the message. ${o}`)}),r.promise}read(){return this.privConnectionState!==j.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){if(this.privWebsocketClient)this.privConnectionState!==j.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(e){try{if(!e)return Promise.resolve();if(this.onEvent(new j.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),e.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(e.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+new Error().stack);return Promise.resolve()}catch(r){return Promise.reject(`websocket send error: ${r}`)}}async onClose(e,r){const n=`Connection closed. ${e}: ${r}`;this.privConnectionState=j.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},n),await this.privSendMessageQueue.drainAndDispose(o=>{o.sendStatusDeferral.reject(n)},n)}async processSendQueue(){for(;;){const r=await this.privSendMessageQueue.dequeue();if(!r)return;try{await this.sendRawMessage(r),r.sendStatusDeferral.resolve()}catch(n){r.sendStatusDeferral.reject(n)}}}onEvent(e){this.privConnectionEvents.onEvent(e),j.Events.instance.onEvent(e)}getAgent(){const e=new lT.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){const r={host:e.HostName,port:e.Port};return e.UserName?r.headers={"Proxy-Authentication":"Basic "+new Buffer(`${e.UserName}:${e.Password===void 0?"":e.Password}`).toString("base64")}:r.headers={},r.headers.requestOCSP="true",new pT.default(r)}createConnection(e,r){let n;if(r={...r,requestOCSP:!0,servername:r.host},this.proxyInfo){const s=Is.GetProxyAgent(this.proxyInfo);n=new Promise((a,i)=>{s.callback(e,r,(c,u)=>{c?i(c):a(u)})})}else r.secureEndpoint?n=Promise.resolve(uT.connect(r)):n=Promise.resolve(cT.connect(r));return n}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}xs.WebsocketMessageAdapter=Is;Is.forceNpmWebSocket=!1;Object.defineProperty(Uc,"__esModule",{value:!0});Uc.WebsocketConnection=void 0;const gl=b(),vT=xs;class fT{constructor(e,r,n,o,s,a=!1,i){if(this.privIsDisposed=!1,!e)throw new gl.ArgumentNullError("uri");if(!o)throw new gl.ArgumentNullError("messageFormatter");this.privMessageFormatter=o;let c="",u=0;if(r){for(const l in r)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(l);c+=p;let d=r[l];d&&(d=encodeURIComponent(d),c+=`=${d}`),u++}}if(n){for(const l in n)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(n[l]);c+=`${l}=${p}`,u++}}this.privUri=e+c,this.privId=i||gl.createNoDashGuid(),this.privConnectionMessageAdapter=new vT.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,s,n,a)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}Uc.WebsocketConnection=fT;var $c={};Object.defineProperty($c,"__esModule",{value:!0});$c.ReplayableAudioNode=void 0;class gT{constructor(e,r){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=r}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const e=this.privReplayOffset-this.privBufferStartOffset;let r=Math.round(e*this.privBytesPerSecond*1e-7);r%2!==0&&r++;let n=0;for(;n<this.privBuffers.length&&r>=this.privBuffers[n].chunk.buffer.byteLength;)r-=this.privBuffers[n++].chunk.buffer.byteLength;if(n<this.privBuffers.length){const o=this.privBuffers[n].chunk.buffer.slice(r);return this.privReplayOffset+=o.byteLength/this.privBytesPerSecond*1e7,n===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:o,isEnd:!1,timeReceived:this.privBuffers[n].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&(this.privBuffers.push(new mT(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=e;const r=e-this.privBufferStartOffset;let n=Math.round(r*this.privBytesPerSecond*1e-7),o=0;for(;o<this.privBuffers.length&&n>=this.privBuffers[o].chunk.buffer.byteLength;)n-=this.privBuffers[o++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-n/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(o)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const r of this.privBuffers){const n=r.byteOffset/this.privBytesPerSecond*1e7,o=n+r.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=n&&e<=o)return r.chunk.timeReceived}return 0}}$c.ReplayableAudioNode=gT;class mT{constructor(e,r,n){this.chunk=e,this.serial=r,this.byteOffset=n}}var di={},ml={},Ot={},Ls={},yT=F&&F.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ST=F&&F.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),CT=F&&F.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&yT(e,t,r);return ST(e,t),e};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.AudioFileWriter=void 0;const hi=CT(nn),yl=D;class PT{constructor(e){yl.Contracts.throwIfNullOrUndefined(hi.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=hi.openSync(e,"w")}set format(e){yl.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let r=0;this.privAudioFormat.hasHeader&&(r=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=hi.createWriteStream("",{fd:this.privFd,start:r,autoClose:!1}))}write(e){yl.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),hi.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),hi.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}Ls.AudioFileWriter=PT;var Ke={},$v;function iC(){if($v)return Ke;$v=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.PullAudioInputStreamImpl=Ke.PullAudioInputStream=Ke.PushAudioInputStreamImpl=Ke.PushAudioInputStream=Ke.AudioInputStream=void 0;const t=M(),e=b(),r=ut,n=E(),o=Rr;let s=class{constructor(){}static createPushStream(p){return a.create(p)}static createPullStream(p,d){return c.create(p,d)}};Ke.AudioInputStream=s;class a extends s{static create(p){return new i(p)}}Ke.PushAudioInputStream=a;class i extends a{constructor(p){super(),p===void 0?this.privFormat=o.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=p,this.privEvents=new e.EventSource,this.privId=r.createNoDashGuid(),this.privStream=new e.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(p){this.privStream.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(p){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn();const d=this.privStream;return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:async()=>(this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>d.read()}}detach(p){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:t.type.Stream})}onEvent(p){this.privEvents.onEvent(p),e.Events.instance.onEvent(p)}toBuffer(p){const d=Buffer.alloc(p.byteLength),h=new Uint8Array(p);for(let v=0;v<d.length;++v)d[v]=h[v];return d}}Ke.PushAudioInputStreamImpl=i;class c extends s{constructor(){super()}static create(p,d){return new u(p,d)}}Ke.PullAudioInputStream=c;class u extends c{constructor(p,d){super(),d===void 0?this.privFormat=n.AudioStreamFormat.getDefaultInputFormat():this.privFormat=d,this.privEvents=new e.EventSource,this.privId=r.createNoDashGuid(),this.privCallback=p,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(p){return this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn(),this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:()=>(this.privCallback.close(),this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>{let d=0,h;for(;d<this.privBufferSize;){const v=new ArrayBuffer(this.privBufferSize-d),m=this.privCallback.read(v);if(h===void 0?h=v:new Int8Array(h).set(new Int8Array(v),d),m===0)break;d+=m}return Promise.resolve({buffer:h.slice(0,d),isEnd:this.privIsClosed||d===0,timeReceived:Date.now()})}}}detach(p){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:t.type.Stream})}onEvent(p){this.privEvents.onEvent(p),e.Events.instance.onEvent(p)}}return Ke.PullAudioInputStreamImpl=u,Ke}var ye={},Er={},Dd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisOutputFormat=void 0,function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",e[e.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",e[e.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",e[e.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",e[e.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"}(t.SpeechSynthesisOutputFormat||(t.SpeechSynthesisOutputFormat={}))})(Dd);Object.defineProperty(Er,"__esModule",{value:!0});Er.AudioOutputFormatImpl=void 0;const q=Dd,B=Rr;class N extends B.AudioStreamFormatImpl{constructor(e,r,n,o,s,a,i,c,u){super(n,a,r,e),this.formatTag=e,this.avgBytesPerSec=o,this.blockAlign=s,this.priAudioFormatString=i,this.priRequestAudioFormatString=c,this.priHasHeader=u}static fromSpeechSynthesisOutputFormat(e){return e===void 0?N.getDefaultOutputFormat():N.fromSpeechSynthesisOutputFormatString(N.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new N(B.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new N(B.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new N(B.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new N(B.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new N(B.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new N(B.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new N(B.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new N(B.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new N(B.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new N(B.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new N(B.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new N(B.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new N(B.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new N(B.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new N(B.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new N(B.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new N(B.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new N(B.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new N(B.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new N(B.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new N(B.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new N(B.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new N(B.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new N(B.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new N(B.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new N(B.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new N(B.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new N(B.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new N(B.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new N(B.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new N(B.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new N(B.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new N(B.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new N(B.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new N(B.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new N(B.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new N(B.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new N(B.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);case"riff-16khz-16bit-mono-pcm":default:return new N(B.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return N.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){const r=new DataView(this.privHeader);r.setUint32(4,e+this.privHeader.byteLength-8,!0),r.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);const r=new Uint8Array(e.byteLength+this.header.byteLength);return r.set(new Uint8Array(this.header),0),r.set(new Uint8Array(e),this.header.byteLength),r.buffer}}Er.AudioOutputFormatImpl=N;N.SpeechSynthesisOutputFormatToString={[q.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[q.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[q.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[q.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[q.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[q.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[q.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[q.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[q.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[q.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[q.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[q.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[q.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[q.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[q.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[q.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[q.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[q.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm"};Object.defineProperty(ye,"__esModule",{value:!0});ye.PushAudioOutputStreamImpl=ye.PushAudioOutputStream=ye.PullAudioOutputStreamImpl=ye.PullAudioOutputStream=ye.AudioOutputStream=void 0;const kp=b(),RT=D,ET=Er;class Nd{constructor(){}static createPullStream(){return zd.create()}}ye.AudioOutputStream=Nd;class zd extends Nd{static create(){return new oC}}ye.PullAudioOutputStream=zd;class oC extends zd{constructor(){super(),this.privId=kp.createNoDashGuid(),this.privStream=new kp.Stream}set format(e){e==null&&(this.privFormat=ET.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(e){const r=new Int8Array(e);let n=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>e.byteLength)return r.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);r.set(this.privLastChunkView),n=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;n<e.byteLength&&!this.privStream.isReadEnded;){const o=await this.privStream.read();if(o!==void 0&&!o.isEnd){let s;o.buffer.byteLength>e.byteLength-n?(s=o.buffer.slice(0,e.byteLength-n),this.privLastChunkView=new Int8Array(o.buffer.slice(e.byteLength-n))):s=o.buffer,r.set(new Int8Array(s),n),n+=s.byteLength}else this.privStream.readEnded()}return n}write(e){RT.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}ye.PullAudioOutputStreamImpl=oC;class sC extends Nd{constructor(){super()}static create(e){return new aC(e)}}ye.PushAudioOutputStream=sC;class aC extends sC{constructor(e){super(),this.privId=kp.createNoDashGuid(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}ye.PushAudioOutputStreamImpl=aC;var Wv;function uC(){if(Wv)return Ot;Wv=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.AudioOutputConfigImpl=Ot.AudioConfigImpl=Ot.AudioConfig=void 0;const t=fe(),e=D,r=E(),n=Ls,o=iC(),s=ye;let a=class cC{static fromDefaultMicrophoneInput(){const l=new t.PcmRecorder(!0);return new i(new t.MicAudioSource(l))}static fromMicrophoneInput(l){const p=new t.PcmRecorder(!0);return new i(new t.MicAudioSource(p,l))}static fromWavFileInput(l,p="unnamedBuffer.wav"){return new i(new t.FileAudioSource(l,p))}static fromStreamInput(l){if(l instanceof r.PullAudioInputStreamCallback)return new i(new o.PullAudioInputStreamImpl(l));if(l instanceof r.AudioInputStream)return new i(l);if(typeof MediaStream<"u"&&l instanceof MediaStream){const p=new t.PcmRecorder(!1);return new i(new t.MicAudioSource(p,null,null,l))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new c(new r.SpeakerAudioDestination)}static fromSpeakerOutput(l){if(l===void 0)return cC.fromDefaultSpeakerOutput();if(l instanceof r.SpeakerAudioDestination)return new c(l);throw new Error("Not Supported Type")}static fromAudioFileOutput(l){return new c(new n.AudioFileWriter(l))}static fromStreamOutput(l){if(l instanceof r.PushAudioOutputStreamCallback)return new c(new s.PushAudioOutputStreamImpl(l));if(l instanceof r.PushAudioOutputStream)return new c(l);if(l instanceof r.PullAudioOutputStream)return new c(l);throw new Error("Not Supported Type")}};Ot.AudioConfig=a;class i extends a{constructor(l){super(),this.privSource=l}get format(){return this.privSource.format}close(l,p){this.privSource.turnOff().then(()=>{l&&l()},d=>{p&&p(d)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(l){return this.privSource.attach(l)}detach(l){return this.privSource.detach(l)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(l,p){if(e.Contracts.throwIfNull(p,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(l,p);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(l,p){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(l,p);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}Ot.AudioConfigImpl=i;class c extends a{constructor(l){super(),this.privDestination=l}set format(l){this.privDestination.format=l}write(l){this.privDestination.write(l)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return Ot.AudioOutputConfigImpl=c,Ot}var lC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationReason=void 0,function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(t.CancellationReason||(t.CancellationReason={}))})(lC);var Wc={};Object.defineProperty(Wc,"__esModule",{value:!0});Wc.PullAudioInputStreamCallback=void 0;class wT{}Wc.PullAudioInputStreamCallback=wT;var Hc={};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.PushAudioOutputStreamCallback=void 0;class IT{}Hc.PushAudioOutputStreamCallback=IT;var Vc={};Object.defineProperty(Vc,"__esModule",{value:!0});Vc.KeywordRecognitionModel=void 0;const Hv=D;class TT{constructor(){this.privDisposed=!1}static fromFile(e){throw Hv.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw Hv.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}Vc.KeywordRecognitionModel=TT;var Kc={};Object.defineProperty(Kc,"__esModule",{value:!0});Kc.SessionEventArgs=void 0;class _T{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}Kc.SessionEventArgs=_T;var vi={},Vv;function AT(){if(Vv)return vi;Vv=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.RecognitionEventArgs=void 0;const t=E();let e=class extends t.SessionEventArgs{constructor(n,o){super(o),this.privOffset=n}get offset(){return this.privOffset}};return vi.RecognitionEventArgs=e,vi}var pC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OutputFormat=void 0,function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(t.OutputFormat||(t.OutputFormat={}))})(pC);var fi={},Kv;function kT(){if(Kv)return fi;Kv=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.IntentRecognitionEventArgs=void 0;const t=E();let e=class extends t.RecognitionEventArgs{constructor(n,o,s){super(o,s),this.privResult=n}get result(){return this.privResult}};return fi.IntentRecognitionEventArgs=e,fi}var Jc={};Object.defineProperty(Jc,"__esModule",{value:!0});Jc.RecognitionResult=void 0;class OT{constructor(e,r,n,o,s,a,i,c,u,l){this.privResultId=e,this.privReason=r,this.privText=n,this.privDuration=o,this.privOffset=s,this.privLanguage=a,this.privLanguageDetectionConfidence=i,this.privErrorDetails=c,this.privJson=u,this.privProperties=l}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}Jc.RecognitionResult=OT;var gi={},Jv;function MT(){if(Jv)return gi;Jv=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.SpeechRecognitionResult=void 0;const t=E();let e=class extends t.RecognitionResult{constructor(n,o,s,a,i,c,u,l,p,d,h){super(n,o,s,a,i,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return gi.SpeechRecognitionResult=e,gi}var mi={},Gv;function bT(){if(Gv)return mi;Gv=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.IntentRecognitionResult=void 0;const t=E();let e=class extends t.SpeechRecognitionResult{constructor(n,o,s,a,i,c,u,l,p,d,h){super(o,s,a,i,c,u,l,void 0,p,d,h),this.privIntentId=n}get intentId(){return this.privIntentId}};return mi.IntentRecognitionResult=e,mi}var jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.LanguageUnderstandingModelImpl=jn.LanguageUnderstandingModel=void 0;const cn=D;class dC{constructor(){}static fromEndpoint(e){cn.Contracts.throwIfNull(e,"uri"),cn.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");const r=new _a,n=e.host.indexOf(".");if(n===-1)throw new Error("Could not determine region from endpoint");r.region=e.host.substr(0,n);const o=e.pathname.lastIndexOf("/")+1;if(o===-1)throw new Error("Could not determine appId from endpoint");if(r.appId=e.pathname.substr(o),r.subscriptionKey=e.searchParams.get("subscription-key"),r.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return r}static fromAppId(e){cn.Contracts.throwIfNullOrWhitespace(e,"appId");const r=new _a;return r.appId=e,r}static fromSubscription(e,r,n){cn.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),cn.Contracts.throwIfNullOrWhitespace(r,"appId"),cn.Contracts.throwIfNullOrWhitespace(n,"region");const o=new _a;return o.appId=r,o.region=n,o.subscriptionKey=e,o}}jn.LanguageUnderstandingModel=dC;class _a extends dC{}jn.LanguageUnderstandingModelImpl=_a;var Mt={},Qv;function DT(){if(Qv)return Mt;Qv=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.MeetingTranscriptionEventArgs=Mt.ConversationTranscriptionEventArgs=Mt.SpeechRecognitionEventArgs=void 0;const t=E();let e=class extends t.RecognitionEventArgs{constructor(s,a,i){super(a,i),this.privResult=s}get result(){return this.privResult}};Mt.SpeechRecognitionEventArgs=e;class r extends t.RecognitionEventArgs{constructor(s,a,i){super(a,i),this.privResult=s}get result(){return this.privResult}}Mt.ConversationTranscriptionEventArgs=r;class n extends e{}return Mt.MeetingTranscriptionEventArgs=n,Mt}var yi={},Si={},Yv;function Bs(){if(Yv)return Si;Yv=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.CancellationEventArgsBase=void 0;const t=E();let e=class extends t.RecognitionEventArgs{constructor(n,o,s,a,i){super(a,i),this.privReason=n,this.privErrorDetails=o,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Si.CancellationEventArgsBase=e,Si}var Xv;function NT(){if(Xv)return yi;Xv=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.SpeechRecognitionCanceledEventArgs=void 0;const t=Bs();let e=class extends t.CancellationEventArgsBase{};return yi.SpeechRecognitionCanceledEventArgs=e,yi}var Ci={},Zv;function zT(){if(Zv)return Ci;Zv=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.TranslationRecognitionEventArgs=void 0;const t=E();let e=class extends t.RecognitionEventArgs{constructor(n,o,s){super(o,s),this.privResult=n}get result(){return this.privResult}};return Ci.TranslationRecognitionEventArgs=e,Ci}var Pi={},ef;function jT(){if(ef)return Pi;ef=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.TranslationSynthesisEventArgs=void 0;const t=E();let e=class extends t.SessionEventArgs{constructor(n,o){super(o),this.privResult=n}get result(){return this.privResult}};return Pi.TranslationSynthesisEventArgs=e,Pi}var Ri={},tf;function vC(){if(tf)return Ri;tf=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.TranslationRecognitionResult=void 0;const t=E();let e=class hC extends t.SpeechRecognitionResult{constructor(n,o,s,a,i,c,u,l,p,d,h){super(o,s,a,i,c,u,l,void 0,p,d,h),this.privTranslations=n}static fromSpeechRecognitionResult(n){return new hC(void 0,n.resultId,n.reason,n.text,n.duration,n.offset,n.language,n.languageDetectionConfidence,n.errorDetails,n.json,n.properties)}get translations(){return this.privTranslations}};return Ri.TranslationRecognitionResult=e,Ri}var Gc={};Object.defineProperty(Gc,"__esModule",{value:!0});Gc.TranslationSynthesisResult=void 0;class xT{constructor(e,r){this.privReason=e,this.privAudio=r}get audio(){return this.privAudio}get reason(){return this.privReason}}Gc.TranslationSynthesisResult=xT;var fC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ResultReason=void 0,function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile",e[e.VoicesListRetrieved=18]="VoicesListRetrieved",e[e.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",e[e.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",e[e.TranslatedInstantMessage=21]="TranslatedInstantMessage",e[e.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(t.ResultReason||(t.ResultReason={}))})(fC);var wr={},rf;function LT(){if(rf)return wr;rf=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.SpeechConfigImpl=wr.SpeechConfig=void 0;const t=M(),e=D,r=E();let n=class{constructor(){}static fromSubscription(a,i){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(i,"region");const c=new o;return c.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),c.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,i),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c}static fromEndpoint(a,i){e.Contracts.throwIfNull(a,"endpoint");const c=new o;return c.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),i!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,i),c}static fromHost(a,i){e.Contracts.throwIfNull(a,"hostName");const c=new o;return c.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),i!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,i),c}static fromAuthorizationToken(a,i){e.Contracts.throwIfNull(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(i,"region");const c=new o;return c.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),c.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,i),c.authorizationToken=a,c}close(){}};wr.SpeechConfig=n;class o extends n{constructor(){super(),this.privProperties=new r.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=r.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a)}get outputFormat(){return r.OutputFormat[this.privProperties.getProperty(t.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privProperties.setProperty(t.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}setProperty(a,i){e.Contracts.throwIfNull(i,"value"),this.privProperties.setProperty(a,i)}getProperty(a,i){return this.privProperties.getProperty(a,i)}setProxy(a,i,c,u){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],i),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],u)}setServiceProperty(a,i){const c=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));c[a]=i,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(t.ForceDictationPropertyName,"true")}clone(){const a=new o;return a.privProperties=this.privProperties.clone(),a}get speechSynthesisLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return wr.SpeechConfigImpl=o,wr}var Ir={},nf;function BT(){if(nf)return Ir;nf=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.SpeechTranslationConfigImpl=Ir.SpeechTranslationConfig=void 0;const t=M(),e=D,r=E();let n=class extends r.SpeechConfig{constructor(){super()}static fromSubscription(a,i){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(i,"region");const c=new o;return c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),c}static fromAuthorizationToken(a,i){e.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(i,"region");const c=new o;return c.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),c}static fromHost(a,i){e.Contracts.throwIfNull(a,"hostName");const c=new o;return c.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),i!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,i),c}static fromEndpoint(a,i){e.Contracts.throwIfNull(a,"endpoint"),e.Contracts.throwIfNull(i,"subscriptionKey");const c=new o;return c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,i),c}};Ir.SpeechTranslationConfig=n;class o extends n{constructor(){super(),this.privSpeechProperties=new r.PropertyCollection,this.outputFormat=r.OutputFormat.Simple}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}set speechRecognitionLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return r.OutputFormat[this.privSpeechProperties.getProperty(t.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privSpeechProperties.setProperty(t.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}addTargetLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value");const i=this.targetLanguages;i.includes(a)||(i.push(a),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,i.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,a)}get region(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}setProxy(a,i,c,u){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],i),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],u)}getProperty(a,i){return this.privSpeechProperties.getProperty(a,i)}setProperty(a,i){this.privSpeechProperties.setProperty(a,i)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(a,i){const c=JSON.parse(this.privSpeechProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));c[a]=i,this.privSpeechProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(t.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return Ir.SpeechTranslationConfigImpl=o,Ir}var Ei={},of;function mC(){if(of)return Ei;of=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.PropertyCollection=void 0;const t=E();let e=class gC{constructor(){this.privKeys=[],this.privValues=[]}getProperty(n,o){let s;typeof n=="string"?s=n:s=t.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s)return this.privValues[a];if(o!==void 0)return String(o)}setProperty(n,o){let s;typeof n=="string"?s=n:s=t.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s){this.privValues[a]=o;return}this.privKeys.push(s),this.privValues.push(o)}clone(){const n=new gC;for(let o=0;o<this.privKeys.length;o++)n.privKeys.push(this.privKeys[o]),n.privValues.push(this.privValues[o]);return n}mergeTo(n){this.privKeys.forEach(o=>{if(n.getProperty(o,void 0)===void 0){const s=this.getProperty(o);n.setProperty(o,s)}})}get keys(){return this.privKeys}};return Ei.PropertyCollection=e,Ei}var Qc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyId=void 0,function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",e[e.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",e[e.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",e[e.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",e[e.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",e[e.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",e[e.Conversation_ApplicationId=46]="Conversation_ApplicationId",e[e.Conversation_DialogType=47]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=49]="Conversation_From_Id",e[e.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=56]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=57]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=59]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",e[e.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",e[e.WebWorkerLoadType=67]="WebWorkerLoadType",e[e.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"}(t.PropertyId||(t.PropertyId={}))})(Qc);var wi={},sf;function FT(){if(sf)return wi;sf=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.Recognizer=void 0;const t=M(),e=b(),r=D,n=E();let o=class yC{constructor(a,i,c){this.audioConfig=a!==void 0?a:n.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=i.clone(),this.privConnectionFactory=c,this.implCommonRecognizerSetup()}close(a,i){r.Contracts.throwIfDisposed(this.privDisposed),e.marshalPromiseToCallbacks(this.dispose(!0),a,i)}get internalData(){return this.privReco}async dispose(a){this.privDisposed||(this.privDisposed=!0,a&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return t.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){t.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a=typeof window<"u"?"Browser":"Node",i="unknown",c="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,i=navigator.userAgent,c=navigator.appVersion);const u=this.createRecognizerConfig(new t.SpeechServiceConfig(new t.Context(new t.OS(a,i,c))));this.privReco=this.createServiceRecognizer(yC.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,u)}async recognizeOnceAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed);const i=new e.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(a,i.resolve,i.reject);const c=await i.promise;return await this.implRecognizerStop(),c}async startContinuousRecognitionAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(a,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuthFromProperties(a){const i=a.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0);return i&&i!==""?new t.CognitiveSubscriptionKeyAuthentication(i):new t.CognitiveTokenAuthentication(()=>{const u=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)},()=>{const u=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)})}};return wi.Recognizer=o,wi}var Ii={},af;function qT(){if(af)return Ii;af=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.SpeechRecognizer=void 0;const t=M(),e=b(),r=D,n=E();let o=class SC extends n.Recognizer{constructor(a,i){const c=a;r.Contracts.throwIfNull(c,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(i,c.properties,new t.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(a,i,c){const u=a;return i.properties.mergeTo(u.properties),new SC(a,c)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple])===n.OutputFormat[n.OutputFormat.Simple]?n.OutputFormat.Simple:n.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(a,i){e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),a,i)}startContinuousRecognitionAsync(a,i){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),a,i)}stopContinuousRecognitionAsync(a,i){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,i)}startKeywordRecognitionAsync(a,i,c){r.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a){a&&a()}close(a,i){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),a,i)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,i,c,u){const l=c;return new t.SpeechServiceRecognizer(a,i,l,u,this)}};return Ii.SpeechRecognizer=o,Ii}var Ti={},cf;function UT(){if(cf)return Ti;cf=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.IntentRecognizer=void 0;const t=M(),e=b(),r=D,n=E();let o=class extends n.Recognizer{constructor(a,i){r.Contracts.throwIfNullOrUndefined(a,"speechConfig");const c=a;r.Contracts.throwIfNullOrUndefined(c,"speechConfig"),super(i,c.properties,new t.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=c.properties,r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}recognizeOnceAsync(a,i){if(r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),a,i)}startContinuousRecognitionAsync(a,i){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),a,i)}stopContinuousRecognitionAsync(a,i){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,i)}startKeywordRecognitionAsync(a,i,c){r.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a,i){if(a)try{a()}catch(c){i&&i(c)}}addIntent(a,i){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(i,"intentId"),r.Contracts.throwIfNullOrWhitespace(a,"simplePhrase"),this.privAddedIntents.push([i,a])}addIntentWithLanguageModel(a,i,c){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(a,"intentId"),r.Contracts.throwIfNull(i,"model");const u=i;r.Contracts.throwIfNullOrWhitespace(u.appId,"model.appId"),this.privAddedLmIntents[a]=new t.AddedLmIntent(u,c)}addAllIntents(a,i){r.Contracts.throwIfNull(a,"model");const c=a;r.Contracts.throwIfNullOrWhitespace(c.appId,"model.appId"),this.privUmbrellaIntent=new t.AddedLmIntent(c,i)}close(a,i){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),a,i)}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,i,c,u){const l=c;return new t.IntentServiceRecognizer(a,i,l,u,this)}async dispose(a){this.privDisposedIntentRecognizer||a&&(this.privDisposedIntentRecognizer=!0,await super.dispose(a))}buildSpeechContext(){let a,i,c;const u=[];this.privUmbrellaIntent!==void 0&&(a=this.privUmbrellaIntent.modelImpl.appId,i=this.privUmbrellaIntent.modelImpl.region,c=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const l of Object.keys(this.privAddedLmIntents)){const p=this.privAddedLmIntents[l];if(a===void 0)a=p.modelImpl.appId;else if(a!==p.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(i===void 0)i=p.modelImpl.region;else if(i!==p.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(c===void 0)c=p.modelImpl.subscriptionKey;else if(c!==p.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const d="luis/"+a+"-PRODUCTION#"+l;u.push(d)}return{Intent:{id:a,key:c===void 0?this.privProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_Key]):c,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?u:["luis/"+a+"-PRODUCTION"]}}};return Ti.IntentRecognizer=o,Ti}var CC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileType=void 0,function(e){e[e.TextIndependentIdentification=0]="TextIndependentIdentification",e[e.TextDependentVerification=1]="TextDependentVerification",e[e.TextIndependentVerification=2]="TextIndependentVerification"}(t.VoiceProfileType||(t.VoiceProfileType={}))})(CC);var _i={},Ai={},Tr={},uf;function PC(){if(uf)return Tr;uf=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.ConnectionMessageImpl=Tr.ConnectionMessage=void 0;const t=ve,e=b(),r=mC(),n=Qc;let o=class{};Tr.ConnectionMessage=o;class s{constructor(i){this.privConnectionMessage=i,this.privProperties=new r.PropertyCollection,this.privConnectionMessage.headers[t.HeaderNames.ConnectionId]&&this.privProperties.setProperty(n.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[t.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(c=>{this.privProperties.setProperty(c,this.privConnectionMessage.headers[c])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(i=>i.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===e.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===e.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return Tr.ConnectionMessageImpl=s,Tr}var lf;function RC(){if(lf)return Ai;lf=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.Connection=void 0;const t=M(),e=b(),r=PC(),n=D,o=E();let s=class Op{static fromRecognizer(i){const c=i.internalData,u=new Op;return u.privInternalData=c,u.setupEvents(),u}static fromSynthesizer(i){const c=i.internalData,u=new Op;return u.privInternalData=c,u.setupEvents(),u}openConnection(i,c){e.marshalPromiseToCallbacks(this.privInternalData.connect(),i,c)}closeConnection(i,c){if(this.privInternalData instanceof t.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");e.marshalPromiseToCallbacks(this.privInternalData.disconnect(),i,c)}setMessageProperty(i,c,u){if(n.Contracts.throwIfNullOrWhitespace(c,"propertyName"),this.privInternalData instanceof t.ServiceRecognizerBase){if(i.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(c,u)}else if(this.privInternalData instanceof t.SynthesisAdapterBase){if(i.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(c,u)}}sendMessageAsync(i,c,u,l){e.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(i,c),u,l)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(i=>{i.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new o.ConnectionEventArgs(i.connectionId)):i.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new o.ConnectionEventArgs(i.connectionId)):i.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new o.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(i.message))):i.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new o.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(i.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(i=>{this.receivedServiceMessage&&this.receivedServiceMessage(new o.ServiceEventArgs(i.jsonString,i.name))})}};return Ai.Connection=s,Ai}var pf;function $T(){if(pf)return _i;pf=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.TranslationRecognizer=void 0;const t=M(),e=b(),r=RC(),n=D,o=E();let s=class EC extends o.Recognizer{constructor(i,c,u){const l=i;n.Contracts.throwIfNull(l,"speechConfig"),super(c,l.properties,u||new t.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice),o.PropertyId[o.PropertyId.SpeechServiceConnection_TranslationVoice]),n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages),o.PropertyId[o.PropertyId.SpeechServiceConnection_TranslationToLanguages]),n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage),o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(i,c,u){const l=i;return c.properties.mergeTo(l.properties),new EC(i,u)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,i)}recognizeOnceAsync(i,c){n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),i,c)}startContinuousRecognitionAsync(i,c){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),i,c)}stopContinuousRecognitionAsync(i,c){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),i,c)}removeTargetLanguage(i){if(n.Contracts.throwIfNullOrUndefined(i,"language to be removed"),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const c=this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),u=c.indexOf(i);u>-1&&(c.splice(u,1),this.properties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")),this.updateLanguages(c))}}addTargetLanguage(i){n.Contracts.throwIfNullOrUndefined(i,"language to be added");let c=[];this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(c=this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),c.includes(i)||(c.push(i),this.properties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")))):(this.properties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,i),c=[i]),this.updateLanguages(c)}close(i,c){n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),i,c)}onConnection(){}async dispose(i){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,i&&(await this.implRecognizerStop(),await super.dispose(i)))}createRecognizerConfig(i){return new t.RecognizerConfig(i,this.privProperties)}createServiceRecognizer(i,c,u,l){const p=u;return new t.TranslationServiceRecognizer(i,c,p,l,this)}updateLanguages(i){const c=r.Connection.fromRecognizer(this);c&&(c.setMessageProperty("speech.context","translationcontext",{to:i}),c.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:i})))}};return _i.TranslationRecognizer=s,_i}var ki={},df;function WT(){if(df)return ki;df=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.Translations=void 0;const t=E();let e=class{constructor(){this.privMap=new t.PropertyCollection}get languages(){return this.privMap.keys}get(n,o){return this.privMap.getProperty(n,o)}set(n,o){this.privMap.setProperty(n,o)}};return ki.Translations=e,ki}var wC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchReason=void 0,function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(t.NoMatchReason||(t.NoMatchReason={}))})(wC);var Oi={},hf;function HT(){if(hf)return Oi;hf=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.NoMatchDetails=void 0;const t=M(),e=E();let r=class IC{constructor(o){this.privReason=o}static fromResult(o){const s=t.SimpleSpeechPhrase.fromJSON(o.json);let a=e.NoMatchReason.NotRecognized;switch(s.RecognitionStatus){case t.RecognitionStatus.BabbleTimeout:a=e.NoMatchReason.InitialBabbleTimeout;break;case t.RecognitionStatus.InitialSilenceTimeout:a=e.NoMatchReason.InitialSilenceTimeout;break;default:a=e.NoMatchReason.NotRecognized;break}return new IC(a)}get reason(){return this.privReason}};return Oi.NoMatchDetails=r,Oi}var Yc={};Object.defineProperty(Yc,"__esModule",{value:!0});Yc.TranslationRecognitionCanceledEventArgs=void 0;class VT{constructor(e,r,n,o,s){this.privCancelReason=r,this.privErrorDetails=n,this.privResult=s,this.privSessionId=e,this.privErrorCode=o}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}Yc.TranslationRecognitionCanceledEventArgs=VT;var Mi={},vf;function KT(){if(vf)return Mi;vf=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.IntentRecognitionCanceledEventArgs=void 0;const t=E();let e=class extends t.IntentRecognitionEventArgs{constructor(n,o,s,a,i,c){super(a,i,c),this.privReason=n,this.privErrorDetails=o,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Mi.IntentRecognitionCanceledEventArgs=e,Mi}var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.CancellationDetailsBase=void 0;class JT{constructor(e,r,n){this.privReason=e,this.privErrorDetails=r,this.privErrorCode=n}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}Fs.CancellationDetailsBase=JT;var bi={},ff;function GT(){if(ff)return bi;ff=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.CancellationDetails=void 0;const t=M(),e=Fs,r=E();let n=class TC extends e.CancellationDetailsBase{constructor(s,a,i){super(s,a,i)}static fromResult(s){let a=r.CancellationReason.Error,i=r.CancellationErrorCode.NoError;if(s instanceof r.RecognitionResult&&s.json){const c=t.SimpleSpeechPhrase.fromJSON(s.json);a=t.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus)}return s.properties&&(i=r.CancellationErrorCode[s.properties.getProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new TC(a,s.errorDetails||t.EnumTranslation.implTranslateErrorDetails(i),i)}};return bi.CancellationDetails=n,bi}var _C={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationErrorCode=void 0,function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"}(t.CancellationErrorCode||(t.CancellationErrorCode={}))})(_C);var Di={},gf;function QT(){if(gf)return Di;gf=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.ConnectionEventArgs=void 0;const t=E();let e=class extends t.SessionEventArgs{};return Di.ConnectionEventArgs=e,Di}var Ni={},mf;function YT(){if(mf)return Ni;mf=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.ServiceEventArgs=void 0;const t=E();let e=class extends t.SessionEventArgs{constructor(n,o,s){super(s),this.privJsonResult=n,this.privEventName=o}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return Ni.ServiceEventArgs=e,Ni}var Xc={};Object.defineProperty(Xc,"__esModule",{value:!0});Xc.PhraseListGrammar=void 0;class jd{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){const r=e.internalData;return new jd(r)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}}Xc.PhraseListGrammar=jd;var _r={},yf;function xd(){if(yf)return _r;yf=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.DialogServiceConfigImpl=_r.DialogServiceConfig=void 0;const t=D,e=E();let r=class{constructor(){}set applicationId(s){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};_r.DialogServiceConfig=r;class n extends r{constructor(){super(),this.privSpeechConfig=new e.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(s){t.Contracts.throwIfNullOrWhitespace(s,"value"),this.privSpeechConfig.speechRecognitionLanguage=s}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(s){this.privSpeechConfig.outputFormat=s}setProperty(s,a){this.privSpeechConfig.setProperty(s,a)}getProperty(s,a){return this.privSpeechConfig.getProperty(s)}setProxy(s,a,i,c){this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName,s),this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPort,`${a}`),i&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName,i),c&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword,c)}setServiceProperty(s,a,i){this.privSpeechConfig.setServiceProperty(s,a)}close(){}}return _r.DialogServiceConfigImpl=n,_r}var zi={},Sf;function XT(){if(Sf)return zi;Sf=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.BotFrameworkConfig=void 0;const t=D,e=xd(),r=E();let n=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,i){t.Contracts.throwIfNullOrWhitespace(s,"subscription"),t.Contracts.throwIfNullOrWhitespace(a,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),i&&c.setProperty(r.PropertyId.Conversation_ApplicationId,i),c}static fromAuthorizationToken(s,a,i){t.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(a,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),i&&c.setProperty(r.PropertyId.Conversation_ApplicationId,i),c}static fromHost(s,a,i){t.Contracts.throwIfNullOrUndefined(s,"host");const c=s instanceof URL?s:new URL(`wss://${s}.convai.speech.azure.us`);t.Contracts.throwIfNullOrUndefined(c,"resolvedHost");const u=new e.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(r.PropertyId.SpeechServiceConnection_Host,c.toString()),a!==void 0&&u.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u}static fromEndpoint(s,a){t.Contracts.throwIfNull(s,"endpoint");const i=new e.DialogServiceConfigImpl;return i.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),i.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,s.toString()),a!==void 0&&i.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),i}};return zi.BotFrameworkConfig=n,zi}var ji={},Cf;function ZT(){if(Cf)return ji;Cf=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.CustomCommandsConfig=void 0;const t=D,e=xd(),r=E();let n=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,i){t.Contracts.throwIfNullOrWhitespace(s,"applicationId"),t.Contracts.throwIfNullOrWhitespace(a,"subscription"),t.Contracts.throwIfNullOrWhitespace(i,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(r.PropertyId.Conversation_ApplicationId,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),c}static fromAuthorizationToken(s,a,i){t.Contracts.throwIfNullOrWhitespace(s,"applicationId"),t.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(i,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(r.PropertyId.Conversation_ApplicationId,s),c.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),c}set applicationId(s){t.Contracts.throwIfNullOrWhitespace(s,"value"),this.setProperty(r.PropertyId.Conversation_ApplicationId,s)}get applicationId(){return this.getProperty(r.PropertyId.Conversation_ApplicationId)}};return ji.CustomCommandsConfig=n,ji}var xi={},Li={},Bi={},yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.QueryParameterNames=void 0;class ie{}yt.QueryParameterNames=ie;ie.BotId="botid";ie.CustomSpeechDeploymentId="cid";ie.CustomVoiceDeploymentId="deploymentId";ie.EnableAudioLogging="storeAudio";ie.EnableLanguageId="lidEnabled";ie.EnableWordLevelTimestamps="wordLevelTimestamps";ie.EndSilenceTimeoutMs="endSilenceTimeoutMs";ie.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";ie.Format="format";ie.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";ie.Language="language";ie.Profanity="profanity";ie.RequestBotStatusMessages="enableBotMessageStatus";ie.StableIntermediateThreshold="stableIntermediateThreshold";ie.StableTranslation="stableTranslation";ie.TestHooks="testhooks";ie.Postprocessing="postprocessing";ie.CtsMeetingId="meetingId";ie.CtsDeviceId="deviceId";ie.CtsIsParticipant="isParticipant";ie.EnableAvatar="enableTalkingAvatar";var Pf;function St(){if(Pf)return Bi;Pf=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.ConnectionFactoryBase=void 0;const t=M(),e=E(),r=yt;let n=class{static getHostSuffix(s){if(s){if(s.toLowerCase().startsWith("china"))return".azure.cn";if(s.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(s,a,i){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,r.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,r.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,r.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,r.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,r.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,r.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,r.QueryParameterNames.EnableWordLevelTimestamps],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,r.QueryParameterNames.StableIntermediateThreshold]]).forEach((l,p)=>{this.setUrlParameter(p,l,s,a,i)});const u=JSON.parse(s.parameters.getProperty(t.ServicePropertiesPropertyName,"{}"));Object.keys(u).forEach(l=>{a[l]=u[l]})}setUrlParameter(s,a,i,c,u){const l=i.parameters.getProperty(s,void 0);l&&(!u||u.search(a)===-1)&&(c[a]=l.toLocaleLowerCase())}};return Bi.ConnectionFactoryBase=n,Bi}var Rf;function e_(){if(Rf)return Li;Rf=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.DialogConnectionFactory=void 0;const t=fe(),e=M(),r=E(),n=St(),o=M(),s=ve,a=yt;class i extends n.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(r.PropertyId.Conversation_ApplicationId,""),h=u.parameters.getProperty(r.PropertyId.Conversation_DialogType),v=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),m=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),y=u.parameters.getProperty(r.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),f={};f[s.HeaderNames.ConnectionId]=p,f[a.QueryParameterNames.Format]=u.parameters.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase(),f[a.QueryParameterNames.Language]=m,f[a.QueryParameterNames.RequestBotStatusMessages]=y,d&&(f[a.QueryParameterNames.BotId]=d,h===r.DialogServiceConfig.DialogTypes.CustomCommands&&(f[s.HeaderNames.CustomCommandsAppId]=d));const g=h===r.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",S=h===r.DialogServiceConfig.DialogTypes.CustomCommands?"v1":h===r.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",C={};l.token!=null&&l.token!==""&&(C[l.headerName]=l.token);let P=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,"");if(!P){const _=n.ConnectionFactoryBase.getHostSuffix(v),I=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,`wss://${v}.${i.BaseUrl}${_}`);P=`${I.endsWith("/")?I:I+"/"}${g}${i.ApiKey}/${S}`}this.setCommonUrlParams(u,f,P);const R=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(P,f,C,new o.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),R,p)}}return Li.DialogConnectionFactory=i,i.ApiKey="api",i.BaseUrl="convai.speech",Li}var Ef;function t_(){if(Ef)return xi;Ef=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.DialogServiceConnector=void 0;const t=e_(),e=M(),r=b(),n=D,o=E(),s=Qc;let a=class extends o.Recognizer{constructor(c,u){const l=c;n.Contracts.throwIfNull(c,"dialogConfig"),super(u,l.properties,new t.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=l.properties.clone();const p=this.buildAgentConfig();this.privReco.agentConfig.set(p)}connect(c,u){r.marshalPromiseToCallbacks(this.privReco.connect(),c,u)}disconnect(c,u){r.marshalPromiseToCallbacks(this.privReco.disconnect(),c,u)}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){n.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(s.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(c){this.properties.setProperty(s.PropertyId.Conversation_Speech_Activity_Template,c)}listenOnceAsync(c,u){if(this.isTurnComplete){n.Contracts.throwIfDisposed(this.privIsDisposed);const p=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const d=new r.Deferred;await this.privReco.recognize(e.RecognitionMode.Conversation,d.resolve,d.reject);const h=await d.promise;return await this.implRecognizerStop(),h})();p.catch(()=>{this.dispose(!0).catch(()=>{})}),r.marshalPromiseToCallbacks(p.finally(()=>{this.isTurnComplete=!0}),c,u)}}sendActivityAsync(c,u,l){r.marshalPromiseToCallbacks(this.privReco.sendMessage(c),u,l)}close(c,u){n.Contracts.throwIfDisposed(this.privIsDisposed),r.marshalPromiseToCallbacks(this.dispose(!0),c,u)}async dispose(c){this.privIsDisposed||c&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(c))}createRecognizerConfig(c){return new e.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,u,l,p){const d=l;return new e.DialogServiceAdapter(c,u,d,p,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(s.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(s.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(s.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return xi.DialogServiceConnector=a,xi}var Zc={};Object.defineProperty(Zc,"__esModule",{value:!0});Zc.ActivityReceivedEventArgs=void 0;class r_{constructor(e,r){this.privActivity=e,this.privAudioStream=r}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}Zc.ActivityReceivedEventArgs=r_;var eu={},tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.TurnStatusResponsePayload=void 0;class Ld{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new Ld(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}tu.TurnStatusResponsePayload=Ld;Object.defineProperty(eu,"__esModule",{value:!0});eu.TurnStatusReceivedEventArgs=void 0;const n_=tu;class i_{constructor(e){this.privTurnStatus=n_.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}eu.TurnStatusReceivedEventArgs=i_;var AC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ServicePropertyChannel=void 0,function(e){e[e.UriQueryParameter=0]="UriQueryParameter"}(t.ServicePropertyChannel||(t.ServicePropertyChannel={}))})(AC);var kC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ProfanityOption=void 0,function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(t.ProfanityOption||(t.ProfanityOption={}))})(kC);var Fi={},wf;function o_(){if(wf)return Fi;wf=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.BaseAudioPlayer=void 0;const t=Ce,e=E(),r=Rr;let n=class{constructor(s){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,s===void 0&&(s=e.AudioStreamFormat.getDefaultInputFormat()),this.init(s)}playAudioSample(s,a,i){try{this.ensureInitializedContext();const c=this.formatAudioData(s),u=new Float32Array(this.samples.length+c.length);u.set(this.samples,0),u.set(c,this.samples.length),this.samples=u,a&&a()}catch(c){i&&i(c)}}stopAudio(s,a){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{s&&s()},i=>{a&&a(i)}),this.audioContext=null)}init(s){this.audioFormat=s,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const s=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},s)}}createAudioContext(){this.audioContext=r.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(s){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(s),128);case 16:return this.formatArrayBuffer(new Int16Array(s),32768);case 32:return this.formatArrayBuffer(new Int32Array(s),2147483648);default:throw new t.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(s,a){const i=new Float32Array(s.length);for(let c=0;c<s.length;c++)i[c]=s[c]/a;return i}updateAudioBuffer(){if(this.samples.length===0)return;const s=this.audioFormat.channels,a=this.audioContext.createBufferSource(),i=this.samples.length/s,c=this.audioContext.createBuffer(s,i,this.audioFormat.samplesPerSec);for(let u=0;u<s;u++){let l=u;const p=c.getChannelData(u);for(let d=0;d<this.samples.length;d++,l+=s)p[d]=this.samples[l]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),a.buffer=c,a.connect(this.gainNode),a.start(this.startTime),this.startTime+=c.duration,this.samples=new Float32Array}async playAudio(s){this.audioContext===null&&this.createAudioContext();const a=this.audioContext.createBufferSource(),i=this.audioContext.destination;await this.audioContext.decodeAudioData(s,c=>{a.buffer=c,a.connect(i),a.start(0)})}};return Fi.BaseAudioPlayer=n,Fi}var ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.ConnectionMessageEventArgs=void 0;class s_{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}ru.ConnectionMessageEventArgs=s_;var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.VoiceProfile=void 0;class a_{constructor(e,r){this.privId=e,this.privProfileType=r}get profileId(){return this.privId}get profileType(){return this.privProfileType}}nu.VoiceProfile=a_;var Ar={},If;function c_(){if(If)return Ar;If=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.VoiceProfileEnrollmentCancellationDetails=Ar.VoiceProfileEnrollmentResult=void 0;const t=M(),e=E();let r=class Mp{constructor(s,a,i){this.privReason=s,this.privProperties=new e.PropertyCollection,this.privReason!==e.ResultReason.Canceled?a&&(this.privDetails=JSON.parse(a),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=e.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=i,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(s){const a=[];for(const i of s.value){const c=i.enrollmentStatus.toLowerCase()==="enrolling"?e.ResultReason.EnrollingVoiceProfile:i.enrollmentStatus.toLowerCase()==="enrolled"?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,u=new Mp(c,null,null);u.privDetails=this.getIdentificationDetails(i),a.push(u)}return a}static FromVerificationProfileList(s){const a=[];for(const i of s.value){const c=i.enrollmentStatus.toLowerCase()==="enrolling"?e.ResultReason.EnrollingVoiceProfile:i.enrollmentStatus.toLowerCase()==="enrolled"?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,u=new Mp(c,null,null);u.privDetails=this.getVerificationDetails(i),a.push(u)}return a}static getIdentificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount||0,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.identificationProfileId,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.verificationProfileId,remainingEnrollmentsCount:s.remainingEnrollments||s.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}};Ar.VoiceProfileEnrollmentResult=r;class n extends e.CancellationDetailsBase{constructor(s,a,i){super(s,a,i)}static fromResult(s){const a=e.CancellationReason.Error;let i=e.CancellationErrorCode.NoError;return s.properties&&(i=e.CancellationErrorCode[s.properties.getProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.NoError])]),new n(a,s.errorDetails,i)}}return Ar.VoiceProfileEnrollmentCancellationDetails=n,Ar}var kr={},Tf;function u_(){if(Tf)return kr;Tf=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.VoiceProfileCancellationDetails=kr.VoiceProfileResult=void 0;const t=M(),e=D,r=E();let n=class{constructor(a,i){this.privReason=a,this.privProperties=new r.PropertyCollection,a===r.ResultReason.Canceled&&(e.Contracts.throwIfNullOrUndefined(i,"statusText"),this.privErrorDetails=i,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};kr.VoiceProfileResult=n;class o extends r.CancellationDetailsBase{constructor(a,i,c){super(a,i,c)}static fromResult(a){const i=r.CancellationReason.Error;let c=r.CancellationErrorCode.NoError;return a.properties&&(c=r.CancellationErrorCode[a.properties.getProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new o(i,a.errorDetails,c)}}return kr.VoiceProfileCancellationDetails=o,kr}var qi={},_f;function l_(){if(_f)return qi;_f=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.VoiceProfilePhraseResult=void 0;const t=D,e=E();let r=class extends e.VoiceProfileResult{constructor(o,s,a,i){super(o,s),this.privPhrases=[],t.Contracts.throwIfNullOrUndefined(i,"phrase array"),this.privType=a,i&&i[0]&&(this.privPhrases=i)}get phrases(){return this.privPhrases}get type(){return this.privType}};return qi.VoiceProfilePhraseResult=r,qi}var Ui={},Af;function p_(){if(Af)return Ui;Af=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.VoiceProfileClient=void 0;const t=M(),e=uC(),r=D,n=E();let o=class extends n.Recognizer{constructor(a){r.Contracts.throwIfNullOrUndefined(a,"speechConfig");const i=a;r.Contracts.throwIfNull(i,"speechConfig"),super(e.AudioConfig.fromStreamInput(n.AudioInputStream.createPushStream()),i.properties,new t.VoiceProfileConnectionFactory),this.privProperties=i.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}async createProfileAsync(a,i){const c=await this.privVoiceAdapter.createProfile(a,i);return new n.VoiceProfile(c[0],a)}async retrieveEnrollmentResultAsync(a){return this.privVoiceAdapter.retrieveEnrollmentResult(a)}async getAllProfilesAsync(a){return this.privVoiceAdapter.getAllProfiles(a)}async getActivationPhrasesAsync(a,i){return this.privVoiceAdapter.getActivationPhrases(a,i)}async enrollProfileAsync(a,i){const c=i;return r.Contracts.throwIfNullOrUndefined(c,"audioConfig"),this.audioConfig=i,this.privVoiceAdapter.SpeakerAudioSource=c,this.privVoiceAdapter.enrollProfile(a)}async deleteProfileAsync(a){return this.privVoiceAdapter.deleteProfile(a)}async resetProfileAsync(a){return this.privVoiceAdapter.resetProfile(a)}async close(){await this.dispose(!0)}createServiceRecognizer(a,i,c,u){const l=c;return new t.VoiceServiceRecognizer(a,i,l,u,this)}async dispose(a){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,a&&await super.dispose(a))}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.properties)}getResult(a,i){return new n.VoiceProfileResult(a.ok?i:n.ResultReason.Canceled,a.statusText)}};return Ui.VoiceProfileClient=o,Ui}var $i={},kf;function d_(){if(kf)return $i;kf=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.SpeakerRecognizer=void 0;const t=M(),e=D,r=E();let n=class extends r.Recognizer{constructor(s,a){e.Contracts.throwIfNullOrUndefined(s,"speechConfig");const i=s;e.Contracts.throwIfNullOrUndefined(i,"speechConfig"),super(a,i.properties,new t.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=a,e.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=i.properties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){e.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s)}get properties(){return this.privProperties}async recognizeOnceAsync(s){return e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(s)}async close(){e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(s){e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const a=await this.privReco.recognizeSpeaker(s);return await this.implRecognizerStop(),a}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(s){return new t.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,a,i,c){const u=i;return new t.SpeakerServiceRecognizer(s,a,u,c,this)}async dispose(s){this.privDisposedSpeakerRecognizer||s&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(s))}};return $i.SpeakerRecognizer=n,$i}var Wi={},Of;function h_(){if(Of)return Wi;Of=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.SpeakerIdentificationModel=void 0;const t=D,e=E();let r=class OC{constructor(o){if(this.privVoiceProfiles=[],this.privProfileIds=[],t.Contracts.throwIfNullOrUndefined(o,"VoiceProfiles"),o.length===0)throw new Error("Empty Voice Profiles array");for(const s of o){if(s.profileType!==e.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+s.profileId);this.privVoiceProfiles.push(s),this.privProfileIds.push(s.profileId)}}static fromProfiles(o){return new OC(o)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return Wi.SpeakerIdentificationModel=r,Wi}var Hi={},Mf;function v_(){if(Mf)return Hi;Mf=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.SpeakerVerificationModel=void 0;const t=D,e=E();let r=class MC{constructor(o){if(t.Contracts.throwIfNullOrUndefined(o,"VoiceProfile"),o.profileType===e.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=o}static fromProfile(o){return new MC(o)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===e.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return Hi.SpeakerVerificationModel=r,Hi}var Vi={},Bd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageIdMode=void 0,function(e){e[e.AtStart=0]="AtStart",e[e.Continuous=1]="Continuous"}(t.LanguageIdMode||(t.LanguageIdMode={}))})(Bd);var bf;function f_(){if(bf)return Vi;bf=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.AutoDetectSourceLanguageConfig=void 0;const t=M(),e=D,r=E(),n=Bd;let o=class Aa{constructor(){this.privProperties=new r.PropertyCollection,this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=n.LanguageIdMode.AtStart}static fromOpenRange(){const a=new Aa;return a.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,t.AutoDetectSourceLanguagesOpenRangeOptionName),a}static fromLanguages(a){e.Contracts.throwIfArrayEmptyOrWhitespace(a,"languages");const i=new Aa;return i.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a.join()),i}static fromSourceLanguageConfigs(a){if(a.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const i=new Aa,c=[];return a.forEach(u=>{if(c.push(u.language),u.endpointId!==void 0&&u.endpointId!==""){const l=u.language+r.PropertyId.SpeechServiceConnection_EndpointId.toString();i.properties.setProperty(l,u.endpointId)}}),i.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c.join()),i}get properties(){return this.privProperties}set mode(a){a===n.LanguageIdMode.Continuous?(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=a}};return Vi.AutoDetectSourceLanguageConfig=o,Vi}var iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.AutoDetectSourceLanguageResult=void 0;const Df=D;class oc{constructor(e,r){Df.Contracts.throwIfNullOrUndefined(e,"language"),Df.Contracts.throwIfNullOrUndefined(r,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=r}static fromResult(e){return new oc(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new oc(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}iu.AutoDetectSourceLanguageResult=oc;var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.SourceLanguageConfig=void 0;const g_=D;class Fd{constructor(e,r){g_.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=r}static fromLanguage(e,r){return new Fd(e,r)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}ou.SourceLanguageConfig=Fd;var Sl={},Nf;function m_(){return Nf||(Nf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionCancellationDetails=t.SpeakerRecognitionResult=t.SpeakerRecognitionResultType=void 0;const e=M(),r=E();var n;(function(a){a[a.Verify=0]="Verify",a[a.Identify=1]="Identify"})(n=t.SpeakerRecognitionResultType||(t.SpeakerRecognitionResultType={}));class o{constructor(i,c=r.ResultReason.RecognizedSpeaker,u=r.CancellationErrorCode.NoError,l=""){this.privProperties=new r.PropertyCollection;const p=i.scenario==="TextIndependentIdentification"?n.Identify:n.Verify;this.privReason=c,this.privReason!==r.ResultReason.Canceled?p===n.Identify?(this.privProfileId=i.identificationResult.identifiedProfile.profileId,this.privScore=i.identificationResult.identifiedProfile.score,this.privReason=r.ResultReason.RecognizedSpeakers):(this.privScore=i.verificationResult.score,i.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=r.ResultReason.NoMatch),i.verificationResult.profileId!==void 0&&i.verificationResult.profileId!==""&&(this.privProfileId=i.verificationResult.profileId)):(this.privErrorDetails=l,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[u])),this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(i))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}t.SpeakerRecognitionResult=o;class s extends r.CancellationDetailsBase{constructor(i,c,u){super(i,c,u)}static fromResult(i){const c=r.CancellationReason.Error;let u=r.CancellationErrorCode.NoError;return i.properties&&(u=r.CancellationErrorCode[i.properties.getProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new s(c,i.errorDetails,u)}}t.SpeakerRecognitionCancellationDetails=s}(Sl)),Sl}var Cl={},Or={},zf;function bC(){if(zf)return Or;zf=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.ConversationImpl=Or.Conversation=void 0;const t=M(),e=b(),r=D,n=E();let o=class{constructor(){}static createConversationAsync(i,c,u,l){r.Contracts.throwIfNullOrUndefined(i,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(i.region,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!i.subscriptionKey&&!i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(i.subscriptionKey,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let p,d,h;return typeof c=="string"?(p=new s(i,c),e.marshalPromiseToCallbacks((async()=>{})(),u,l)):(p=new s(i),d=c,h=u,p.createConversationAsync(()=>{d&&d()},v=>{h&&h(v)})),p}};Or.Conversation=o;class s extends o{constructor(i,c){if(super(),this.privErrors=t.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case t.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case t.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case t.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case t.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case t.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case t.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const v=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(n.PropertyId.ConversationTranslator_Name);v!==void 0&&v.length>0&&v!==this.me.displayName&&this.changeNicknameAsync(v)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new t.ConversationManager,i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||i.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],t.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),c)this.privConversationId=c;else{i.targetLanguages.length===0&&i.addTargetLanguage(this.privLanguage),i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceResponse_ProfanityOption])||i.setProfanity(n.ProfanityOption.Masked);let d=i.getProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name]);d==null&&(d="Host"),r.Contracts.throwIfNullOrTooLong(d,"nickname",50),r.Contracts.throwIfNullOrTooShort(d,"nickname",2),i.setProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name],d)}this.privConfig=i;const l=i;r.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new t.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var i,c;return(i=this.privParticipants.me)!=null&&i.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const i=this.conversationId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of t.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:i,participants:c,conversationProperties:u}}get canSend(){var i;return this.privIsConnected&&!((i=this.privParticipants.me)!=null&&i.isMuted)}get canSendAsHost(){var i;return this.privIsConnected&&((i=this.privParticipants.me)==null?void 0:i.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(i){r.Contracts.throwIfNullOrWhitespace(i,"authorizationToken"),this.privToken=i}set conversationTranslator(i){this.privConversationTranslator=i}onToken(i){this.privConversationTranslator.onToken(i)}createConversationAsync(i,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startConversationAsync(i,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=t.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(i,c,u){r.Contracts.throwIfNullOrUndefined(i,"Participant"),e.marshalPromiseToCallbacks(this.addParticipantImplAsync(i),c,u)}joinConversationAsync(i,c,u,l,p){try{r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,i,d=>{r.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteConversationAsync(i,c){e.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),i,c)}async deleteConversationImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(i,c){e.marshalPromiseToCallbacks(this.endConversationImplAsync(),i,c)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==i&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(i,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(i,c,u){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&i.hasOwnProperty("id"))e.marshalPromiseToCallbacks(this.removeParticipantImplAsync(i),c,u);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof i=="string"?l=i:i.hasOwnProperty("id")?l=i.id:i.hasOwnProperty("userId")&&(l=i.userId),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockConversationAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==i&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(i,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),i.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(i),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(i),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(i),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(i){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await i.enforceAudioGating(),this.privTranscriberRecognizer=i,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const i=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:i,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(i){if(this.privParticipants.addOrUpdateParticipant(i)!==void 0&&this.privTranscriberRecognizer){const u=this.conversationInfo;return u.participants=[i],this.privTranscriberRecognizer.pushConversationEvent(u,"join")}}removeParticipantImplAsync(i){this.privParticipants.deleteParticipant(i.id);const c=this.conversationInfo;return c.participants=[i],this.privTranscriberRecognizer.pushConversationEvent(c,"leave")}async close(i){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}i&&this.dispose()}handleCallback(i,c){if(i){try{i()}catch(u){c&&c(u)}i=void 0}}handleError(i,c){if(c)if(i instanceof Error){const u=i;c(u.name+": "+u.message)}else c(i)}toParticipants(i){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return i?c:c.filter(u=>u.isHost===!1)}toParticipant(i){return new n.Participant(i.id,i.avatar,i.displayName,i.isHost,i.isMuted,i.isUsingTts,i.preferredLanguage,i.voice)}getMuteAllCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getMuteCommand(i,c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(i,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMute,participantId:i,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getEjectCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(i,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.ejectParticipant,participantId:i,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getChangeNicknameCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(i,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.changeNickname,nickname:i,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getMessageCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(i,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:i,type:t.ConversationTranslatorMessageTypes.instantMessage})}}return Or.ConversationImpl=s,Or}var su={};Object.defineProperty(su,"__esModule",{value:!0});su.ConversationCommon=void 0;class y_{constructor(e){this.privAudioConfig=e}handleCallback(e,r){if(e){try{e()}catch(n){r&&r(n)}e=void 0}}handleError(e,r){if(r)if(e instanceof Error){const n=e;r(n.name+": "+n.message)}else r(e)}}su.ConversationCommon=y_;var Ki={},jf;function S_(){if(jf)return Ki;jf=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.ConversationExpirationEventArgs=void 0;const t=E();let e=class extends t.SessionEventArgs{constructor(n,o){super(o),this.privExpirationTime=n}get expirationTime(){return this.privExpirationTime}};return Ki.ConversationExpirationEventArgs=e,Ki}var Ji={},xf;function C_(){if(xf)return Ji;xf=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.ConversationParticipantsChangedEventArgs=void 0;const t=E();let e=class extends t.SessionEventArgs{constructor(n,o,s){super(s),this.privReason=n,this.privParticipant=o}get reason(){return this.privReason}get participants(){return this.privParticipant}};return Ji.ConversationParticipantsChangedEventArgs=e,Ji}var Gi={},Lf;function P_(){if(Lf)return Gi;Lf=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.ConversationTranslationCanceledEventArgs=void 0;const t=Bs();let e=class extends t.CancellationEventArgsBase{};return Gi.ConversationTranslationCanceledEventArgs=e,Gi}var Qi={},Bf;function R_(){if(Bf)return Qi;Bf=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.ConversationTranslationEventArgs=void 0;const t=E();let e=class extends t.RecognitionEventArgs{constructor(n,o,s){super(o,s),this.privResult=n}get result(){return this.privResult}};return Qi.ConversationTranslationEventArgs=e,Qi}var Yi={},Ff;function E_(){if(Ff)return Yi;Ff=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.ConversationTranslationResult=void 0;const t=vC();let e=class extends t.TranslationRecognitionResult{constructor(n,o,s,a,i,c,u,l,p,d,h){super(o,a,i,c,u,l,void 0,void 0,p,d,h),this.privId=n,this.privOrigLang=s}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return Yi.ConversationTranslationResult=e,Yi}var Pl={},Xi={},qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.StringUtils=void 0;class w_{static formatString(e,r){if(!e)return"";if(!r)return e;let n="",o="";const s=c=>{n+=c},a=c=>{o+=c};let i=s;for(let c=0;c<e.length;c++){const u=e[c],l=c+1<e.length?e[c+1]:"";switch(u){case"{":l==="{"?(i("{"),c++):i=a;break;case"}":l==="}"?(i("}"),c++):(r.hasOwnProperty(o)&&(n+=r[o]),i=s,o="");break;default:i(u);break}}return n}}qs.StringUtils=w_;var qf;function I_(){if(qf)return Xi;qf=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.ConversationTranslatorConnectionFactory=void 0;const t=fe(),e=qs,r=D,n=E(),o=ve,s=yt,a=St(),i=M();let c=class DC extends a.ConnectionFactoryBase{constructor(l){super(),r.Contracts.throwIfNullOrUndefined(l,"convGetter"),this.privConvGetter=l}create(l,p,d){const h=l.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",v=this.privConvGetter().room,m=v.cognitiveSpeechRegion||l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,""),y={hostSuffix:a.ConnectionFactoryBase.getHostSuffix(m),path:DC.CTS_VIRT_MIC_PATH,region:encodeURIComponent(m)};y[s.QueryParameterNames.Language]=encodeURIComponent(l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"")),y[s.QueryParameterNames.CtsMeetingId]=encodeURIComponent(v.roomId),y[s.QueryParameterNames.CtsDeviceId]=encodeURIComponent(v.participantId),y[s.QueryParameterNames.CtsIsParticipant]=v.isHost?"":"&"+s.QueryParameterNames.CtsIsParticipant;let f="";const g={},S={};if(h){f=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint),f||(f="wss://"+l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),f=e.StringUtils.formatString(f,y);const P=new URL(f);P.searchParams.forEach((_,I)=>{g[I]=_}),new i.TranscriberConnectionFactory().setQueryParams(g,l,f),g[s.QueryParameterNames.CtsMeetingId]=y[s.QueryParameterNames.CtsMeetingId],g[s.QueryParameterNames.CtsDeviceId]=y[s.QueryParameterNames.CtsDeviceId],v.isHost||(g[s.QueryParameterNames.CtsIsParticipant]=""),s.QueryParameterNames.Format in g||(g[s.QueryParameterNames.Format]="simple"),P.searchParams.forEach((_,I)=>{P.searchParams.set(I,g[I]),delete g[I]}),f=P.toString()}else{const P=new i.TranslationConnectionFactory;f=P.getEndpointUrl(l,!0),f=e.StringUtils.formatString(f,y),P.setQueryParams(g,l,f)}S[o.HeaderNames.ConnectionId]=d,S[t.RestConfigBase.configParams.token]=v.token,p.token&&(S[p.headerName]=p.token);const C=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return new t.WebsocketConnection(f,g,S,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(l),C,d)}};return Xi.ConversationTranslatorConnectionFactory=c,c.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",Xi}var Uf;function T_(){return Uf||(Uf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslator=t.SpeechState=void 0;const e=M(),r=I_(),n=b(),o=D,s=E(),a=bC(),i=qd();var c;(function(p){p[p.Inactive=0]="Inactive",p[p.Connecting=1]="Connecting",p[p.Connected=2]="Connected"})(c=t.SpeechState||(t.SpeechState={}));class u extends s.TranslationRecognizer{constructor(d,h,v,m){super(d,h,new r.ConversationTranslatorConnectionFactory(m)),this.privSpeechState=c.Inactive,v&&(this.privTranslator=v,this.sessionStarted=()=>{this.privSpeechState=c.Connected},this.sessionStopped=()=>{this.privSpeechState=c.Inactive},this.recognizing=(y,f)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,f)},this.recognized=async(y,f)=>{var g;(g=f.result)!=null&&g.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(f.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,f)},this.canceled=async()=>{if(this.privSpeechState!==c.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=c.Inactive}})}get state(){return this.privSpeechState}set state(d){this.privSpeechState=d}set authentication(d){this.privReco.authentication=d}onConnection(){this.privSpeechState=c.Connected}async onCancelSpeech(){this.privSpeechState=c.Inactive,await this.cancelSpeech()}fireCancelEvent(d){try{if(this.privTranslator.canceled){const h=new i.ConversationTranslationCanceledEventArgs(s.CancellationReason.Error,d,s.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,h)}}catch{}}async cancelSpeech(){var d;try{this.stopContinuousRecognitionAsync(),await((d=this.privReco)==null?void 0:d.disconnect()),this.privSpeechState=c.Inactive}catch{}}}class l extends i.ConversationCommon{constructor(d){super(d),this.privErrors=e.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new s.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var d;return(d=this.privConversation)==null?void 0:d.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===c.Connected||this.privCTRecognizer.state===c.Connecting||this.privConversation.isMutedByHost)}onToken(d){this.privCTRecognizer.authentication=d}setServiceProperty(d,h){const v=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));v[d]=h,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(v))}joinConversationAsync(d,h,v,m,y){try{if(typeof d=="string"){o.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),o.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),y);let f=v;(f==null||f==="")&&(f=e.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=s.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(s.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(f),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],f),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name],h);const g=[s.PropertyId.SpeechServiceConnection_Host,s.PropertyId.ConversationTranslator_Host,s.PropertyId.SpeechServiceConnection_Endpoint,s.PropertyId.SpeechServiceConnection_ProxyHostName,s.PropertyId.SpeechServiceConnection_ProxyPassword,s.PropertyId.SpeechServiceConnection_ProxyPort,s.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const C of g){const P=this.privProperties.getProperty(C);if(P){const R=typeof C=="string"?C:s.PropertyId[C];this.privSpeechTranslationConfig.setProperty(R,P)}}const S=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));for(const C of Object.keys(S))this.privSpeechTranslationConfig.setServiceProperty(C,S[C],s.ServicePropertyChannel.UriQueryParameter);this.privConversation=new a.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(d,h,f,C=>{C||this.handleError(new Error(this.privErrors.permissionDeniedConnect),y),this.privSpeechTranslationConfig.authorizationToken=C,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(m,y)},P=>{this.handleError(P,y)})},C=>{this.handleError(C,y)})}else typeof d=="object"?(o.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),o.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(s.PropertyId.ConversationTranslator_Name,h),this.privConversation=d,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,o.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),o.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=d.config,this.handleCallback(v,m)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),m)}catch(f){this.handleError(f,typeof v=="string"?y:m)}}leaveConversationAsync(d,h){n.marshalPromiseToCallbacks((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),d,h)}sendTextMessageAsync(d,h,v){try{o.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),o.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}",d)),this.privConversation.sendTextMessageAsync(d,h,v)}catch(m){this.handleError(m,v)}}startTranscribingAsync(d,h){n.marshalPromiseToCallbacks((async()=>{try{o.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),o.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),o.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),h),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(v){throw this.privIsSpeaking=!1,await this.cancelSpeech(),v}})(),d,h)}stopTranscribingAsync(d,h){n.marshalPromiseToCallbacks((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((v,m)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(v,m)})}catch{await this.cancelSpeech()}})(),d,h)}isDisposed(){return this.privIsDisposed}dispose(d,h,v){n.marshalPromiseToCallbacks((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),h,v)}async cancelSpeech(){var d;try{this.privIsSpeaking=!1,await((d=this.privCTRecognizer)==null?void 0:d.onCancelSpeech()),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=s.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key],"");const d=()=>this.privConversation;this.privCTRecognizer=new u(this.privSpeechTranslationConfig,this.privAudioConfig,this,d)}catch(d){throw await this.cancelSpeech(),d}}startContinuousRecognition(){return new Promise((d,h)=>{this.privCTRecognizer.startContinuousRecognitionAsync(d,h)})}}t.ConversationTranslator=l}(Pl)),Pl}var Zi={},$f;function __(){if($f)return Zi;$f=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.ConversationTranscriber=void 0;const t=M(),e=b(),r=D,n=E();let o=class NC extends n.Recognizer{constructor(a,i){const c=a;r.Contracts.throwIfNull(c,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(i,c.properties,new t.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(a,i,c){const u=a;return i.properties.mergeTo(u.properties),new NC(a,c)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple])===n.OutputFormat[n.OutputFormat.Simple]?n.OutputFormat.Simple:n.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(a,i){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),a,i)}stopTranscribingAsync(a,i){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,i)}close(a,i){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),a,i)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,i,c,u){const l=c;return u.isSpeakerDiarizationEnabled=!0,new t.ConversationTranscriptionServiceRecognizer(a,i,l,u,this)}};return Zi.ConversationTranscriber=o,Zi}var Mr={},Wf;function A_(){if(Wf)return Mr;Wf=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.Participant=Mr.User=void 0;const t=E();class e{constructor(o){this.privUserId=o}get userId(){return this.privUserId}}Mr.User=e;class r{constructor(o,s,a,i,c,u,l,p){this.privId=o,this.privAvatar=s,this.privDisplayName=a,this.privIsHost=i,this.privIsMuted=c,this.privIsUsingTts=u,this.privPreferredLanguage=l,this.privVoice=p,this.privProperties=new t.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(o,s,a){return new r(o,"",o,!1,!1,!1,s,a)}}return Mr.Participant=r,Mr}var zC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantChangedReason=void 0,function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"}(t.ParticipantChangedReason||(t.ParticipantChangedReason={}))})(zC);var br={},Hf;function k_(){if(Hf)return br;Hf=1,Object.defineProperty(br,"__esModule",{value:!0}),br.MeetingImpl=br.Meeting=void 0;const t=M(),e=b(),r=D,n=E();let o=class{constructor(){}static createMeetingAsync(i,c,u,l){if(r.Contracts.throwIfNullOrUndefined(i,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(i.region,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),r.Contracts.throwIfNull(c,"meetingId"),c.length===0)throw new Error("meetingId cannot be empty");!i.subscriptionKey&&!i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(i.subscriptionKey,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const p=new s(i,c);return e.marshalPromiseToCallbacks((async()=>{})(),u,l),p}};br.Meeting=o;class s extends o{constructor(i,c){super(),this.privErrors=t.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case t.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case t.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case t.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case t.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case t.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case t.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const v=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(n.PropertyId.ConversationTranslator_Name);v!==void 0&&v.length>0&&v!==this.me.displayName&&this.changeNicknameAsync(v)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new t.ConversationManager,i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||i.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],t.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=c,this.privConfig=i;const l=i;r.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new t.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var i,c;return(i=this.privParticipants.me)!=null&&i.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const i=this.meetingId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of t.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:i,participants:c,meetingProperties:u}}get canSend(){var i;return this.privIsConnected&&!((i=this.privParticipants.me)!=null&&i.isMuted)}get canSendAsHost(){var i;return this.privIsConnected&&((i=this.privParticipants.me)==null?void 0:i.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(i){r.Contracts.throwIfNullOrWhitespace(i,"authorizationToken"),this.privToken=i}createMeetingAsync(i,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startMeetingAsync(i,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(i,c,u){r.Contracts.throwIfNullOrUndefined(i,"Participant"),e.marshalPromiseToCallbacks(this.addParticipantImplAsync(i),c,u)}joinMeetingAsync(i,c,u,l,p){try{r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,i,d=>{r.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteMeetingAsync(i,c){e.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),i,c)}async deleteMeetingImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(i,c){e.marshalPromiseToCallbacks(this.endMeetingImplAsync(),i,c)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==i&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(i,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(i,c,u){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&i.hasOwnProperty("id"))e.marshalPromiseToCallbacks(this.removeParticipantImplAsync(i),c,u);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof i=="string"?l=i:i.hasOwnProperty("id")?l=i.id:i.hasOwnProperty("userId")&&(l=i.userId),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockMeetingAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==i&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(i,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),i.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(i),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(i),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(i),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(i){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await i.enforceAudioGating(),this.privTranscriberRecognizer=i,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const i=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:i,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(i){if(this.privParticipants.addOrUpdateParticipant(i)!==void 0&&this.privTranscriberRecognizer){const u=this.meetingInfo;return u.participants=[i],this.privTranscriberRecognizer.pushMeetingEvent(u,"join")}}removeParticipantImplAsync(i){this.privParticipants.deleteParticipant(i.id);const c=this.meetingInfo;return c.participants=[i],this.privTranscriberRecognizer.pushMeetingEvent(c,"leave")}async close(i){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}i&&this.dispose()}handleCallback(i,c){if(i){try{i()}catch(u){c&&c(u)}i=void 0}}handleError(i,c){if(c)if(i instanceof Error){const u=i;c(u.name+": "+u.message)}else c(i)}toParticipants(i){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return i?c:c.filter(u=>u.isHost===!1)}toParticipant(i){return new n.Participant(i.id,i.avatar,i.displayName,i.isHost,i.isMuted,i.isUsingTts,i.preferredLanguage,i.voice)}getMuteAllCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getMuteCommand(i,c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(i,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMute,participantId:i,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getEjectCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(i,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.ejectParticipant,participantId:i,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getChangeNicknameCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(i,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.changeNickname,nickname:i,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getMessageCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(i,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:i,type:t.ConversationTranslatorMessageTypes.instantMessage})}}return br.MeetingImpl=s,br}var eo={},Vf;function O_(){if(Vf)return eo;Vf=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.MeetingTranscriptionCanceledEventArgs=void 0;const t=Bs();class e extends t.CancellationEventArgsBase{}return eo.MeetingTranscriptionCanceledEventArgs=e,eo}var to={},Kf;function M_(){if(Kf)return to;Kf=1,Object.defineProperty(to,"__esModule",{value:!0}),to.MeetingTranscriber=void 0;const t=M(),e=b(),r=D,n=E(),o=qd();let s=class{constructor(i){this.privAudioConfig=i,this.privProperties=new n.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return n.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){r.Contracts.throwIfNullOrWhitespace(i,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,i)}joinMeetingAsync(i,c,u){const l=i;r.Contracts.throwIfNullOrUndefined(o.MeetingImpl,"Meeting"),this.privRecognizer=new t.TranscriberRecognizer(i.config,this.privAudioConfig),r.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),e.marshalPromiseToCallbacks(l.connectTranscriberRecognizer(this.privRecognizer),c,u)}startTranscribingAsync(i,c){this.privRecognizer.startContinuousRecognitionAsync(i,c)}stopTranscribingAsync(i,c){this.privRecognizer.stopContinuousRecognitionAsync(i,c)}leaveMeetingAsync(i,c){this.privRecognizer.disconnectCallbacks(),e.marshalPromiseToCallbacks((async()=>{})(),i,c)}close(i,c){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),i,c)}async dispose(i){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),i&&(this.privDisposedRecognizer=!0))}};return to.MeetingTranscriber=s,to}var ro={},Jf;function b_(){if(Jf)return ro;Jf=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.ConversationTranscriptionResult=void 0;const t=E();let e=class extends t.RecognitionResult{constructor(n,o,s,a,i,c,u,l,p,d,h){super(n,o,s,a,i,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return ro.ConversationTranscriptionResult=e,ro}var Gf;function qd(){return Gf||(Gf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=bC();Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return e.Conversation}}),Object.defineProperty(t,"ConversationImpl",{enumerable:!0,get:function(){return e.ConversationImpl}});var r=su;Object.defineProperty(t,"ConversationCommon",{enumerable:!0,get:function(){return r.ConversationCommon}});var n=S_();Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return n.ConversationExpirationEventArgs}});var o=C_();Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return o.ConversationParticipantsChangedEventArgs}});var s=P_();Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return s.ConversationTranslationCanceledEventArgs}});var a=R_();Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationEventArgs}});var i=E_();Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return i.ConversationTranslationResult}});var c=T_();Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return c.ConversationTranslator}});var u=__();Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return u.ConversationTranscriber}});var l=A_();Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return l.Participant}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return l.User}});var p=zC;Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return p.ParticipantChangedReason}});var d=k_();Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return d.Meeting}}),Object.defineProperty(t,"MeetingImpl",{enumerable:!0,get:function(){return d.MeetingImpl}});var h=O_();Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return h.MeetingTranscriptionCanceledEventArgs}});var v=M_();Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return v.MeetingTranscriber}});var m=b_();Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return m.ConversationTranscriptionResult}})}(Cl)),Cl}var Dr={},Qf;function Ud(){if(Qf)return Dr;Qf=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.SynthesisRequest=Dr.Synthesizer=void 0;const t=M(),e=b(),r=D,n=E();let o=class jC{constructor(i){const c=i;r.Contracts.throwIfNull(c,"speechConfig"),this.privProperties=c.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new e.Queue}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){r.Contracts.throwIfNullOrWhitespace(i,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,i)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===t.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(i){const c={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let u=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),l=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,""),p=jC.XMLEncode(i);return this.autoDetectSourceLanguage?u="en-US":l=l||c[u],l&&(p=`<voice name='${l}'>${p}</voice>`),p=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${u}'>${p}</speak>`,p}async dispose(i){this.privDisposed||(i&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const i=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(i.text,i.isSSML,i.requestId,i.cb,i.err,i.dataStream)}}createSynthesizerConfig(i){return new t.SynthesizerConfig(i,this.privProperties)}implCommonSynthesizeSetup(){let i=typeof window<"u"?"Browser":"Node",c="unknown",u="unknown";typeof navigator<"u"&&(i=i+"/"+navigator.platform,c=navigator.userAgent,u=navigator.appVersion);const l=this.createSynthesizerConfig(new t.SpeechServiceConfig(new t.Context(new t.OS(i,c,u)))),p=this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0),d=p&&p!==""?new t.CognitiveSubscriptionKeyAuthentication(p):new t.CognitiveTokenAuthentication(()=>{const h=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)},()=>{const h=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)});this.privAdapter=this.createSynthesisAdapter(d,this.privConnectionFactory,l),this.privRestAdapter=this.createRestSynthesisAdapter(d,l)}static XMLEncode(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Dr.Synthesizer=o;class s{constructor(i,c,u,l,p,d){this.requestId=i,this.text=c,this.isSSML=u,this.cb=l,this.err=p,this.dataStream=d}}return Dr.SynthesisRequest=s,Dr}var no={},Yf;function D_(){if(Yf)return no;Yf=1,Object.defineProperty(no,"__esModule",{value:!0}),no.SpeechSynthesizer=void 0;const t=M(),e=b(),r=Ls,n=Er,o=ye,s=D,a=E(),i=Ud();let c=class xC extends a.Synthesizer{constructor(l,p){super(l),p!==null&&(p===void 0?this.audioConfig=typeof window>"u"?void 0:a.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=p),this.privConnectionFactory=new t.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(l,p,d){const h=l;return p.properties.mergeTo(h.properties),new xC(l,d)}speakTextAsync(l,p,d,h){this.speakImpl(l,!1,p,d,h)}speakSsmlAsync(l,p,d,h){this.speakImpl(l,!0,p,d,h)}async getVoicesAsync(l=""){return this.getVoices(l)}close(l,p){s.Contracts.throwIfDisposed(this.privDisposed),e.marshalPromiseToCallbacks(this.dispose(!0),l,p)}get internalData(){return this.privAdapter}createSynthesisAdapter(l,p,d){return new t.SpeechSynthesisAdapter(l,p,d,this,this.audioConfig)}createRestSynthesisAdapter(l,p){return new t.SynthesisRestAdapter(p,l)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat[this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(l,p,d,h,v){try{s.Contracts.throwIfDisposed(this.privDisposed);const m=e.createNoDashGuid();let y;v instanceof a.PushAudioOutputStreamCallback?y=new o.PushAudioOutputStreamImpl(v):v instanceof a.PullAudioOutputStream?y=v:v!==void 0?y=new r.AudioFileWriter(v):y=void 0,this.synthesisRequestQueue.enqueue(new i.SynthesisRequest(m,l,p,f=>{if(this.privSynthesizing=!1,d)try{d(f)}catch(g){h&&h(g)}d=void 0,this.adapterSpeak().catch(()=>{})},f=>{h&&h(f)},y)),this.adapterSpeak().catch(()=>{})}catch(m){if(h)if(m instanceof Error){const y=m;h(y.name+": "+y.message)}else h(m);this.dispose(!0).catch(()=>{})}}async getVoices(l){const p=e.createNoDashGuid(),d=await this.privRestAdapter.getVoicesList(p);if(d.ok&&Array.isArray(d.json)){let h=d.json;return l&&l.length>0&&(h=h.filter(v=>!!v.Locale&&v.Locale.toLowerCase()===l.toLowerCase())),new a.SynthesisVoicesResult(p,h,void 0)}else return new a.SynthesisVoicesResult(p,void 0,`Error: ${d.status}: ${d.statusText}`)}};return no.SpeechSynthesizer=c,no}var au={};Object.defineProperty(au,"__esModule",{value:!0});au.SynthesisResult=void 0;class N_{constructor(e,r,n,o){this.privResultId=e,this.privReason=r,this.privErrorDetails=n,this.privProperties=o}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}au.SynthesisResult=N_;var io={},Xf;function z_(){if(Xf)return io;Xf=1,Object.defineProperty(io,"__esModule",{value:!0}),io.SpeechSynthesisResult=void 0;const t=E();let e=class extends t.SynthesisResult{constructor(n,o,s,a,i,c){super(n,o,a,i),this.privAudioData=s,this.privAudioDuration=c}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return io.SpeechSynthesisResult=e,io}var cu={};Object.defineProperty(cu,"__esModule",{value:!0});cu.SpeechSynthesisEventArgs=void 0;class j_{constructor(e){this.privResult=e}get result(){return this.privResult}}cu.SpeechSynthesisEventArgs=j_;var uu={};Object.defineProperty(uu,"__esModule",{value:!0});uu.SpeechSynthesisWordBoundaryEventArgs=void 0;class x_{constructor(e,r,n,o,s,a){this.privAudioOffset=e,this.privDuration=r,this.privText=n,this.privWordLength=o,this.privTextOffset=s,this.privBoundaryType=a}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}uu.SpeechSynthesisWordBoundaryEventArgs=x_;var lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.SpeechSynthesisBookmarkEventArgs=void 0;class L_{constructor(e,r){this.privAudioOffset=e,this.privText=r}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}lu.SpeechSynthesisBookmarkEventArgs=L_;var pu={};Object.defineProperty(pu,"__esModule",{value:!0});pu.SpeechSynthesisVisemeEventArgs=void 0;class B_{constructor(e,r,n){this.privAudioOffset=e,this.privVisemeId=r,this.privAnimation=n}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}pu.SpeechSynthesisVisemeEventArgs=B_;var LC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBoundaryType=void 0,function(e){e.Word="WordBoundary",e.Punctuation="PunctuationBoundary",e.Sentence="SentenceBoundary"}(t.SpeechSynthesisBoundaryType||(t.SpeechSynthesisBoundaryType={}))})(LC);var oo={},Zf;function F_(){if(Zf)return oo;Zf=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.SynthesisVoicesResult=void 0;const t=E();let e=class extends t.SynthesisResult{constructor(n,o,s){if(Array.isArray(o)){super(n,t.ResultReason.VoicesListRetrieved,void 0,new t.PropertyCollection),this.privVoices=[];for(const a of o)this.privVoices.push(new t.VoiceInfo(a))}else super(n,t.ResultReason.Canceled,s||"Error information unavailable",new t.PropertyCollection)}get voices(){return this.privVoices}};return oo.SynthesisVoicesResult=e,oo}var BC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceInfo=t.SynthesisVoiceType=t.SynthesisVoiceGender=void 0;var e;(function(s){s[s.Unknown=0]="Unknown",s[s.Female=1]="Female",s[s.Male=2]="Male",s[s.Neutral=3]="Neutral"})(e=t.SynthesisVoiceGender||(t.SynthesisVoiceGender={}));var r;(function(s){s[s.OnlineNeural=1]="OnlineNeural",s[s.OnlineStandard=2]="OnlineStandard",s[s.OfflineNeural=3]="OfflineNeural",s[s.OfflineStandard=4]="OfflineStandard"})(r=t.SynthesisVoiceType||(t.SynthesisVoiceType={}));const n={[e[e.Neutral]]:e.Neutral,[e[e.Male]]:e.Male,[e[e.Female]]:e.Female};class o{constructor(a){if(this.privStyleList=[],a){if(this.privName=a.Name,this.privLocale=a.Locale,this.privShortName=a.ShortName,this.privLocaleName=a.LocaleName,this.privDisplayName=a.DisplayName,this.privLocalName=a.LocalName,this.privVoiceType=a.VoiceType.endsWith("Standard")?r.OnlineStandard:r.OnlineNeural,this.privGender=n[a.Gender]||e.Unknown,a.StyleList&&Array.isArray(a.StyleList))for(const i of a.StyleList)this.privStyleList.push(i);this.privSampleRateHertz=a.SampleRateHertz,this.privStatus=a.Status,a.ExtendedPropertyMap&&(this.privExtendedPropertyMap=a.ExtendedPropertyMap),this.privWordsPerMinute=a.WordsPerMinute,Array.isArray(a.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...a.SecondaryLocaleList]),Array.isArray(a.RolePlayList)&&(this.privRolePlayList=[...a.RolePlayList])}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}}t.VoiceInfo=o})(BC);var du={};Object.defineProperty(du,"__esModule",{value:!0});du.SpeakerAudioDestination=void 0;const Nr=b(),q_=ye,rt=Rr,U_=60*30,eg={[rt.AudioFormatTag.PCM]:"audio/wav",[rt.AudioFormatTag.MuLaw]:"audio/x-wav",[rt.AudioFormatTag.MP3]:"audio/mpeg",[rt.AudioFormatTag.OGG_OPUS]:"audio/ogg",[rt.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[rt.AudioFormatTag.ALaw]:"audio/x-wav",[rt.AudioFormatTag.FLAC]:"audio/flac"};class $_{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||Nr.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,r,n){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{r&&r()},o=>{n&&n(o)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,r){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},n=>{r&&r(n)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===rt.AudioFormatTag.PCM||this.privFormat.formatTag===rt.AudioFormatTag.MuLaw||this.privFormat.formatTag===rt.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let n=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(n).then(()=>{n=this.privFormat.addHeader(n);const o=new Blob([n],{type:eg[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(o),this.notifyPlayback().then(()=>{e&&e()},s=>{r&&r(s)})},o=>{r&&r(o)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=e;const r=eg[this.privFormat.formatTag];r===void 0?console.warn(`Unknown mimeType for format ${rt.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(r)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=U_,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(r),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(n=>{Nr.Events.instance.onEvent(new Nr.BackgroundEvent(n))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(n=>{Nr.Events.instance.onEvent(new Nr.BackgroundEvent(n))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(n=>{Nr.Events.instance.onEvent(new Nr.BackgroundEvent(n))})):(console.warn(`Format ${rt.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new q_.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var e;return((e=this.privAudio)==null?void 0:e.volume)??-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,r){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{e&&e()},n=>{r&&r(n)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch{this.privAudioBuffer.unshift(e),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}}du.SpeakerAudioDestination=$_;var so={},tg;function W_(){if(tg)return so;tg=1,Object.defineProperty(so,"__esModule",{value:!0}),so.ConversationTranscriptionCanceledEventArgs=void 0;const t=Bs();let e=class extends t.CancellationEventArgsBase{};return so.ConversationTranscriptionCanceledEventArgs=e,so}var ao={},rg;function H_(){if(rg)return ao;rg=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.MeetingTranscriptionCanceledEventArgs=void 0;const t=Bs();let e=class extends t.CancellationEventArgsBase{};return ao.MeetingTranscriptionCanceledEventArgs=e,ao}var FC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGradingSystem=void 0,function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"}(t.PronunciationAssessmentGradingSystem||(t.PronunciationAssessmentGradingSystem={}))})(FC);var qC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGranularity=void 0,function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"}(t.PronunciationAssessmentGranularity||(t.PronunciationAssessmentGranularity={}))})(qC);var co={},ng;function V_(){if(ng)return co;ng=1,Object.defineProperty(co,"__esModule",{value:!0}),co.PronunciationAssessmentConfig=void 0;const t=D,e=E();let r=class UC{constructor(o,s=e.PronunciationAssessmentGradingSystem.FivePoint,a=e.PronunciationAssessmentGranularity.Phoneme,i=!1){t.Contracts.throwIfNullOrUndefined(o,"referenceText"),this.privProperties=new e.PropertyCollection,this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,o),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_GradingSystem,e.PronunciationAssessmentGradingSystem[s]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Granularity,e.PronunciationAssessmentGranularity[a]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,String(i))}static fromJSON(o){t.Contracts.throwIfNullOrUndefined(o,"json");const s=new UC("");return s.privProperties=new e.PropertyCollection,s.properties.setProperty(e.PropertyId.PronunciationAssessment_Json,o),s}toJSON(){return this.updateJson(),this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Params)}applyTo(o){this.updateJson();const s=o.internalData;s.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,s.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(e.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,s.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(o){t.Contracts.throwIfNullOrWhitespace(o,"referenceText"),this.properties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,o)}set phonemeAlphabet(o){t.Contracts.throwIfNullOrWhitespace(o,"phonemeAlphabet"),this.privPhonemeAlphabet=o}set enableMiscue(o){const s=o?"true":"false";this.properties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,s)}get enableMiscue(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(o){this.privNBestPhonemeCount=o}set enableProsodyAssessment(o){this.privEnableProsodyAssessment=o}enableContentAssessmentWithTopic(o){this.privContentAssessmentTopic=o}get properties(){return this.privProperties}updateJson(){const o=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Json,"{}"),s=JSON.parse(o),a=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText);a&&(s.referenceText=a);const i=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_GradingSystem);i&&(s.gradingSystem=i);const c=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Granularity);c&&(s.granularity=c),this.privPhonemeAlphabet&&(s.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(s.nbestPhonemeCount=this.privNBestPhonemeCount),s.enableProsodyAssessment=this.privEnableProsodyAssessment,s.dimension="Comprehensive",this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue)&&(s.enableMiscue=this.enableMiscue),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Params,JSON.stringify(s))}};return co.PronunciationAssessmentConfig=r,co}var zr={},ig;function K_(){if(ig)return zr;ig=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.PronunciationAssessmentResult=zr.ContentAssessmentResult=void 0;const t=D,e=E();class r{constructor(s){this.privPronJson=s}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}zr.ContentAssessmentResult=r;let n=class $C{constructor(s){const a=JSON.parse(s);t.Contracts.throwIfNullOrUndefined(a.NBest[0],"NBest"),this.privPronJson=a.NBest[0]}static fromResult(s){t.Contracts.throwIfNullOrUndefined(s,"result");const a=s.properties.getProperty(e.PropertyId.SpeechServiceResponse_JsonResult);return t.Contracts.throwIfNullOrUndefined(a,"json"),new $C(a)}get detailResult(){return this.privPronJson}get accuracyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.AccuracyScore}get pronunciationScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.PronScore}get completenessScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.CompletenessScore}get fluencyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.FluencyScore}get prosodyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new r(this.detailResult)}};return zr.PronunciationAssessmentResult=n,zr}var uo={},og;function J_(){if(og)return uo;og=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.AvatarConfig=void 0;const t=D,e=E();let r=class{constructor(o,s,a){this.privCustomized=!1,t.Contracts.throwIfNullOrWhitespace(o,"character"),this.character=o,this.style=s,a===void 0&&(a=new e.AvatarVideoFormat),this.videoFormat=a}get customized(){return this.privCustomized}set customized(o){this.privCustomized=o}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(o){this.privBackgroundColor=o}};return uo.AvatarConfig=r,uo}var WC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarEventArgs=t.AvatarEventTypes=void 0,function(r){r.SwitchedToSpeaking="SwitchedToSpeaking",r.SwitchedToIdle="SwitchedToIdle",r.SessionClosed="SessionClosed"}(t.AvatarEventTypes||(t.AvatarEventTypes={}));class e{constructor(n,o){this.privOffset=n,this.privDescription=o}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}t.AvatarEventArgs=e})(WC);var lo={},po={},sg;function HC(){if(sg)return po;sg=1,Object.defineProperty(po,"__esModule",{value:!0}),po.SpeechSynthesisConnectionFactory=void 0;const t=fe(),e=E(),r=St(),n=M(),o=ve,s=yt;let a=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(c,u,l){let p=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),h=r.ConnectionFactoryBase.getHostSuffix(d),v=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=v===void 0?"tts":"voice",y=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+d+"."+m+".speech"+h),f={},g={};u.token!==void 0&&u.token!==""&&(g[u.headerName]=u.token),g[o.HeaderNames.ConnectionId]=l,v!==void 0&&v!==""&&(!p||p.search(s.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(f[s.QueryParameterNames.CustomVoiceDeploymentId]=v),c.avatarEnabled&&(!p||p.search(s.QueryParameterNames.EnableAvatar)===-1)&&(f[s.QueryParameterNames.EnableAvatar]="true"),p||(p=y+this.synthesisUri),c.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,p);const S=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(p,f,g,new n.WebsocketMessageFormatter,t.ProxyInfo.fromParameters(c.parameters),S,l)}};return po.SpeechSynthesisConnectionFactory=a,po}var ag;function G_(){if(ag)return lo;ag=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.AvatarSynthesizer=void 0;const t=HC(),e=M(),r=b(),n=Er,o=E(),s=D,a=Ud();let i=class extends o.Synthesizer{constructor(u,l){super(u),s.Contracts.throwIfNullOrUndefined(l,"avatarConfig"),this.privConnectionFactory=new t.SpeechSynthesisConnectionFactory,this.privAvatarConfig=l,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(o.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(u){s.Contracts.throwIfNullOrUndefined(u,"peerConnection"),this.privIceServers=u.getConfiguration().iceServers,s.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const l=new r.Deferred;u.onicegatheringstatechange=()=>{r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering state: "+u.iceGatheringState,r.EventType.Debug)),u.iceGatheringState==="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering complete.",r.EventType.Info)),l.resolve())},u.onicecandidate=m=>{m.candidate?r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: "+m.candidate.candidate,r.EventType.Debug)):(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: complete",r.EventType.Debug)),l.resolve())},setTimeout(()=>{u.iceGatheringState!=="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering timeout.",r.EventType.Warning)),l.resolve())},2e3);const p=await u.createOffer();await u.setLocalDescription(p),await l.promise,r.Events.instance.onEvent(new r.PlatformEvent("peer connection: got local SDP.",r.EventType.Info)),this.privProperties.setProperty(o.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(u.localDescription));const d=await this.speak("",!1);if(d.reason!==o.ResultReason.SynthesizingAudioCompleted)return new o.SynthesisResult(d.resultId,d.reason,d.errorDetails,d.properties);const h=atob(d.properties.getProperty(o.PropertyId.TalkingAvatarService_WebRTC_SDP)),v=new RTCSessionDescription(JSON.parse(h));return await u.setRemoteDescription(v),new o.SynthesisResult(d.resultId,d.reason,void 0,d.properties)}async speakTextAsync(u){const l=await this.speak(u,!1);return new o.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async speakSsmlAsync(u){const l=await this.speak(u,!0);return new o.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return s.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(u,l,p){return new e.AvatarSynthesisAdapter(u,l,p,this,this.privAvatarConfig)}createRestSynthesisAdapter(u,l){}createSynthesizerConfig(u){const l=super.createSynthesizerConfig(u);return l.avatarEnabled=!0,l}async speak(u,l){const p=r.createNoDashGuid(),d=new r.Deferred;return this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(p,u,l,h=>{d.resolve(h),this.privSynthesizing=!1,this.adapterSpeak()},h=>{d.reject(h),this.privSynthesizing=!1})),this.adapterSpeak(),d.promise}};return lo.AvatarSynthesizer=i,lo}var xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.AvatarVideoFormat=xn.Coordinate=void 0;class Q_{constructor(e,r){this.x=e,this.y=r}}xn.Coordinate=Q_;class Y_{constructor(e="H264",r=2e6,n=1920,o=1080){this.codec=e,this.bitrate=r,this.width=n,this.height=o}setCropRange(e,r){this.cropRange={bottomRight:r,topLeft:e}}}xn.AvatarVideoFormat=Y_;var ho={},cg;function X_(){if(cg)return ho;cg=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.AvatarWebRTCConnectionResult=void 0;const t=E();let e=class extends t.SynthesisResult{constructor(n,o,s,a,i){super(o,s,a,i),this.privSDPAnswer=n}get SDPAnswer(){return this.privSDPAnswer}};return ho.AvatarWebRTCConnectionResult=e,ho}var vo={},ug;function Z_(){if(ug)return vo;ug=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.Diagnostics=void 0;const t=fe(),e=b();let r=class{static SetLoggingLevel(o){this.privListener=new t.ConsoleLoggingListener(o),e.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(o){if(typeof window>"u")this.privListener&&(this.privListener.logPath=o);else throw new Error("File system logging not available in browser.")}static set onLogOutput(o){this.privListener&&(this.privListener.logCallback=o)}};return vo.Diagnostics=r,r.privListener=void 0,vo}var lg;function E(){return lg||(lg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=uC();Object.defineProperty(t,"AudioConfig",{enumerable:!0,get:function(){return e.AudioConfig}});var r=Rr;Object.defineProperty(t,"AudioStreamFormat",{enumerable:!0,get:function(){return r.AudioStreamFormat}}),Object.defineProperty(t,"AudioFormatTag",{enumerable:!0,get:function(){return r.AudioFormatTag}});var n=iC();Object.defineProperty(t,"AudioInputStream",{enumerable:!0,get:function(){return n.AudioInputStream}}),Object.defineProperty(t,"PullAudioInputStream",{enumerable:!0,get:function(){return n.PullAudioInputStream}}),Object.defineProperty(t,"PushAudioInputStream",{enumerable:!0,get:function(){return n.PushAudioInputStream}});var o=ye;Object.defineProperty(t,"AudioOutputStream",{enumerable:!0,get:function(){return o.AudioOutputStream}}),Object.defineProperty(t,"PullAudioOutputStream",{enumerable:!0,get:function(){return o.PullAudioOutputStream}}),Object.defineProperty(t,"PushAudioOutputStream",{enumerable:!0,get:function(){return o.PushAudioOutputStream}});var s=lC;Object.defineProperty(t,"CancellationReason",{enumerable:!0,get:function(){return s.CancellationReason}});var a=Wc;Object.defineProperty(t,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return a.PullAudioInputStreamCallback}});var i=Hc;Object.defineProperty(t,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return i.PushAudioOutputStreamCallback}});var c=Vc;Object.defineProperty(t,"KeywordRecognitionModel",{enumerable:!0,get:function(){return c.KeywordRecognitionModel}});var u=Kc;Object.defineProperty(t,"SessionEventArgs",{enumerable:!0,get:function(){return u.SessionEventArgs}});var l=AT();Object.defineProperty(t,"RecognitionEventArgs",{enumerable:!0,get:function(){return l.RecognitionEventArgs}});var p=pC;Object.defineProperty(t,"OutputFormat",{enumerable:!0,get:function(){return p.OutputFormat}});var d=kT();Object.defineProperty(t,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return d.IntentRecognitionEventArgs}});var h=Jc;Object.defineProperty(t,"RecognitionResult",{enumerable:!0,get:function(){return h.RecognitionResult}});var v=MT();Object.defineProperty(t,"SpeechRecognitionResult",{enumerable:!0,get:function(){return v.SpeechRecognitionResult}});var m=bT();Object.defineProperty(t,"IntentRecognitionResult",{enumerable:!0,get:function(){return m.IntentRecognitionResult}});var y=jn;Object.defineProperty(t,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return y.LanguageUnderstandingModel}});var f=DT();Object.defineProperty(t,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return f.SpeechRecognitionEventArgs}}),Object.defineProperty(t,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return f.ConversationTranscriptionEventArgs}}),Object.defineProperty(t,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return f.MeetingTranscriptionEventArgs}});var g=NT();Object.defineProperty(t,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return g.SpeechRecognitionCanceledEventArgs}});var S=zT();Object.defineProperty(t,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return S.TranslationRecognitionEventArgs}});var C=jT();Object.defineProperty(t,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return C.TranslationSynthesisEventArgs}});var P=vC();Object.defineProperty(t,"TranslationRecognitionResult",{enumerable:!0,get:function(){return P.TranslationRecognitionResult}});var R=Gc;Object.defineProperty(t,"TranslationSynthesisResult",{enumerable:!0,get:function(){return R.TranslationSynthesisResult}});var _=fC;Object.defineProperty(t,"ResultReason",{enumerable:!0,get:function(){return _.ResultReason}});var I=LT();Object.defineProperty(t,"SpeechConfig",{enumerable:!0,get:function(){return I.SpeechConfig}}),Object.defineProperty(t,"SpeechConfigImpl",{enumerable:!0,get:function(){return I.SpeechConfigImpl}});var W=BT();Object.defineProperty(t,"SpeechTranslationConfig",{enumerable:!0,get:function(){return W.SpeechTranslationConfig}}),Object.defineProperty(t,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return W.SpeechTranslationConfigImpl}});var x=mC();Object.defineProperty(t,"PropertyCollection",{enumerable:!0,get:function(){return x.PropertyCollection}});var we=Qc;Object.defineProperty(t,"PropertyId",{enumerable:!0,get:function(){return we.PropertyId}});var Ct=FT();Object.defineProperty(t,"Recognizer",{enumerable:!0,get:function(){return Ct.Recognizer}});var ue=qT();Object.defineProperty(t,"SpeechRecognizer",{enumerable:!0,get:function(){return ue.SpeechRecognizer}});var Kn=UT();Object.defineProperty(t,"IntentRecognizer",{enumerable:!0,get:function(){return Kn.IntentRecognizer}});var bu=CC;Object.defineProperty(t,"VoiceProfileType",{enumerable:!0,get:function(){return bu.VoiceProfileType}});var Jn=$T();Object.defineProperty(t,"TranslationRecognizer",{enumerable:!0,get:function(){return Jn.TranslationRecognizer}});var Gn=WT();Object.defineProperty(t,"Translations",{enumerable:!0,get:function(){return Gn.Translations}});var k=wC;Object.defineProperty(t,"NoMatchReason",{enumerable:!0,get:function(){return k.NoMatchReason}});var z=HT();Object.defineProperty(t,"NoMatchDetails",{enumerable:!0,get:function(){return z.NoMatchDetails}});var L=Yc;Object.defineProperty(t,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return L.TranslationRecognitionCanceledEventArgs}});var X=KT();Object.defineProperty(t,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return X.IntentRecognitionCanceledEventArgs}});var se=Fs;Object.defineProperty(t,"CancellationDetailsBase",{enumerable:!0,get:function(){return se.CancellationDetailsBase}});var on=GT();Object.defineProperty(t,"CancellationDetails",{enumerable:!0,get:function(){return on.CancellationDetails}});var _t=_C;Object.defineProperty(t,"CancellationErrorCode",{enumerable:!0,get:function(){return _t.CancellationErrorCode}});var Qn=QT();Object.defineProperty(t,"ConnectionEventArgs",{enumerable:!0,get:function(){return Qn.ConnectionEventArgs}});var At=YT();Object.defineProperty(t,"ServiceEventArgs",{enumerable:!0,get:function(){return At.ServiceEventArgs}});var sn=RC();Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return sn.Connection}});var oP=Xc;Object.defineProperty(t,"PhraseListGrammar",{enumerable:!0,get:function(){return oP.PhraseListGrammar}});var sP=xd();Object.defineProperty(t,"DialogServiceConfig",{enumerable:!0,get:function(){return sP.DialogServiceConfig}});var aP=XT();Object.defineProperty(t,"BotFrameworkConfig",{enumerable:!0,get:function(){return aP.BotFrameworkConfig}});var cP=ZT();Object.defineProperty(t,"CustomCommandsConfig",{enumerable:!0,get:function(){return cP.CustomCommandsConfig}});var uP=t_();Object.defineProperty(t,"DialogServiceConnector",{enumerable:!0,get:function(){return uP.DialogServiceConnector}});var lP=Zc;Object.defineProperty(t,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return lP.ActivityReceivedEventArgs}});var pP=eu;Object.defineProperty(t,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return pP.TurnStatusReceivedEventArgs}});var dP=AC;Object.defineProperty(t,"ServicePropertyChannel",{enumerable:!0,get:function(){return dP.ServicePropertyChannel}});var hP=kC;Object.defineProperty(t,"ProfanityOption",{enumerable:!0,get:function(){return hP.ProfanityOption}});var vP=o_();Object.defineProperty(t,"BaseAudioPlayer",{enumerable:!0,get:function(){return vP.BaseAudioPlayer}});var fP=ru;Object.defineProperty(t,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return fP.ConnectionMessageEventArgs}});var gP=PC();Object.defineProperty(t,"ConnectionMessage",{enumerable:!0,get:function(){return gP.ConnectionMessage}});var mP=nu;Object.defineProperty(t,"VoiceProfile",{enumerable:!0,get:function(){return mP.VoiceProfile}});var rh=c_();Object.defineProperty(t,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return rh.VoiceProfileEnrollmentResult}}),Object.defineProperty(t,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return rh.VoiceProfileEnrollmentCancellationDetails}});var nh=u_();Object.defineProperty(t,"VoiceProfileResult",{enumerable:!0,get:function(){return nh.VoiceProfileResult}}),Object.defineProperty(t,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return nh.VoiceProfileCancellationDetails}});var yP=l_();Object.defineProperty(t,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return yP.VoiceProfilePhraseResult}});var SP=p_();Object.defineProperty(t,"VoiceProfileClient",{enumerable:!0,get:function(){return SP.VoiceProfileClient}});var CP=d_();Object.defineProperty(t,"SpeakerRecognizer",{enumerable:!0,get:function(){return CP.SpeakerRecognizer}});var PP=h_();Object.defineProperty(t,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return PP.SpeakerIdentificationModel}});var RP=v_();Object.defineProperty(t,"SpeakerVerificationModel",{enumerable:!0,get:function(){return RP.SpeakerVerificationModel}});var EP=f_();Object.defineProperty(t,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return EP.AutoDetectSourceLanguageConfig}});var wP=iu;Object.defineProperty(t,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return wP.AutoDetectSourceLanguageResult}});var IP=ou;Object.defineProperty(t,"SourceLanguageConfig",{enumerable:!0,get:function(){return IP.SourceLanguageConfig}});var Du=m_();Object.defineProperty(t,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return Du.SpeakerRecognitionResult}}),Object.defineProperty(t,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return Du.SpeakerRecognitionResultType}}),Object.defineProperty(t,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return Du.SpeakerRecognitionCancellationDetails}});var Fe=qd();Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return Fe.Conversation}}),Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return Fe.ConversationExpirationEventArgs}}),Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Fe.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return Fe.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return Fe.ConversationTranslationEventArgs}}),Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return Fe.ConversationTranslationResult}}),Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return Fe.ConversationTranslator}}),Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return Fe.ConversationTranscriber}}),Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Fe.ConversationTranscriptionResult}}),Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return Fe.Meeting}}),Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return Fe.MeetingTranscriber}}),Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return Fe.Participant}}),Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return Fe.ParticipantChangedReason}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return Fe.User}});var TP=Ud();Object.defineProperty(t,"Synthesizer",{enumerable:!0,get:function(){return TP.Synthesizer}});var _P=Dd;Object.defineProperty(t,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return _P.SpeechSynthesisOutputFormat}});var AP=D_();Object.defineProperty(t,"SpeechSynthesizer",{enumerable:!0,get:function(){return AP.SpeechSynthesizer}});var kP=au;Object.defineProperty(t,"SynthesisResult",{enumerable:!0,get:function(){return kP.SynthesisResult}});var OP=z_();Object.defineProperty(t,"SpeechSynthesisResult",{enumerable:!0,get:function(){return OP.SpeechSynthesisResult}});var MP=cu;Object.defineProperty(t,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return MP.SpeechSynthesisEventArgs}});var bP=uu;Object.defineProperty(t,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return bP.SpeechSynthesisWordBoundaryEventArgs}});var DP=lu;Object.defineProperty(t,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return DP.SpeechSynthesisBookmarkEventArgs}});var NP=pu;Object.defineProperty(t,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return NP.SpeechSynthesisVisemeEventArgs}});var zP=LC;Object.defineProperty(t,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return zP.SpeechSynthesisBoundaryType}});var jP=F_();Object.defineProperty(t,"SynthesisVoicesResult",{enumerable:!0,get:function(){return jP.SynthesisVoicesResult}});var xP=BC;Object.defineProperty(t,"VoiceInfo",{enumerable:!0,get:function(){return xP.VoiceInfo}});var LP=du;Object.defineProperty(t,"SpeakerAudioDestination",{enumerable:!0,get:function(){return LP.SpeakerAudioDestination}});var BP=W_();Object.defineProperty(t,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return BP.ConversationTranscriptionCanceledEventArgs}});var FP=H_();Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return FP.MeetingTranscriptionCanceledEventArgs}});var qP=FC;Object.defineProperty(t,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return qP.PronunciationAssessmentGradingSystem}});var UP=qC;Object.defineProperty(t,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return UP.PronunciationAssessmentGranularity}});var $P=V_();Object.defineProperty(t,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return $P.PronunciationAssessmentConfig}});var WP=K_();Object.defineProperty(t,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return WP.PronunciationAssessmentResult}});var HP=Bd;Object.defineProperty(t,"LanguageIdMode",{enumerable:!0,get:function(){return HP.LanguageIdMode}});var VP=J_();Object.defineProperty(t,"AvatarConfig",{enumerable:!0,get:function(){return VP.AvatarConfig}});var KP=WC;Object.defineProperty(t,"AvatarEventArgs",{enumerable:!0,get:function(){return KP.AvatarEventArgs}});var JP=G_();Object.defineProperty(t,"AvatarSynthesizer",{enumerable:!0,get:function(){return JP.AvatarSynthesizer}});var ih=xn;Object.defineProperty(t,"AvatarVideoFormat",{enumerable:!0,get:function(){return ih.AvatarVideoFormat}}),Object.defineProperty(t,"Coordinate",{enumerable:!0,get:function(){return ih.Coordinate}});var GP=X_();Object.defineProperty(t,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return GP.AvatarWebRTCConnectionResult}});var QP=Z_();Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return QP.Diagnostics}});var YP=Md;Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return YP.LogLevel}})}(ml)),ml}var pg;function eA(){if(pg)return di;pg=1,Object.defineProperty(di,"__esModule",{value:!0}),di.ProxyInfo=void 0;const t=E();let e=class VC{constructor(n,o,s,a){this.privProxyHostName=n,this.privProxyPort=o,this.privProxyUserName=s,this.privProxyPassword=a}static fromParameters(n){return new VC(n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyPort),10),n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName),n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(n){return this.fromParameters(n.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return di.ProxyInfo=e,di}var KC={};const tA=new Set(["json","buffer","string"]);var rA=t=>(...e)=>{const r=new Set;let n,o,s,a="";return e.forEach(i=>{if(typeof i=="string")if(i.toUpperCase()===i)if(n){const c=`Can't set method to ${i}, already set to ${n}.`;throw new Error(c)}else n=i;else if(i.startsWith("http:")||i.startsWith("https:"))a=i;else if(tA.has(i))o=i;else throw new Error(`Unknown encoding, ${i}`);else if(typeof i=="number")r.add(i);else if(typeof i=="object")if(Array.isArray(i)||i instanceof Set)i.forEach(c=>r.add(c));else{if(s)throw new Error("Cannot set headers twice.");s=i}else throw new Error(`Unknown type: ${typeof i}`)}),n||(n="GET"),r.size===0&&r.add(200),t(r,n,o,s,a)};const nA=rA;class $d extends Error{constructor(e,...r){super(...r),Error.captureStackTrace&&Error.captureStackTrace(this,$d),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);let n;Object.defineProperty(this,"responseBody",{get:()=>(n||(n=this.arrayBuffer()),n)}),this.headers={};for(const[s,a]of e.headers.entries())this.headers[s.toLowerCase()]=a}}const iA=(t,e,r,n,o)=>async(s,a,i={})=>{s=o+(s||"");let c=new URL(s);if(n||(n={}),c.username&&(n.Authorization="Basic "+btoa(c.username+":"+c.password),c=new URL(c.protocol+"//"+c.host+c.pathname+c.search)),c.protocol!=="https:"&&c.protocol!=="http:")throw new Error(`Unknown protocol, ${c.protocol}`);if(a&&!(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="string"))if(typeof a=="object")a=JSON.stringify(a),n["Content-Type"]="application/json";else throw new Error("Unknown body type.");i=new Headers({...n||{},...i});const u=await fetch(c,{method:e,headers:i,body:a});if(u.statusCode=u.status,!t.has(u.status))throw new $d(u);return r==="json"?u.json():r==="buffer"?u.arrayBuffer():r==="string"?u.text():u};var oA=nA(iA);(function(t){var e=F&&F.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.RestMessageAdapter=t.RestRequestType=void 0;const r=e(oA),n=b();var o;(function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"})(o=t.RestRequestType||(t.RestRequestType={}));class s{constructor(i){if(!i)throw new n.ArgumentNullError("configParams");this.privHeaders=i.headers,this.privIgnoreCache=i.ignoreCache}static extractHeaderValue(i,c){let u="";try{const l=c.trim().split(/[\r\n]+/),p={};l.forEach(d=>{const h=d.split(": "),v=h.shift().toLowerCase(),m=h.join(": ");p[v]=m}),u=p[i.toLowerCase()]}catch{}return u}set options(i){this.privHeaders=i.headers,this.privIgnoreCache=i.ignoreCache}setHeaders(i,c){this.privHeaders[i]=c}request(i,c,u={},l=null){const p=new n.Deferred,d=i===o.File?"POST":i,h=(m,y={})=>{const f=m;return{data:JSON.stringify(y),headers:JSON.stringify(m.headers),json:y,ok:m.statusCode>=200&&m.statusCode<300,status:m.statusCode,statusText:y.error?y.error.message:f.statusText?f.statusText:f.statusMessage}},v=m=>{const y=r.default(c,d,this.privHeaders,200,201,202,204,400,401,402,403,404),f=this.queryParams(u)===""?"":`?${this.queryParams(u)}`;y(f,m).then(async g=>{if(i===o.Delete||g.statusCode===204)p.resolve(h(g));else try{const S=await g.json();p.resolve(h(g,S))}catch{p.resolve(h(g))}}).catch(g=>{p.reject(g)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),i===o.Post&&l&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),v(l),p.promise}queryParams(i={}){return Object.keys(i).map(c=>encodeURIComponent(c)+"="+encodeURIComponent(i[c])).join("&")}}t.RestMessageAdapter=s})(KC);var Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.RestConfigBase=void 0;class vr{static get requestOptions(){return vr.privDefaultRequestOptions}static get configParams(){return vr.privDefaultParams}static get restErrors(){return vr.privRestErrors}}Us.RestConfigBase=vr;vr.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};vr.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};vr.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var dg;function fe(){return dg||(dg=1,function(t){var e=F&&F.__createBinding||(Object.create?function(n,o,s,a){a===void 0&&(a=s),Object.defineProperty(n,a,{enumerable:!0,get:function(){return o[s]}})}:function(n,o,s,a){a===void 0&&(a=s),n[a]=o[s]}),r=F&&F.__exportStar||function(n,o){for(var s in n)s!=="default"&&!o.hasOwnProperty(s)&&e(o,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Fc,t),r(rC,t),r(rT(),t),r(nT(),t),r(qc,t),r(Uc,t),r(xs,t),r($c,t),r(eA(),t),r(KC,t),r(Us,t)}(vl)),vl}var hg;function sA(){if(hg)return ui;hg=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.IntentConnectionFactory=void 0;const t=fe(),e=E(),r=St(),n=M(),o=ve;let s=class extends r.ConnectionFactoryBase{create(i,c,u){let l=i.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!l){const v=i.parameters.getProperty(e.PropertyId.SpeechServiceConnection_IntentRegion),m=r.ConnectionFactoryBase.getHostSuffix(v);l=i.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+v+".sr.speech"+m)+"/speech/recognition/interactive/cognitiveservices/v1"}const p={format:"simple",language:i.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(i,p,l);const d={};c.token!==void 0&&c.token!==""&&(d[c.headerName]=c.token),d[o.HeaderNames.ConnectionId]=u,i.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,l);const h=i.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(l,p,d,new n.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(i),h,u)}getSpeechRegionFromIntentRegion(i){switch(i){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return i}}};return ui.IntentConnectionFactory=s,ui}var jr={},vg;function aA(){if(vg)return jr;vg=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.VoiceProfileConnectionFactory=jr.SpeakerRecognitionConnectionFactory=void 0;const t=fe(),e=E(),r=St(),n=M(),o=ve;class s extends r.ConnectionFactoryBase{create(u,l,p,d){let h=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!h){const f=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region),g=r.ConnectionFactoryBase.getHostSuffix(f),S=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`wss://${f}.spr-frontend.speech${g}`),C=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");h=`${S}/speaker/ws/${this.scenarioToPath(C)}/${p}`}const v={format:"simple",language:u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(u,v,h);const m={};l.token!==void 0&&l.token!==""&&(m[l.headerName]=l.token),m[o.HeaderNames.ConnectionId]=d,m[o.HeaderNames.SpIDAuthKey]=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Key),u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,h);const y=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(h,v,m,new n.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),y,d)}scenarioToPath(u){switch(u){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let a=class extends s{create(u,l,p){return super.create(u,l,"recognition",p)}};jr.SpeakerRecognitionConnectionFactory=a;class i extends s{create(u,l,p){return super.create(u,l,"profile",p)}}return jr.VoiceProfileConnectionFactory=i,jr}var hu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEndedEvent=t.RecognitionCompletionStatus=t.RecognitionStartedEvent=t.ConnectingToServiceEvent=t.ListeningStartedEvent=t.RecognitionTriggeredEvent=t.SpeechRecognitionEvent=void 0;const e=b();class r extends e.PlatformEvent{constructor(l,p,d,h=e.EventType.Info){super(l,h),this.privRequestId=p,this.privSessionId=d}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}t.SpeechRecognitionEvent=r;class n extends r{constructor(l,p,d,h){super("RecognitionTriggeredEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}t.RecognitionTriggeredEvent=n;class o extends r{constructor(l,p,d,h){super("ListeningStartedEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}t.ListeningStartedEvent=o;class s extends r{constructor(l,p,d){super("ConnectingToServiceEvent",l,d),this.privAuthFetchEventid=p}get authFetchEventid(){return this.privAuthFetchEventid}}t.ConnectingToServiceEvent=s;class a extends r{constructor(l,p,d,h,v){super("RecognitionStartedEvent",l,v),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}t.RecognitionStartedEvent=a;var i;(function(u){u[u.Success=0]="Success",u[u.AudioSourceError=1]="AudioSourceError",u[u.AudioSourceTimeout=2]="AudioSourceTimeout",u[u.AuthTokenFetchError=3]="AuthTokenFetchError",u[u.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",u[u.UnAuthorized=5]="UnAuthorized",u[u.ConnectTimeout=6]="ConnectTimeout",u[u.ConnectError=7]="ConnectError",u[u.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",u[u.UnknownError=9]="UnknownError"})(i=t.RecognitionCompletionStatus||(t.RecognitionCompletionStatus={}));class c extends r{constructor(l,p,d,h,v,m,y,f){super("RecognitionEndedEvent",l,v,y===i.Success?e.EventType.Info:e.EventType.Error),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h,this.privStatus=y,this.privError=f,this.privServiceTag=m}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}t.RecognitionEndedEvent=c})(hu);var fo={},Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.SpeechConnectionMessage=void 0;const Rl=b(),bt=ve;class Wd extends Rl.ConnectionMessage{constructor(e,r,n,o,s,a,i,c){if(!r)throw new Rl.ArgumentNullError("path");if(!n)throw new Rl.ArgumentNullError("requestId");const u={};if(u[bt.HeaderNames.Path]=r,u[bt.HeaderNames.RequestId]=n,u[bt.HeaderNames.RequestTimestamp]=new Date().toISOString(),o&&(u[bt.HeaderNames.ContentType]=o),a&&(u[bt.HeaderNames.RequestStreamId]=a),i)for(const l in i)l&&(u[l]=i[l]);c?super(e,s,u,c):super(e,s,u),this.privPath=r,this.privRequestId=n,this.privContentType=o,this.privStreamId=a,this.privAdditionalHeaders=i}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let r=null,n=null,o=null,s=null;const a={};if(e.headers)for(const i in e.headers)i&&(i.toLowerCase()===bt.HeaderNames.Path.toLowerCase()?r=e.headers[i]:i.toLowerCase()===bt.HeaderNames.RequestId.toLowerCase()?n=e.headers[i]:i.toLowerCase()===bt.HeaderNames.ContentType.toLowerCase()?o=e.headers[i]:i.toLowerCase()===bt.HeaderNames.RequestStreamId.toLowerCase()?s=e.headers[i]:a[i]=e.headers[i]);return new Wd(e.messageType,r,n,o,e.body,s,a,e.id)}}Kt.SpeechConnectionMessage=Wd;var fg;function cA(){if(fg)return fo;fg=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.ServiceRecognizerBase=void 0;const t=fe(),e=b(),r=E(),n=M(),o=Kt;let s=class Go{constructor(i,c,u,l,p){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!i)throw new e.ArgumentNullError("authentication");if(!c)throw new e.ArgumentNullError("connectionFactory");if(!u)throw new e.ArgumentNullError("audioSource");if(!l)throw new e.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=l.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=i,this.privConnectionFactory=c,this.privAudioSource=u,this.privRecognizerConfig=l,this.privIsDisposed=!1,this.privRecognizer=p,this.privRequestSession=new n.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privDynamicGrammar=new n.DynamicGrammarBuilder,this.privSpeechContext=new n.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new n.AgentConfig,this.privRecognizerConfig.parameters.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=e.Timeout.setTimeout:typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),this.connectionEvents.attach(h=>{if(h.name==="ConnectionClosedEvent"){const v=h;(v.statusCode===1003||v.statusCode===1007||v.statusCode===1002||v.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(r.CancellationReason.Error,v.statusCode===1007?r.CancellationErrorCode.BadRequestParameters:r.CancellationErrorCode.ConnectionFailure,`${v.reason} websocket error code: ${v.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=e.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const i=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(i!==void 0){const c=i.split(","),u=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),l=u!==void 0?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:l},output:{interimResults:{mode:"Always"}},targetLanguages:c}),u!==void 0){const p={};for(const d of c)p[d]=u;this.privSpeechContext.setSection("synthesis",{defaultVoices:p})}}}setSpeechSegmentationTimeoutJson(){const i=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(i!==void 0){const c=this.recognitionMode===n.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===n.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",u=parseInt(i,10),l=this.privSpeechContext.getSection("phraseDetection");l.mode=c,l[c]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:u}},this.privSpeechContext.setSection("phraseDetection",l)}}setLanguageIdJson(){const i=this.privSpeechContext.getSection("phraseDetection");if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const u=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let l;this.privRecognizerConfig.languageIdMode==="Continuous"?l="DetectContinuous":l="DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:u,mode:l,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const p=this.privRecognizerConfig.sourceLanguageModels;p!==void 0&&(i.customModels=p,i.onInterim={action:"None"},i.onSuccess={action:"None"})}this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&(i.onInterim={action:"Translate"},i.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",i)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(n.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()===r.OutputFormat[r.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(i){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.ConversationTranslator_Token,i)}set voiceProfileType(i){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.SpeechServiceConnection_SpeakerIdMode,i)}set authentication(i){this.privAuthentication=i}isDisposed(){return this.privIsDisposed}async dispose(i){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise!==void 0)try{await(await this.privConnectionConfigurationPromise).dispose(i)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(i,c,u){if(this.recognizeOverride!==void 0){await this.recognizeOverride(i,c,u);return}this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=i,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=c,this.privErrorCallback=u,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const l=this.connectImpl();let p;try{const v=await this.audioSource.attach(this.privRequestSession.audioNodeId),m=await this.audioSource.format,y=await this.audioSource.deviceInfo;this.privIsLiveAudio=y.type&&y.type===n.type.Microphones,p=new t.ReplayableAudioNode(v,m.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(p,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:y}}catch(v){throw await this.privRequestSession.onStopRecognizing(),v}try{await l}catch(v){await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,v);return}const d=new r.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.receiveMessage(),this.sendAudio(p).catch(async v=>{await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,v)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(i,c){this.connectImpl().then(()=>{try{i&&i()}catch(u){c&&c(u)}},u=>{try{c&&c(u)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(i){}async sendNetworkMessage(i,c){const u=typeof c=="string"?e.MessageType.Text:e.MessageType.Binary,l=typeof c=="string"?"application/json":"";return(await this.fetchConnection()).send(new o.SpeechConnectionMessage(u,i,this.privRequestSession.requestId,l,c))}set activityTemplate(i){this.privActivityTemplate=i}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(i){this.privExpectContentAssessmentResponse=i}async sendTelemetryData(){const i=this.privRequestSession.getTelemetry();if(Go.telemetryDataEnabled!==!0||this.privIsDisposed||i===null)return;if(Go.telemetryData)try{Go.telemetryData(i)}catch{}await(await this.fetchConnection()).send(new o.SpeechConnectionMessage(e.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",i))}async cancelRecognitionLocal(i,c,u){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i,c,u))}async receiveMessage(){try{if(this.privIsDisposed)return;let i=await this.fetchConnection();const c=await i.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!c)return this.receiveMessage();this.privServiceHasSentMessage=!0;const u=o.SpeechConnectionMessage.fromConnectionMessage(c);if(u.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(u.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const l=n.SpeechDetected.fromJSON(u.textBody),p=new r.RecognitionEventArgs(l.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,p);break;case"speech.enddetected":let d;u.textBody.length>0?d=u.textBody:d="{ Offset: 0 }";const h=n.SpeechDetected.fromJSON(d),v=new r.RecognitionEventArgs(h.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,v);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(r.CancellationReason.EndOfStream,r.CancellationErrorCode.NoError,void 0));const m=new r.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,m);return}else i=await this.fetchConnection(),await this.sendPrePayloadJSON(i);break;default:await this.processTypeSpecificMessages(u)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(u.path.toLowerCase(),u.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const c=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(c)}sendSpeechContext(i,c){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const u=this.speechContext.toJSON();if(c&&this.privRequestSession.onSpeechContext(),u)return i.send(new o.SpeechConnectionMessage(e.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",u))}noOp(){}async sendPrePayloadJSON(i,c=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(i);await this.sendSpeechContext(i,c),await this.sendWaveHeader(i)}async sendWaveHeader(i){const c=await this.audioSource.format;return i.send(new o.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",c.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(i=>i.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(i,c,u){if(c.onSpeechContext(),Go.telemetryDataEnabled!==!0){const p={context:{system:JSON.parse(u).context.system}};u=JSON.stringify(p)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const l=JSON.parse(u);l.context.DisableReferenceChannel="True",l.context.MicSpec="1_0_0",u=JSON.stringify(l)}if(u)return i.send(new o.SpeechConnectionMessage(e.MessageType.Text,"speech.config",c.requestId,"application/json",u))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(i=>i.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(i){const c=await this.audioSource.format;this.privAverageBytesPerMs=c.avgBytesPerSec/1e3;let u=Date.now();const l=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),p=c.avgBytesPerSec/1e3*parseInt(l,10),d=this.privRequestSession.recogNumber,h=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d){const v=await this.fetchConnection(),m=await i.read();if(this.privRequestSession.isSpeechEnded)return;let y,f;if(!m||m.isEnd?(y=null,f=0):(y=m.buffer,this.privRequestSession.onAudioSent(y.byteLength),p>=this.privRequestSession.bytesSent?f=0:f=Math.max(0,u-Date.now())),f!==0&&await this.delay(f),y!==null&&(u=Date.now()+y.byteLength*1e3/(c.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d)if(v.send(new o.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,y)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),m!=null&&m.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return h()}};return h()}async retryableConnect(){let i=!1;this.privAuthFetchEventId=e.createNoDashGuid();const c=this.privRequestSession.sessionId;this.privConnectionId=c!==void 0?c:e.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let u=0,l="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const d=await(i?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const h=this.privConnectionFactory.create(this.privRecognizerConfig,d,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(h.events),h.events.attach(m=>{this.connectionEvents.onEvent(m)});const v=await h.open();if(v.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(v.statusCode),Promise.resolve(h);v.statusCode===1006&&(i=!0),u=v.statusCode,l=v.reason,this.privRequestSession.onRetryConnection()}return await this.privRequestSession.onConnectionEstablishCompleted(u,l),Promise.reject(`Unable to contact server. StatusCode: ${u}, ${this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${l}`)}delay(i){return new Promise(c=>this.privSetTimeout(c,i))}writeBufferToConsole(i){let c="Buffer Size: ";if(i===null)c+="null";else{const u=new Uint8Array(i);c+=`${i.byteLength}\r
`;for(let l=0;l<i.byteLength;l++)c+=u[l].toString(16).padStart(2,"0")+" ",(l+1)%16===0&&(console.info(c),c="")}console.info(c)}async sendFinalAudio(){await(await this.fetchConnection()).send(new o.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const i=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(i):(await this.sendSpeechServiceConfig(i,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(i,!1),i)}};return fo.ServiceRecognizerBase=s,s.telemetryDataEnabled=!0,fo}var go={},gg;function uA(){if(gg)return go;gg=1,Object.defineProperty(go,"__esModule",{value:!0}),go.ConversationServiceRecognizer=void 0;const t=E(),e=M();let r=class extends e.ServiceRecognizerBase{constructor(o,s,a,i,c){super(o,s,a,i,c),this.handleSpeechPhraseMessage=async u=>this.handleSpeechPhrase(u),this.handleSpeechHypothesisMessage=u=>this.handleSpeechHypothesis(u)}processTypeSpecificMessages(o){}handleRecognizedCallback(o,s,a){}handleRecognizingCallback(o,s,a){}async processSpeechMessages(o){let s=!1;switch(o.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(o.textBody),s=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(o.textBody),s=!0;break}return s}cancelRecognition(o,s,a,i,c){}async handleSpeechPhrase(o){const s=e.SimpleSpeechPhrase.fromJSON(o),a=e.EnumTranslation.implTranslateRecognitionResult(s.RecognitionStatus);let i;const c=new t.PropertyCollection;c.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o);const u=s.Offset+this.privRequestSession.currentTurnAudioOffset;let l=u;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+s.Offset+s.Duration),t.ResultReason.Canceled===a){const p=e.EnumTranslation.implTranslateCancelResult(s.RecognitionStatus),d=e.EnumTranslation.implTranslateCancelErrorCode(s.RecognitionStatus);await this.cancelRecognitionLocal(p,d,e.EnumTranslation.implTranslateErrorDetails(d))}else if(!(this.privRequestSession.isSpeechEnded&&a===t.ResultReason.NoMatch&&s.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])i=new t.SpeechRecognitionResult(this.privRequestSession.requestId,a,s.DisplayText,s.Duration,u,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,o,c);else{const p=e.DetailedSpeechPhrase.fromJSON(o),d=p.Offset+this.privRequestSession.currentTurnAudioOffset,h=p.getJsonWithCorrectedOffsets(d);i=new t.SpeechRecognitionResult(this.privRequestSession.requestId,a,p.Text,p.Duration,d,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,h,c),l=i.offset}this.handleRecognizedCallback(i,l,this.privRequestSession.sessionId)}}handleSpeechHypothesis(o){const s=e.SpeechHypothesis.fromJSON(o),a=s.Offset+this.privRequestSession.currentTurnAudioOffset,i=new t.PropertyCollection;i.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o);const c=new t.SpeechRecognitionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,s.Text,s.Duration,a,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,o,i);this.privRequestSession.onHypothesis(a),this.handleRecognizingCallback(c,s.Duration,this.privRequestSession.sessionId)}};return go.ConversationServiceRecognizer=r,go}var El={},mg;function lA(){return mg||(mg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerConfig=t.SpeechResultFormat=t.RecognitionMode=void 0;const e=E(),r=M();var n;(function(s){s[s.Interactive=0]="Interactive",s[s.Conversation=1]="Conversation",s[s.Dictation=2]="Dictation"})(n=t.RecognitionMode||(t.RecognitionMode={})),function(s){s[s.Simple=0]="Simple",s[s.Detailed=1]="Detailed"}(t.SpeechResultFormat||(t.SpeechResultFormat={}));class o{constructor(a,i){this.privSpeechServiceConfig=a||new r.SpeechServiceConfig(new r.Context(null)),this.privParameters=i,this.privMaxRetryCount=parseInt(i.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=i.getProperty(e.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(a){this.privRecognitionMode=a,this.privRecognitionActivityTimeout=a===n.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=n[a]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==n.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const a=[];let i=!1;if(this.autoDetectSourceLanguages!==void 0)for(const c of this.autoDetectSourceLanguages.split(",")){const u=c+e.PropertyId.SpeechServiceConnection_EndpointId.toString(),l=this.parameters.getProperty(u,void 0);l!==void 0?(a.push({language:c,endpoint:l}),i=!0):a.push({language:c,endpoint:""})}return i?a:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(a){this.privEnableSpeakerId=a}}t.RecognizerConfig=o}(El)),El}var JC={};Object.defineProperty(JC,"__esModule",{value:!0});var vu={};Object.defineProperty(vu,"__esModule",{value:!0});vu.WebsocketMessageFormatter=void 0;const tt=b(),yg=`\r
`;class pA{toConnectionMessage(e){const r=new tt.Deferred;try{if(e.messageType===tt.MessageType.Text){const n=e.textContent;let o={},s=null;if(n){const a=n.split(`\r
\r
`);a&&a.length>0&&(o=this.parseHeaders(a[0]),a.length>1&&(s=a[1]))}r.resolve(new tt.ConnectionMessage(e.messageType,s,o,e.id))}else if(e.messageType===tt.MessageType.Binary){const n=e.binaryContent;let o={},s=null;if(!n||n.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const a=new DataView(n),i=a.getInt16(0);if(n.byteLength<i+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let u=0;u<i;u++)c+=String.fromCharCode(a.getInt8(u+2));o=this.parseHeaders(c),n.byteLength>i+2&&(s=n.slice(2+i)),r.resolve(new tt.ConnectionMessage(e.messageType,s,o,e.id))}}catch(n){r.reject(`Error formatting the message. Error: ${n}`)}return r.promise}fromConnectionMessage(e){const r=new tt.Deferred;try{if(e.messageType===tt.MessageType.Text){const n=`${this.makeHeaders(e)}${yg}${e.textBody?e.textBody:""}`;r.resolve(new tt.RawWebsocketMessage(tt.MessageType.Text,n,e.id))}else if(e.messageType===tt.MessageType.Binary){const n=this.makeHeaders(e),o=e.binaryBody,s=this.stringToArrayBuffer(n),a=new Int8Array(s),i=a.byteLength,c=new Int8Array(2+i+(o?o.byteLength:0));if(c[0]=i>>8&255,c[1]=i&255,c.set(a,2),o){const l=new Int8Array(o);c.set(l,2+i)}const u=c.buffer;r.resolve(new tt.RawWebsocketMessage(tt.MessageType.Binary,u,e.id))}}catch(n){r.reject(`Error formatting the message. ${n}`)}return r.promise}makeHeaders(e){let r="";if(e.headers)for(const n in e.headers)n&&(r+=`${n}: ${e.headers[n]}${yg}`);return r}parseHeaders(e){const r={};if(e){const n=e.match(/[^\r\n]+/g);if(r){for(const o of n)if(o){const s=o.indexOf(":"),a=s>0?o.substr(0,s).trim().toLowerCase():o,i=s>0&&o.length>s+1?o.substr(s+1).trim():"";r[a]=i}}}return r}stringToArrayBuffer(e){const r=new ArrayBuffer(e.length),n=new DataView(r);for(let o=0;o<e.length;o++)n.setUint8(o,e.charCodeAt(o));return r}}vu.WebsocketMessageFormatter=pA;var mo={},Sg;function dA(){if(Sg)return mo;Sg=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.SpeechConnectionFactory=void 0;const t=fe(),e=M(),r=E(),n=St(),o=M(),s=ve,a=yt;let i=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(u,l,p){let d=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,void 0),v=n.ConnectionFactoryBase.getHostSuffix(h),m=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+v),y={},f=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(f?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(y[a.QueryParameterNames.CustomSpeechDeploymentId]=f):g&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(y[a.QueryParameterNames.Language]=g),(!d||d.search(a.QueryParameterNames.Format)===-1)&&(y[a.QueryParameterNames.Format]=u.parameters.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()),u.autoDetectSourceLanguages!==void 0&&(y[a.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(u,y,d),!d)switch(u.recognitionMode){case o.RecognitionMode.Conversation:u.parameters.getProperty(e.ForceDictationPropertyName,"false")==="true"?d=m+this.dictationRelativeUri:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${m}${this.universalUri}${u.recognitionEndpointVersion}`:d=m+this.conversationRelativeUri;break;case o.RecognitionMode.Dictation:d=m+this.dictationRelativeUri;break;default:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${m}${this.universalUri}${u.recognitionEndpointVersion}`:d=m+this.interactiveRelativeUri;break}const S={};l.token!==void 0&&l.token!==""&&(S[l.headerName]=l.token),S[s.HeaderNames.ConnectionId]=p;const C=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",P=new t.WebsocketConnection(d,y,S,new o.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),C,p),R=P.uri;return u.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,R),P}};return mo.SpeechConnectionFactory=i,mo}var yo={},Cg;function hA(){if(Cg)return yo;Cg=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.ConversationTranscriberConnectionFactory=void 0;const t=fe(),e=E(),r=M(),n=St(),o=M(),s=ve,a=yt;let i=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(u,l,p){let d=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),v=n.ConnectionFactoryBase.getHostSuffix(h),m=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+v),y={},f=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);f?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(y[a.QueryParameterNames.CustomSpeechDeploymentId]=f):g&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(y[a.QueryParameterNames.Language]=g),u.autoDetectSourceLanguages!==void 0&&(y[a.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(u,y,d),d||(d=`${m}${this.universalUri}`);const S={};l.token!==void 0&&l.token!==""&&(S[l.headerName]=l.token),S[s.HeaderNames.ConnectionId]=p;const C=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",P=new t.WebsocketConnection(d,y,S,new o.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),C,p),R=P.uri;return u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,R),P}setV2UrlParams(u,l,p){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,a.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,a.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,a.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,a.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,a.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,a.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,a.QueryParameterNames.StableIntermediateThreshold]]).forEach((v,m)=>{this.setUrlParameter(m,v,u,l,p)});const h=JSON.parse(u.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(v=>{l[v]=h[v]})}};return yo.ConversationTranscriberConnectionFactory=i,yo}var So={},Pg;function vA(){if(Pg)return So;Pg=1,Object.defineProperty(So,"__esModule",{value:!0}),So.TranscriberConnectionFactory=void 0;const t=fe(),e=E(),r=St(),n=M(),o=ve,s=yt;let a=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(c,u,l){let p=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"centralus"),h=r.ConnectionFactoryBase.getHostSuffix(d),v="wss://transcribe."+d+".cts.speech"+h+this.multiaudioRelativeUri,m=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,v),y={};this.setQueryParams(y,c,p),p||(p=m);const f={};u.token!==void 0&&u.token!==""&&(f[u.headerName]=u.token),f[o.HeaderNames.ConnectionId]=l,c.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,p);const g=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(p,y,f,new n.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(c),g,l)}setQueryParams(c,u,l){const p=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),d=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);p&&!(s.QueryParameterNames.CustomSpeechDeploymentId in c)&&(c[s.QueryParameterNames.CustomSpeechDeploymentId]=p),d&&!(s.QueryParameterNames.Language in c)&&(c[s.QueryParameterNames.Language]=d);const h=u.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",v=u.parameters.getProperty(n.OutputFormatPropertyName,e.OutputFormat[e.OutputFormat.Simple])!==e.OutputFormat[e.OutputFormat.Simple];(h||v)&&(c[s.QueryParameterNames.Format]=e.OutputFormat[e.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(u,c,l)}};return So.TranscriberConnectionFactory=a,So}var Co={},Rg;function fA(){if(Rg)return Co;Rg=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.TranslationConnectionFactory=void 0;const t=fe(),e=qs,r=E(),n=St(),o=M(),s=ve,a=yt;let i=class extends n.ConnectionFactoryBase{create(u,l,p){const d=this.getEndpointUrl(u),h={};u.autoDetectSourceLanguages!==void 0&&(h[a.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(h,u,d);const v={};l.token!==void 0&&l.token!==""&&(v[l.headerName]=l.token),v[s.HeaderNames.ConnectionId]=p,u.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,d);const m=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(d,h,v,new o.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),m,p)}getEndpointUrl(u,l){const p=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),d=n.ConnectionFactoryBase.getHostSuffix(p);let h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);return h||(u.autoDetectSourceLanguages!==void 0?h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+d)+"/speech/universal/v2":h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+d)+"/speech/translation/cognitiveservices/v1"),l===!0?h:e.StringUtils.formatString(h,{region:p})}setQueryParams(u,l,p){u.from=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),u.to=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages),u.scenario=l.recognitionMode===o.RecognitionMode.Interactive?"interactive":l.recognitionMode===o.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(l,u,p),this.setUrlParameter(r.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,a.QueryParameterNames.StableTranslation,l,u,p);const d=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);d!==void 0&&(u.voice=d,u.features="texttospeech")}};return Co.TranslationConnectionFactory=i,Co}var Po={},Eg;function gA(){if(Eg)return Po;Eg=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.EnumTranslation=void 0;const t=E(),e=M();let r=class{static implTranslateRecognitionResult(o,s=!1){let a=t.ResultReason.Canceled;switch(o){case e.RecognitionStatus.Success:a=t.ResultReason.RecognizedSpeech;break;case e.RecognitionStatus.EndOfDictation:a=s?t.ResultReason.RecognizedSpeech:t.ResultReason.NoMatch;break;case e.RecognitionStatus.NoMatch:case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:a=t.ResultReason.NoMatch;break;case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:a=t.ResultReason.Canceled;break}return a}static implTranslateCancelResult(o){let s=t.CancellationReason.EndOfStream;switch(o){case e.RecognitionStatus.Success:case e.RecognitionStatus.EndOfDictation:case e.RecognitionStatus.NoMatch:s=t.CancellationReason.EndOfStream;break;case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:s=t.CancellationReason.Error;break}return s}static implTranslateCancelErrorCode(o){let s=t.CancellationErrorCode.NoError;switch(o){case e.RecognitionStatus.Error:s=t.CancellationErrorCode.ServiceError;break;case e.RecognitionStatus.TooManyRequests:s=t.CancellationErrorCode.TooManyRequests;break;case e.RecognitionStatus.BadRequest:s=t.CancellationErrorCode.BadRequestParameters;break;case e.RecognitionStatus.Forbidden:s=t.CancellationErrorCode.Forbidden;break;default:s=t.CancellationErrorCode.NoError;break}return s}static implTranslateErrorDetails(o){let s="The speech service encountered an internal error and could not continue.";switch(o){case t.CancellationErrorCode.Forbidden:s="The recognizer is using a free subscription that ran out of quota.";break;case t.CancellationErrorCode.BadRequestParameters:s="Invalid parameter or unsupported audio format in the request.";break;case t.CancellationErrorCode.TooManyRequests:s="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return s}};return Po.EnumTranslation=r,Po}var GC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionStatus=t.SynthesisStatus=void 0,function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(t.SynthesisStatus||(t.SynthesisStatus={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"}(t.RecognitionStatus||(t.RecognitionStatus={}))})(GC);var Ro={},wg;function mA(){if(wg)return Ro;wg=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.TranslationSynthesisEnd=void 0;const t=M();let e=class QC{constructor(n){this.privSynthesisEnd=JSON.parse(n),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=t.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=t.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(n){return new QC(n)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return Ro.TranslationSynthesisEnd=e,Ro}var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.TranslationHypothesis=void 0;const yA=D,SA=xc;class sc{constructor(e){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Translation.TranslationStatus=SA.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new sc(JSON.parse(e))}static fromTranslationResponse(e){yA.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");const r=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,r.Translation=e,new sc(r)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var e;return(e=this.privTranslationHypothesis.PrimaryLanguage)==null?void 0:e.Language}}fu.TranslationHypothesis=sc;var Eo={},Ig;function CA(){if(Ig)return Eo;Ig=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.TranslationPhrase=void 0;const t=D,e=M(),r=xc;let n=class bp{constructor(s){this.privTranslationPhrase=s,this.privTranslationPhrase.RecognitionStatus=e.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=r.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(s){return new bp(JSON.parse(s))}static fromTranslationResponse(s){t.Contracts.throwIfNullOrUndefined(s,"translationResponse");const a=s.SpeechPhrase;return s.SpeechPhrase=void 0,a.Translation=s,a.Text=a.DisplayText,new bp(a)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var s;return(s=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:s.Language}get Confidence(){var s;return(s=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:s.Confidence}get Translation(){return this.privTranslationPhrase.Translation}};return Eo.TranslationPhrase=n,Eo}var wo={},Tg;function PA(){if(Tg)return wo;Tg=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.TranslationServiceRecognizer=void 0;const t=b(),e=E(),r=M();let n=class extends r.ConversationServiceRecognizer{constructor(s,a,i,c,u){super(s,a,i,c,u),this.privTranslationRecognizer=u,this.connectionEvents.attach(l=>{l.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(s){const a=new e.PropertyCollection;let i=await this.processSpeechMessages(s);if(i)return!0;const c=async l=>{if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+l.Offset+l.Duration),l.RecognitionStatus===r.RecognitionStatus.Success){const p=this.fireEventForResult(l,a);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,p)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(p.result)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const p=r.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus),d=new e.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,p,l.Text,l.Duration,this.privRequestSession.currentTurnAudioOffset+l.Offset,l.Language,l.Confidence,void 0,s.textBody,a);if(p===e.ResultReason.Canceled){const h=r.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),v=r.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);await this.cancelRecognitionLocal(h,v,r.EnumTranslation.implTranslateErrorDetails(v))}else{if(!(this.privRequestSession.isSpeechEnded&&p===e.ResultReason.NoMatch&&l.RecognitionStatus!==r.RecognitionStatus.InitialSilenceTimeout)){const h=new e.TranslationRecognitionEventArgs(d,d.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(d)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}i=!0}},u=(l,p)=>{const d=this.fireEventForResult(l,p);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+d.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,d)}catch{}i=!0};switch(s.messageType===t.MessageType.Text&&a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"translation.hypothesis":u(r.TranslationHypothesis.fromJSON(s.textBody),a);break;case"translation.response":const l=JSON.parse(s.textBody);if(l.SpeechPhrase)await c(r.TranslationPhrase.fromTranslationResponse(l));else{const d=JSON.parse(s.textBody);d.SpeechHypothesis&&u(r.TranslationHypothesis.fromTranslationResponse(d),a)}break;case"translation.phrase":await c(r.TranslationPhrase.fromJSON(s.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(s.binaryBody,this.privRequestSession.sessionId),i=!0;break;case"audio.end":case"translation.synthesis.end":const p=r.TranslationSynthesisEnd.fromJSON(s.textBody);switch(p.SynthesisStatus){case r.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const d=new e.TranslationSynthesisResult(e.ResultReason.Canceled,void 0),h=new e.TranslationSynthesisEventArgs(d,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,h)}catch{}}if(this.privTranslationRecognizer.canceled){const d=new e.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,e.CancellationReason.Error,p.FailureReason,e.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,d)}catch{}}break;case r.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}i=!0;break}return i}cancelRecognition(s,a,i,c,u){const l=new e.PropertyCollection;if(l.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]),this.privTranslationRecognizer.canceled){const p=new e.TranslationRecognitionCanceledEventArgs(s,i,u,c,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new e.TranslationRecognitionResult(void 0,a,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(s,a,i){try{const c=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,i);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,c)}catch{}}handleRecognizedCallback(s,a,i){try{const c=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,i);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,c)}catch{}}fireEventForResult(s,a){let i;if(s.Translation.Translations!==void 0){i=new e.Translations;for(const v of s.Translation.Translations)i.set(v.Language,v.Text||v.DisplayText)}let c,u;s instanceof r.TranslationPhrase?(s.Translation&&s.Translation.TranslationStatus===t.TranslationStatus.Success?c=e.ResultReason.TranslatedSpeech:c=e.ResultReason.RecognizedSpeech,u=s.Confidence):c=e.ResultReason.TranslatingSpeech;const l=s.Language,p=s.Offset+this.privRequestSession.currentTurnAudioOffset,d=new e.TranslationRecognitionResult(i,this.privRequestSession.requestId,c,s.Text,s.Duration,p,l,u,s.Translation.FailureReason,JSON.stringify(s),a);return new e.TranslationRecognitionEventArgs(d,p,this.privRequestSession.sessionId)}sendSynthesisAudio(s,a){const i=s===void 0?e.ResultReason.SynthesizingAudioCompleted:e.ResultReason.SynthesizingAudio,c=new e.TranslationSynthesisResult(i,s),u=new e.TranslationSynthesisEventArgs(c,a);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,u)}catch{}}};return wo.TranslationServiceRecognizer=n,wo}var gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.SpeechDetected=void 0;class Hd{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new Hd(e)}get Offset(){return this.privSpeechStartDetected.Offset}}gu.SpeechDetected=Hd;var mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.SpeechHypothesis=void 0;class Vd{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new Vd(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}mu.SpeechHypothesis=Vd;var yu={};Object.defineProperty(yu,"__esModule",{value:!0});yu.SpeechKeyword=void 0;class Kd{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new Kd(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}yu.SpeechKeyword=Kd;var Io={},_g;function RA(){if(_g)return Io;_g=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.SpeechServiceRecognizer=void 0;const t=E(),e=M();let r=class extends e.ServiceRecognizerBase{constructor(o,s,a,i,c){super(o,s,a,i,c),this.privSpeechRecognizer=c}async processTypeSpecificMessages(o){let s;const a=new t.PropertyCollection;a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o.textBody);let i=!1;switch(o.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=e.SpeechHypothesis.fromJSON(o.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,void 0,void 0,o.textBody,a),this.privRequestSession.onHypothesis(u);const l=new t.SpeechRecognitionEventArgs(s,c.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,l)}catch{}i=!0;break;case"speech.phrase":const p=e.SimpleSpeechPhrase.fromJSON(o.textBody),d=e.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),t.ResultReason.Canceled===d){const h=e.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),v=e.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,v,e.EnumTranslation.implTranslateErrorDetails(v))}else{if(!(this.privRequestSession.isSpeechEnded&&d===t.ResultReason.NoMatch&&p.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,void 0,o.textBody,a);else{const v=e.DetailedSpeechPhrase.fromJSON(o.textBody),m=v.Offset+this.privRequestSession.currentTurnAudioOffset,y=v.getJsonWithCorrectedOffsets(m);s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,d,v.RecognitionStatus===e.RecognitionStatus.Success?v.NBest[0].Display:void 0,v.Duration,m,v.Language,v.LanguageDetectionConfidence,void 0,void 0,y,a)}const h=new t.SpeechRecognitionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(s)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}i=!0;break}return i}cancelRecognition(o,s,a,i,c){const u=new t.PropertyCollection;if(u.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[i]),this.privSpeechRecognizer.canceled){const l=new t.SpeechRecognitionCanceledEventArgs(a,c,i,void 0,o);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,l)}catch{}}if(this.privSuccessCallback){const l=new t.SpeechRecognitionResult(s,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,u);try{this.privSuccessCallback(l),this.privSuccessCallback=void 0}catch{}}}};return Io.SpeechServiceRecognizer=r,Io}var To={},Ag;function EA(){if(Ag)return To;Ag=1,Object.defineProperty(To,"__esModule",{value:!0}),To.ConversationTranscriptionServiceRecognizer=void 0;const t=E(),e=M();let r=class extends e.ServiceRecognizerBase{constructor(o,s,a,i,c){super(o,s,a,i,c),this.privConversationTranscriber=c,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const o=this.privSpeechContext.getSection("phraseDetection");o.mode="Conversation";const s={};s.mode="Anonymous",s.audioSessionId=this.privDiarizationSessionId,s.audioOffsetMs=0,o.speakerDiarization=s,this.privSpeechContext.setSection("phraseDetection",o)}}async processTypeSpecificMessages(o){let s;const a=new t.PropertyCollection;a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o.textBody);let i=!1;switch(o.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=e.SpeechHypothesis.fromJSON(o.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;s=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,void 0,void 0,o.textBody,a),this.privRequestSession.onHypothesis(u);const l=new t.ConversationTranscriptionEventArgs(s,c.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,l)}catch{}i=!0;break;case"speech.phrase":const p=e.SimpleSpeechPhrase.fromJSON(o.textBody),d=e.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),t.ResultReason.Canceled===d){const h=e.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),v=e.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,v,e.EnumTranslation.implTranslateErrorDetails(v))}else if(!(this.privRequestSession.isSpeechEnded&&d===t.ResultReason.NoMatch&&p.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])s=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,o.textBody,a);else{const v=e.DetailedSpeechPhrase.fromJSON(o.textBody),m=v.Offset+this.privRequestSession.currentTurnAudioOffset,y=v.getJsonWithCorrectedOffsets(m);s=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,d,v.RecognitionStatus===e.RecognitionStatus.Success?v.NBest[0].Display:void 0,v.Duration,m,v.Language,v.LanguageDetectionConfidence,p.SpeakerId,void 0,y,a)}const h=new t.ConversationTranscriptionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,h)}catch{}}i=!0;break}return i}cancelRecognition(o,s,a,i,c){if(new t.PropertyCollection().setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[i]),this.privConversationTranscriber.canceled){const l=new t.ConversationTranscriptionCanceledEventArgs(a,c,i,void 0,o);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,l)}catch{}}}};return To.ConversationTranscriptionServiceRecognizer=r,To}var _o={},kg;function wA(){if(kg)return _o;kg=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.TranscriptionServiceRecognizer=void 0;const t=b(),e=E(),r=M(),n=Kt;let o=class extends r.ConversationServiceRecognizer{constructor(a,i,c,u,l){super(a,i,c,u,l),this.privTranscriberRecognizer=l,this.sendPrePayloadJSONOverride=p=>this.sendTranscriptionStartJSON(p),this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(a,i){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createSpeechEventPayload(a,i))}}async sendMeetingSpeechEventAsync(a,i){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createMeetingSpeechEventPayload(a,i))}}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,i,c){try{const u=new e.SpeechRecognitionEventArgs(a,i,c);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,u),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(l){this.privErrorCallback&&this.privErrorCallback(l)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(a,i,c){try{const u=new e.SpeechRecognitionEventArgs(a,i,c);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,u)}catch{}}cancelRecognition(a,i,c,u,l){const p=new e.PropertyCollection;if(p.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[u]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const d=new e.MeetingTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const d=new e.ConversationTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new e.SpeechRecognitionResult(i,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,l,void 0,p);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(a){if(await this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const i=this.privTranscriberRecognizer.getMeetingInfo(),c=this.createMeetingSpeechEventPayload(i,"start");await this.sendSpeechEvent(a,c)}else{const i=this.privTranscriberRecognizer.getConversationInfo(),c=this.createSpeechEventPayload(i,"start");await this.sendSpeechEvent(a,c)}await this.sendWaveHeader(a)}sendSpeechEvent(a,i){const c=JSON.stringify(i);if(c)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",c))}createSpeechEventPayload(a,i){const c={id:"meeting",name:i,meeting:a.conversationProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}createMeetingSpeechEventPayload(a,i){const c={id:"meeting",name:i,meeting:a.meetingProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}};return _o.TranscriptionServiceRecognizer=o,_o}var Ao={},Og;function IA(){if(Og)return Ao;Og=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.DetailedSpeechPhrase=void 0;const t=M();let e=class YC{constructor(n){this.privDetailedSpeechPhrase=JSON.parse(n),this.privDetailedSpeechPhrase.RecognitionStatus=t.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(n){return new YC(n)}getJsonWithCorrectedOffsets(n){if(this.privDetailedSpeechPhrase.NBest){let o;for(const s of this.privDetailedSpeechPhrase.NBest)if(s.Words&&s.Words[0]){o=s.Words[0].Offset;break}if(o&&o<n){const s=n-o;for(const a of this.privDetailedSpeechPhrase.NBest){if(a.Words)for(const i of a.Words)i.Offset+=s;if(a.DisplayWords)for(const i of a.DisplayWords)i.Offset+=s}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}};return Ao.DetailedSpeechPhrase=e,Ao}var ko={},Mg;function TA(){if(Mg)return ko;Mg=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.SimpleSpeechPhrase=void 0;const t=M();let e=class XC{constructor(n){this.privSimpleSpeechPhrase=JSON.parse(n),this.privSimpleSpeechPhrase.RecognitionStatus=t.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(n){return new XC(n)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}};return ko.SimpleSpeechPhrase=e,ko}var Su={};Object.defineProperty(Su,"__esModule",{value:!0});Su.AddedLmIntent=void 0;class _A{constructor(e,r){this.modelImpl=e,this.intentName=r}}Su.AddedLmIntent=_A;var Oo={},bg;function AA(){if(bg)return Oo;bg=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.IntentServiceRecognizer=void 0;const t=b(),e=E(),r=M();let n=class extends r.ServiceRecognizerBase{constructor(s,a,i,c,u){super(s,a,i,c,u),this.privIntentRecognizer=u,this.privIntentDataSent=!1}setIntents(s,a){this.privAddedLmIntents=s,this.privUmbrellaIntent=a,this.privIntentDataSent=!0}processTypeSpecificMessages(s){let a,i,c=!1;const u=new e.PropertyCollection;switch(s.messageType===t.MessageType.Text&&u.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speech.hypothesis":const p=r.SpeechHypothesis.fromJSON(s.textBody);if(a=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,e.ResultReason.RecognizingIntent,p.Text,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,s.textBody,u),this.privRequestSession.onHypothesis(a.offset),i=new e.IntentRecognitionEventArgs(a,p.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,i)}catch{}c=!0;break;case"speech.phrase":const d=r.SimpleSpeechPhrase.fromJSON(s.textBody);a=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,r.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus),d.DisplayText,d.Duration,d.Offset+this.privRequestSession.currentTurnAudioOffset,d.Language,d.LanguageDetectionConfidence,void 0,s.textBody,u),i=new e.IntentRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);const h=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,i)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||e.ResultReason.NoMatch===i.result.reason?(this.privRequestSession.onPhraseRecognized(i.offset+i.result.duration),h()):this.privPendingIntentArgs=i,c=!0;break;case"response":if(i=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,i===void 0){if(s.textBody==="")return;i=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const v=r.IntentResponse.fromJSON(s.textBody);if(v!==null&&v.topScoringIntent&&v.topScoringIntent.intent){let m=this.privAddedLmIntents[v.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(m=this.privUmbrellaIntent),m){const y=m===void 0||m.intentName===void 0?v.topScoringIntent.intent:m.intentName;let f=i.result.reason;y!==void 0&&(f=e.ResultReason.RecognizedIntent);const g=i.result.properties!==void 0?i.result.properties:new e.PropertyCollection;g.setProperty(e.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,s.textBody),i=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult(y,i.result.resultId,f,i.result.text,i.result.duration,i.result.offset,void 0,void 0,i.result.errorDetails,i.result.json,g),i.offset,i.sessionId)}}if(this.privRequestSession.onPhraseRecognized(i.offset+i.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,i)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(i.result)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}c=!0;break}const l=new t.Deferred;return l.resolve(c),l.promise}cancelRecognition(s,a,i,c,u){const l=new e.PropertyCollection;if(l.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]),this.privIntentRecognizer.canceled){const p=new e.IntentRecognitionCanceledEventArgs(i,u,c,void 0,void 0,s);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new e.IntentRecognitionResult(void 0,a,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}};return Oo.IntentServiceRecognizer=n,Oo}var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.IntentResponse=void 0;class Jd{constructor(e){e===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(e)}static fromJSON(e){return new Jd(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}Cu.IntentResponse=Jd;var ZC={};Object.defineProperty(ZC,"__esModule",{value:!0});var Pu={},Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.ServiceTelemetryListener=void 0;const Dt=b(),Dg=hu;class kA{constructor(e,r,n){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=r,this.privAudioNodeId=n,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){this.privIsDisposed||(e instanceof Dg.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof Dt.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Dt.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Dt.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Dt.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Dt.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Dg.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof Dt.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof Dt.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Dt.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Dt.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array),this.privReceivedMessages[e.message.headers.path].length<50&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))}getTelemetry(){const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const r={Metrics:e,ReceivedMessages:this.privReceivedMessages},n=JSON.stringify(r);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],n}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}}Ru.ServiceTelemetryListener=kA;Object.defineProperty(Pu,"__esModule",{value:!0});Pu.RequestSession=void 0;const un=b(),la=hu,OA=Ru;class MA{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=un.createNoDashGuid(),this.privAudioNodeId=un.createNoDashGuid(),this.privTurnDeferral=new un.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new OA.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new la.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(e,r){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,r?await this.onComplete():this.onEvent(new la.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(e,r){this.privAuthFetchEventId=e,this.privSessionId=r,this.onEvent(new la.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(e){e&&await this.onComplete()}async onConnectionEstablishCompleted(e,r){if(e===200){this.onEvent(new la.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else e===403&&await this.onComplete()}async onServiceTurnEndResponse(e){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=un.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new un.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),un.Events.instance.onEvent(e)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}}Pu.RequestSession=MA;var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.SpeechContext=void 0;class bA{constructor(e){this.privContext={},this.privDynamicGrammar=e}getSection(e){return this.privContext[e]||{}}setSection(e,r){this.privContext[e]=r}setPronunciationAssessmentParams(e,r,n=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),n&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),this.privContext.phraseOutput.detailed.options.indexOf("SNR")===-1&&this.privContext.phraseOutput.detailed.options.push("SNR"),r&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:r},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")===-1&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}}Eu.SpeechContext=bA;var wu={};Object.defineProperty(wu,"__esModule",{value:!0});wu.DynamicGrammarBuilder=void 0;class DA{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const e={};if(e.ReferenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const r=[];this.privPhrases.forEach(n=>{r.push({Text:n})}),e.Groups=[{Type:"Generic",Items:r}]}return e}}wu.DynamicGrammarBuilder=DA;var eP={};Object.defineProperty(eP,"__esModule",{value:!0});var Mo={},Iu={},Tu={},Gd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageDataStreamType=t.ActivityPayloadResponse=void 0;class e{constructor(n){this.privActivityResponse=JSON.parse(n)}static fromJSON(n){return new e(n)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}t.ActivityPayloadResponse=e,function(r){r[r.None=0]="None",r[r.TextToSpeechAudio=1]="TextToSpeechAudio"}(t.MessageDataStreamType||(t.MessageDataStreamType={}))})(Gd);Object.defineProperty(Tu,"__esModule",{value:!0});Tu.DialogServiceTurnState=void 0;const NA=Er,zA=ye,jA=Gd;class xA{constructor(e,r){this.privRequestId=r,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,r){return e.messageDataStreamType===jA.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=zA.AudioOutputStream.createPullStream(),this.privAudioStream.format=r!==void 0?r:NA.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}Tu.DialogServiceTurnState=xA;Object.defineProperty(Iu,"__esModule",{value:!0});Iu.DialogServiceTurnStateManager=void 0;const Ng=Ce,LA=Tu;class BA{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new Ng.InvalidOperationError("Service error: There is already a turn with id:"+e);const r=new LA.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,r),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new Ng.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);const r=this.privTurnMap.get(e);return r.complete(),this.privTurnMap.delete(e),r}}Iu.DialogServiceTurnStateManager=BA;var zg;function FA(){if(zg)return Mo;zg=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.DialogServiceAdapter=void 0;const t=fe(),e=Zr,r=b(),n=Er,o=E(),s=Iu,a=M(),i=Gd,c=Kt;let u=class extends a.ServiceRecognizerBase{constructor(p,d,h,v,m){super(p,d,h,v,m),this.privEvents=new r.EventSource,this.privDialogServiceConnector=m,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new s.DialogServiceTurnStateManager,this.recognizeOverride=(y,f,g)=>this.listenOnce(y,f,g),this.postConnectImplOverride=y=>this.dialogConnectImpl(y),this.configConnectionOverride=y=>this.configConnection(y),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=h,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(y=>{y.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(p){const d=r.createGuid(),h=r.createNoDashGuid(),v={context:{interactionId:d},messagePayload:JSON.parse(p),version:.5},m=JSON.stringify(v);await(await this.fetchConnection()).send(new c.SpeechConnectionMessage(r.MessageType.Text,"agent",h,"application/json",m))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(p){const d=new o.PropertyCollection;p.messageType===r.MessageType.Text&&d.setProperty(o.PropertyId.SpeechServiceResponse_JsonResult,p.textBody);let h,v;switch(p.path.toLowerCase()){case"speech.phrase":const y=a.SimpleSpeechPhrase.fromJSON(p.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+y.Offset+y.Duration),y.RecognitionStatus!==a.RecognitionStatus.TooManyRequests&&y.RecognitionStatus!==a.RecognitionStatus.Error){const R=this.fireEventForResult(y,d);if(this.privLastResult=R.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,R)}catch{}}v=!0;break;case"speech.hypothesis":const f=a.SpeechHypothesis.fromJSON(p.textBody),g=f.Offset+this.privRequestSession.currentTurnAudioOffset;h=new o.SpeechRecognitionResult(this.privRequestSession.requestId,o.ResultReason.RecognizingSpeech,f.Text,f.Duration,g,f.Language,f.LanguageDetectionConfidence,void 0,void 0,p.textBody,d),this.privRequestSession.onHypothesis(g);const S=new o.SpeechRecognitionEventArgs(h,f.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,S)}catch{}v=!0;break;case"speech.keyword":const C=a.SpeechKeyword.fromJSON(p.textBody);h=new o.SpeechRecognitionResult(this.privRequestSession.requestId,C.Status==="Accepted"?o.ResultReason.RecognizedKeyword:o.ResultReason.NoMatch,C.Text,C.Duration,C.Offset,void 0,void 0,void 0,void 0,p.textBody,d),C.Status!=="Accepted"&&(this.privLastResult=h);const P=new o.SpeechRecognitionEventArgs(h,h.duration,h.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,P)}catch{}v=!0;break;case"audio":{const R=p.requestId.toUpperCase(),_=this.privTurnStateManager.GetTurn(R);try{p.binaryBody?_.audioStream.write(p.binaryBody):_.endAudioStream()}catch{}}v=!0;break;case"response":this.handleResponseMessage(p),v=!0;break}const m=new r.Deferred;return m.resolve(v),m.promise}async cancelRecognition(p,d,h,v,m){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const y=new o.PropertyCollection;y.setProperty(a.CancellationErrorCodePropertyName,o.CancellationErrorCode[v]);const f=new o.SpeechRecognitionCanceledEventArgs(h,m,v,void 0,p);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,f)}catch{}if(this.privSuccessCallback){const g=new o.SpeechRecognitionResult(void 0,o.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,m,void 0,y);try{this.privSuccessCallback(g),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(p,d,h){this.privRecognizerConfig.recognitionMode=p,this.privSuccessCallback=d,this.privErrorCallback=h,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(o.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const v=this.connectImpl(),m=this.sendPreAudioMessages(),y=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),f=await this.privDialogAudioSource.format,g=await this.privDialogAudioSource.deviceInfo,S=new t.ReplayableAudioNode(y,f.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(S,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:g};try{await v,await m}catch(R){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.ConnectionFailure,R),Promise.resolve()}const C=new o.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,C),this.sendAudio(S).then(()=>{},async R=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.RuntimeError,R)})}dialogConnectImpl(p){return this.privConnectionLoop=this.startMessageLoop(),p}receiveDialogMessageOverride(){const p=new r.Deferred,d=async()=>{try{const h=this.isDisposed(),v=!this.isDisposed()&&this.terminateMessageLoop;if(h||v){p.resolve(void 0);return}const y=await(await this.fetchConnection()).read();if(!y)return d();const f=c.SpeechConnectionMessage.fromConnectionMessage(y);switch(f.path.toLowerCase()){case"turn.start":{const I=f.requestId.toUpperCase(),W=this.privRequestSession.requestId.toUpperCase();I!==W?this.privTurnStateManager.StartTurn(I):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const S=a.SpeechDetected.fromJSON(f.textBody),C=new o.RecognitionEventArgs(S.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,C);break;case"speech.enddetected":let P;f.textBody.length>0?P=f.textBody:P="{ Offset: 0 }";const R=a.SpeechDetected.fromJSON(P);this.privRequestSession.onServiceRecognized(R.Offset+this.privRequestSession.currentTurnAudioOffset);const _=new o.RecognitionEventArgs(R.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,_);break;case"turn.end":{const I=f.requestId.toUpperCase(),W=this.privRequestSession.requestId.toUpperCase();if(I!==W)this.privTurnStateManager.CompleteTurn(I);else{const x=new o.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,x),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(we){this.privErrorCallback&&this.privErrorCallback(we)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(f)||this.serviceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(f.path.toLowerCase(),f.textBody))}catch{}}return d()}catch{this.terminateMessageLoop=!0,p.resolve()}};return d().catch(h=>{r.Events.instance.onEvent(new r.BackgroundEvent(h))}),p.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(p){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.RuntimeError,p)}return Promise.resolve()}async configConnection(p){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(p,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(p),p)}async sendPreAudioMessages(){const p=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(p,!0),await this.sendAgentContext(p),await this.sendWaveHeader(p)}sendAgentConfig(p){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(o.PropertyId.Conversation_DialogType)===o.DialogServiceConfig.DialogTypes.CustomCommands){const h=this.agentConfig.get();h.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(h)}this.onEvent(new e.SendingAgentContextMessageEvent(this.agentConfig));const d=this.agentConfig.toJsonString();return this.agentConfigSent=!0,p.send(new c.SpeechConnectionMessage(r.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",d))}}sendAgentContext(p){const d=r.createGuid(),h=this.privDialogServiceConnector.properties.getProperty(o.PropertyId.Conversation_Speech_Activity_Template),m=JSON.stringify({channelData:"",context:{interactionId:d},messagePayload:typeof h===void 0?void 0:h,version:.5});return p.send(new c.SpeechConnectionMessage(r.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",m))}fireEventForResult(p,d){const h=a.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),v=p.Offset+this.privRequestSession.currentTurnAudioOffset,m=new o.SpeechRecognitionResult(this.privRequestSession.requestId,h,p.DisplayText,p.Duration,v,p.Language,p.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(p),d);return new o.SpeechRecognitionEventArgs(m,v,this.privRequestSession.sessionId)}handleResponseMessage(p){const d=JSON.parse(p.textBody);switch(d.messageType.toLowerCase()){case"message":const h=p.requestId.toUpperCase(),v=i.ActivityPayloadResponse.fromJSON(p.textBody),m=this.privTurnStateManager.GetTurn(h);if(v.conversationId){const g=this.agentConfig.get();g.botInfo.conversationId=v.conversationId,this.agentConfig.set(g)}const y=m.processActivityPayload(v,n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),f=new o.ActivityReceivedEventArgs(v.messagePayload,y);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,f)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new o.TurnStatusReceivedEventArgs(p.textBody))}catch{}break;default:r.Events.instance.onEvent(new r.BackgroundEvent(`Unexpected response of type ${d.messageType}. Ignoring.`));break}}onEvent(p){this.privEvents.onEvent(p),r.Events.instance.onEvent(p)}addKeywordContextData(){const p=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(p===void 0)return;const d=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),h=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),v=p.split(";"),m=d===void 0?[]:d.split(";"),y=h===void 0?[]:h.split(";"),f=[];for(let g=0;g<v.length;g++){const S={};S.text=v[g],g<m.length&&(S.offset=Number(m[g])),g<y.length&&(S.duration=Number(y[g])),f.push(S)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:f,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}};return Mo.DialogServiceAdapter=u,Mo}var _u={};Object.defineProperty(_u,"__esModule",{value:!0});_u.AgentConfig=void 0;class qA{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}_u.AgentConfig=qA;var wl={},bo={},Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.ConversationConnectionConfig=void 0;const UA=Us;class be extends UA.RestConfigBase{static get host(){return be.privHost}static get apiVersion(){return be.privApiVersion}static get clientAppId(){return be.privClientAppId}static get defaultLanguageCode(){return be.privDefaultLanguageCode}static get restPath(){return be.privRestPath}static get webSocketPath(){return be.privWebSocketPath}static get transcriptionEventKeys(){return be.privTranscriptionEventKeys}}Vn.ConversationConnectionConfig=be;be.privHost="dev.microsofttranslator.com";be.privRestPath="/capito/room";be.privApiVersion="2.0";be.privDefaultLanguageCode="en-US";be.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";be.privWebSocketPath="/capito/translate";be.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var jg;function $A(){if(jg)return bo;jg=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.ConversationManager=void 0;const t=fe(),e=D,r=E(),n=Vn;let o=class{constructor(){this.privRequestParams=n.ConversationConnectionConfig.configParams,this.privErrors=n.ConversationConnectionConfig.restErrors,this.privHost=n.ConversationConnectionConfig.host,this.privApiVersion=n.ConversationConnectionConfig.apiVersion,this.privRestPath=n.ConversationConnectionConfig.restPath,this.privRestAdapter=new t.RestMessageAdapter({})}createOrJoin(a,i,c,u){try{e.Contracts.throwIfNullOrUndefined(a,"args");const l=a.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,n.ConversationConnectionConfig.defaultLanguageCode),p=a.getProperty(r.PropertyId.ConversationTranslator_Name,"conversation_host"),d=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),h=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),v=a.getProperty(r.PropertyId.SpeechServiceConnection_Key),m=a.getProperty(r.PropertyId.SpeechServiceConnection_Region),y=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token);e.Contracts.throwIfNullOrWhitespace(l,"languageCode"),e.Contracts.throwIfNullOrWhitespace(p,"nickname"),e.Contracts.throwIfNullOrWhitespace(d,"endpointHost");const f={};f[this.privRequestParams.apiVersion]=this.privApiVersion,f[this.privRequestParams.languageCode]=l,f[this.privRequestParams.nickname]=p;const g={};h&&(g[this.privRequestParams.correlationId]=h),g[this.privRequestParams.clientAppId]=n.ConversationConnectionConfig.clientAppId,i!==void 0?f[this.privRequestParams.roomId]=i:(e.Contracts.throwIfNullOrUndefined(m,this.privErrors.authInvalidSubscriptionRegion),g[this.privRequestParams.subscriptionRegion]=m,v?g[this.privRequestParams.subscriptionKey]=v:y?g[this.privRequestParams.authorization]=`Bearer ${y}`:e.Contracts.throwIfNullOrUndefined(v,this.privErrors.authInvalidSubscriptionKey));const S={};S.headers=g,this.privRestAdapter.options=S;const C=`https://${d}${this.privRestPath}`;this.privRestAdapter.request(t.RestRequestType.Post,C,f,null).then(P=>{const R=t.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,P.headers);if(!P.ok){if(u){let I=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",P.status.toString()),W;try{W=JSON.parse(P.data),I+=` [${W.error.code}: ${W.error.message}]`}catch{I+=` [${P.data}]`}R&&(I+=` ${R}`),u(I)}return}const _=JSON.parse(P.data);if(_&&(_.requestId=R),c){try{c(_)}catch(I){u&&u(I)}c=void 0}}).catch(()=>{})}catch(l){if(u)if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}}leave(a,i){return new Promise((c,u)=>{try{e.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","config")),e.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","token"));const l=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),p=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),d={};d[this.privRequestParams.apiVersion]=this.privApiVersion,d[this.privRequestParams.sessionToken]=i;const h={};p&&(h[this.privRequestParams.correlationId]=p);const v={};v.headers=h,this.privRestAdapter.options=v;const m=`https://${l}${this.privRestPath}`;this.privRestAdapter.request(t.RestRequestType.Delete,m,d,null).then(y=>{y.ok,c()}).catch(()=>{})}catch(l){if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}})}};return bo.ConversationManager=o,bo}var xr={},Do={},Au={},$s={};Object.defineProperty($s,"__esModule",{value:!0});$s.ConversationConnectionMessage=void 0;const WA=b();class HA extends WA.ConnectionMessage{constructor(e,r,n,o){super(e,r,n,o);const s=JSON.parse(this.textBody);s.type!==void 0&&(this.privConversationMessageType=s.type)}get conversationMessageType(){return this.privConversationMessageType}}$s.ConversationConnectionMessage=HA;Object.defineProperty(Au,"__esModule",{value:!0});Au.ConversationWebsocketMessageFormatter=void 0;const Lr=b(),xg=$s;class VA{toConnectionMessage(e){const r=new Lr.Deferred;try{if(e.messageType===Lr.MessageType.Text){const n=new xg.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);r.resolve(n)}else e.messageType===Lr.MessageType.Binary&&r.resolve(new xg.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(n){r.reject(`Error formatting the message. Error: ${n}`)}return r.promise}fromConnectionMessage(e){const r=new Lr.Deferred;try{if(e.messageType===Lr.MessageType.Text){const n=`${e.textBody?e.textBody:""}`;r.resolve(new Lr.RawWebsocketMessage(Lr.MessageType.Text,n,e.id))}}catch(n){r.reject(`Error formatting the message. ${n}`)}return r.promise}}Au.ConversationWebsocketMessageFormatter=VA;var Lg;function KA(){if(Lg)return Do;Lg=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.ConversationConnectionFactory=void 0;const t=fe(),e=b(),r=D,n=E(),o=St(),s=Vn,a=Au;let i=class extends o.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(n.PropertyId.ConversationTranslator_Host,s.ConversationConnectionConfig.host),h=u.parameters.getProperty(n.PropertyId.ConversationTranslator_CorrelationId,e.createGuid()),v=`wss://${d}${s.ConversationConnectionConfig.webSocketPath}`,m=u.parameters.getProperty(n.PropertyId.ConversationTranslator_Token,void 0);r.Contracts.throwIfNullOrUndefined(m,"token");const y={};y[s.ConversationConnectionConfig.configParams.apiVersion]=s.ConversationConnectionConfig.apiVersion,y[s.ConversationConnectionConfig.configParams.token]=m,y[s.ConversationConnectionConfig.configParams.correlationId]=h;const f=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(v,y,{},new a.ConversationWebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),f,p)}};return Do.ConversationConnectionFactory=i,Do}var No={},ku={};Object.defineProperty(ku,"__esModule",{value:!0});ku.ConversationRequestSession=void 0;const Il=b();class JA{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=Il.createNoDashGuid(),this.privRequestCompletionDeferral=new Il.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,r){this.privSessionId=r}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){e!==200&&e===403&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=Il.createNoDashGuid():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach()}}onComplete(){}}ku.ConversationRequestSession=JA;var ze={},Bg;function tP(){if(Bg)return ze;Bg=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.ConversationReceivedTranslationEventArgs=ze.ParticipantsListEventArgs=ze.ParticipantAttributeEventArgs=ze.ParticipantEventArgs=ze.LockRoomEventArgs=ze.MuteAllEventArgs=void 0;const t=E();class e extends t.SessionEventArgs{constructor(c,u){super(u),this.privIsMuted=c}get isMuted(){return this.privIsMuted}}ze.MuteAllEventArgs=e;class r extends t.SessionEventArgs{constructor(c,u){super(u),this.privIsLocked=c}get isMuted(){return this.privIsLocked}}ze.LockRoomEventArgs=r;class n extends t.SessionEventArgs{constructor(c,u){super(u),this.privParticipant=c}get participant(){return this.privParticipant}}ze.ParticipantEventArgs=n;class o extends t.SessionEventArgs{constructor(c,u,l,p){super(p),this.privKey=u,this.privValue=l,this.privParticipantId=c}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}ze.ParticipantAttributeEventArgs=o;class s extends t.SessionEventArgs{constructor(c,u,l,p,d,h,v,m,y){super(y),this.privRoomId=c,this.privSessionToken=u,this.privTranslateTo=l,this.privProfanityFilter=p,this.privRoomProfanityFilter=d,this.privIsRoomLocked=h,this.privIsRoomLocked=v,this.privParticipants=m}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}ze.ParticipantsListEventArgs=s;class a{constructor(c,u,l){this.privPayload=u,this.privCommand=c,this.privSessionId=l}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return ze.ConversationReceivedTranslationEventArgs=a,ze}var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.ConversationTranslatorCommandTypes=Ft.ConversationTranslatorMessageTypes=Ft.InternalParticipants=void 0;class GA{constructor(e=[],r){this.participants=e,this.meId=r}addOrUpdateParticipant(e){if(e===void 0)return;const r=this.getParticipantIndex(e.id);return r>-1?this.participants.splice(r,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex(r=>r.id===e)}getParticipant(e){return this.participants.find(r=>r.id===e)}deleteParticipant(e){this.participants=this.participants.filter(r=>r.id!==e)}get host(){return this.participants.find(e=>e.isHost===!0)}get me(){return this.getParticipant(this.meId)}}Ft.InternalParticipants=GA;Ft.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};Ft.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};var rP={},Ou={};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.CommandResponsePayload=void 0;const QA=t=>JSON.parse(t);class Qd{constructor(e){this.privCommandResponse=QA(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new Qd(e)}}Ou.CommandResponsePayload=Qd;var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.ParticipantPayloadResponse=Ln.ParticipantsListPayloadResponse=void 0;const YA=t=>JSON.parse(t),XA=t=>JSON.parse(t);class Yd{constructor(e){this.privParticipantsPayloadResponse=YA(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new Yd(e)}}Ln.ParticipantsListPayloadResponse=Yd;class Xd{constructor(e){this.privParticipantPayloadResponse=XA(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new Xd(e)}}Ln.ParticipantPayloadResponse=Xd;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.TextResponsePayload=Bn.SpeechResponsePayload=void 0;const ZA=t=>JSON.parse(t),ek=t=>JSON.parse(t);class Zd{constructor(e){this.privSpeechResponse=ZA(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(e){return new Zd(e)}}Bn.SpeechResponsePayload=Zd;class eh{constructor(e){this.privTextResponse=ek(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new eh(e)}}Bn.TextResponsePayload=eh;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Ou;Object.defineProperty(t,"CommandResponsePayload",{enumerable:!0,get:function(){return e.CommandResponsePayload}});var r=Ln;Object.defineProperty(t,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantsListPayloadResponse}}),Object.defineProperty(t,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantPayloadResponse}});var n=Bn;Object.defineProperty(t,"SpeechResponsePayload",{enumerable:!0,get:function(){return n.SpeechResponsePayload}}),Object.defineProperty(t,"TextResponsePayload",{enumerable:!0,get:function(){return n.TextResponsePayload}})})(rP);var Fg;function tk(){if(Fg)return No;Fg=1,Object.defineProperty(No,"__esModule",{value:!0}),No.ConversationServiceAdapter=void 0;const t=b(),e=E(),r=M(),n=$s,o=ku,s=tP(),a=Ft,i=rP;let c=class extends r.ServiceRecognizerBase{constructor(l,p,d,h,v){super(l,p,d,h,v),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=v,this.privConversationAuthentication=l,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=m=>this.conversationConnectImpl(m),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new o.ConversationRequestSession(t.createNoDashGuid()),this.privConversationConnectionFactory=p,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(l){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(l),await super.dispose(l)}async sendMessage(l){return(await this.fetchConnection()).send(new n.ConversationConnectionMessage(t.MessageType.Text,l))}async sendMessageAsync(l){await(await this.fetchConnection()).send(new n.ConversationConnectionMessage(t.MessageType.Text,l))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,e.CancellationReason.Error,e.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(l,p,d,h,v){this.terminateMessageLoop=!0;const m=new e.ConversationTranslationCanceledEventArgs(d,v,h,void 0,l);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,m)}catch{}}async conversationConnectImpl(l){return this.privConnectionLoop=this.startMessageLoop(),l}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const l=new t.Deferred;try{const d=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return l.resolve(),Promise.resolve();if(!d)return this.receiveConversationMessageOverride();const h=this.privConversationRequestSession.sessionId,v=d.conversationMessageType.toLowerCase();let m=!1;try{switch(v){case"info":case"participant_command":case"command":const y=i.CommandResponsePayload.fromJSON(d.textBody);switch(y.command.toLowerCase()){case"participantlist":const R=i.ParticipantsListPayloadResponse.fromJSON(d.textBody),_=R.participants.map(ue=>({avatar:ue.avatar,displayName:ue.nickname,id:ue.participantId,isHost:ue.ishost,isMuted:ue.ismuted,isUsingTts:ue.usetts,preferredLanguage:ue.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new s.ParticipantsListEventArgs(R.roomid,R.token,R.translateTo,R.profanityFilter,R.roomProfanityFilter,R.roomLocked,R.muteAll,_,h));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setTranslateToLanguages,y.value,h));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setProfanityFiltering,y.value,h));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setMute,y.value,h));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new s.MuteAllEventArgs(y.value,h));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new e.ConversationExpirationEventArgs(y.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setUseTTS,y.value,h));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new s.LockRoomEventArgs(y.value,h));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.changeNickname,y.value,h));break;case"joinsession":const I=i.ParticipantPayloadResponse.fromJSON(d.textBody),W={avatar:I.avatar,displayName:I.nickname,id:I.participantId,isHost:I.ishost,isMuted:I.ismuted,isUsingTts:I.usetts,preferredLanguage:I.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(W,h));break;case"leavesession":const x={id:y.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(x,h));break;case"disconnectsession":const we={id:y.participantId};break;case"token":const Ct=new r.CognitiveTokenAuthentication(()=>{const ue=y.token;return Promise.resolve(ue)},()=>{const ue=y.token;return Promise.resolve(ue)});this.authentication=Ct,this.privConversationServiceConnector.onToken(Ct);break;default:break}break;case"partial":case"final":const f=i.SpeechResponsePayload.fromJSON(d.textBody),g=v==="final"?e.ResultReason.TranslatedParticipantSpeech:e.ResultReason.TranslatingParticipantSpeech,S=new e.ConversationTranslationResult(f.participantId,this.getTranslations(f.translations),f.language,f.id,g,f.recognition,void 0,void 0,d.textBody,void 0);f.isFinal?((S.text!==void 0&&S.text.length>0||f.id===this.privLastPartialUtteranceId)&&(m=!0),m&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.final,S,h))):S.text!==void 0&&(this.privLastPartialUtteranceId=f.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.partial,S,h)));break;case"translated_message":const C=i.TextResponsePayload.fromJSON(d.textBody),P=new e.ConversationTranslationResult(C.participantId,this.getTranslations(C.translations),C.language,void 0,void 0,C.originalText,void 0,void 0,void 0,d.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.instantMessage,P,h));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return l.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const l=this.receiveConversationMessageOverride();try{return await l}catch(p){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",e.CancellationReason.Error,e.CancellationErrorCode.RuntimeError,p),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(l=>l.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(l=>l),this.privConnectionConfigPromise)}getTranslations(l){let p;if(l!==void 0){p=new e.Translations;for(const d of l)p.set(d.lang,d.translation)}return p}};return No.ConversationServiceAdapter=c,No}var qg;function rk(){if(qg)return xr;qg=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.ConversationTranslatorRecognizer=xr.ConversationRecognizerFactory=void 0;const t=M(),e=b(),r=D,n=E(),o=KA(),s=tk();class a{static fromConfig(u,l,p){return new i(u,l,p)}}xr.ConversationRecognizerFactory=a;let i=class extends n.Recognizer{constructor(u,l,p){const d=l;r.Contracts.throwIfNull(d,"speechConfig");const h=u;r.Contracts.throwIfNull(h,"conversationImpl"),super(p,d.properties,new o.ConversationConnectionFactory),this.privConversation=h,this.privIsDisposed=!1,this.privProperties=d.properties.clone(),this.privConnection=n.Connection.fromRecognizer(this),this.privProperties.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=e.Timeout.setTimeout,this.privClearTimeout=e.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(u){this.privConnection.connected=u}set disconnected(u){this.privConnection.disconnected=u}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(u,l,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfNullOrWhitespace(u,"token"),this.privReco.conversationTranslatorToken=u,this.resetConversationTimeout(),this.privReco.connectAsync(l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d)}}disconnect(u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{u&&u()},p=>{l&&l(p)})}catch(p){if(l)if(p instanceof Error){const d=p;l(d.name+": "+d.message)}else l(p);this.dispose(!0).catch(d=>{e.Events.instance.onEvent(new e.BackgroundEvent(d))})}}sendRequest(u,l,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(u,l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d);this.dispose(!0).catch(h=>{e.Events.instance.onEvent(new e.BackgroundEvent(h))})}}onToken(u){this.privConversation.onToken(u)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(u){this.privIsDisposed||u&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(u))}createRecognizerConfig(u){return new t.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,l,p,d){const h=p;return new s.ConversationServiceAdapter(u,l,h,d,this)}sendMessage(u,l,p){const d=this.privReco;((v,m,y)=>{v!==void 0?v.then(()=>{try{m&&m()}catch(f){y&&y(`'Unhandled error on promise callback: ${f}'`)}},f=>{try{y&&y(f)}catch{}}):y&&y("Null promise")})(d.sendMessageAsync(u),l,p),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return xr.ConversationTranslatorRecognizer=i,xr}var zo={},Ug;function nk(){if(Ug)return zo;Ug=1,Object.defineProperty(zo,"__esModule",{value:!0}),zo.TranscriberRecognizer=void 0;const t=b(),e=D,r=E(),n=M();let o=class extends r.Recognizer{constructor(a,i){const c=a;e.Contracts.throwIfNull(c,"speechTranslationConfig");const u=i;e.Contracts.throwIfNull(u,"audioConfigImpl"),e.Contracts.throwIfNullOrWhitespace(c.speechRecognitionLanguage,r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(i,c.properties,new n.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return e.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}set conversation(a){e.Contracts.throwIfNullOrUndefined(a,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=a}getConversationInfo(){return e.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(a){e.Contracts.throwIfNullOrUndefined(a,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=a}getMeetingInfo(){return e.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(a,i){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(n.RecognitionMode.Conversation),a,i)}stopContinuousRecognitionAsync(a,i){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,i)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(a,i){const c=this.privReco;e.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendSpeechEventAsync(a,i)}async pushMeetingEvent(a,i){const c=this.privReco;e.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendMeetingSpeechEventAsync(a,i)}async enforceAudioGating(){const c=(await this.audioConfig.format).channels;if(c===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(c!==8)throw new Error(`Unsupported audio configuration: Detected ${c}-channel audio`)}connectMeetingCallbacks(a){this.isMeetingRecognizer=!0,this.canceled=(i,c)=>{a.canceled&&a.canceled(a,c)},this.recognizing=(i,c)=>{a.transcribing&&a.transcribing(a,c)},this.recognized=(i,c)=>{a.transcribed&&a.transcribed(a,c)},this.sessionStarted=(i,c)=>{a.sessionStarted&&a.sessionStarted(a,c)},this.sessionStopped=(i,c)=>{a.sessionStopped&&a.sessionStopped(a,c)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new n.RecognizerConfig(a,this.properties)}createServiceRecognizer(a,i,c,u){const l=c;return new n.TranscriptionServiceRecognizer(a,i,l,u,this)}};return zo.TranscriberRecognizer=o,zo}var $g;function ik(){return $g||($g=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=$A();Object.defineProperty(t,"ConversationManager",{enumerable:!0,get:function(){return e.ConversationManager}});var r=Vn;Object.defineProperty(t,"ConversationConnectionConfig",{enumerable:!0,get:function(){return r.ConversationConnectionConfig}});var n=rk();Object.defineProperty(t,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return n.ConversationRecognizerFactory}});var o=nk();Object.defineProperty(t,"TranscriberRecognizer",{enumerable:!0,get:function(){return o.TranscriberRecognizer}});var s=tP();Object.defineProperty(t,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return s.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(t,"LockRoomEventArgs",{enumerable:!0,get:function(){return s.LockRoomEventArgs}}),Object.defineProperty(t,"MuteAllEventArgs",{enumerable:!0,get:function(){return s.MuteAllEventArgs}}),Object.defineProperty(t,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return s.ParticipantAttributeEventArgs}}),Object.defineProperty(t,"ParticipantEventArgs",{enumerable:!0,get:function(){return s.ParticipantEventArgs}}),Object.defineProperty(t,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return s.ParticipantsListEventArgs}});var a=Ft;Object.defineProperty(t,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorCommandTypes}}),Object.defineProperty(t,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorMessageTypes}}),Object.defineProperty(t,"InternalParticipants",{enumerable:!0,get:function(){return a.InternalParticipants}})}(wl)),wl}var th={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAudioMetadata=t.MetadataType=void 0,function(r){r.WordBoundary="WordBoundary",r.Bookmark="Bookmark",r.Viseme="Viseme",r.SentenceBoundary="SentenceBoundary",r.SessionEnd="SessionEnd",r.AvatarSignal="TalkingAvatarSignal"}(t.MetadataType||(t.MetadataType={}));class e{constructor(n){this.privSynthesisAudioMetadata=JSON.parse(n)}static fromJSON(n){return new e(n)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}t.SynthesisAudioMetadata=e})(th);var jo={},wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.SynthesisStartedEvent=wt.ConnectingToSynthesisServiceEvent=wt.SynthesisTriggeredEvent=wt.SpeechSynthesisEvent=void 0;const Wg=b();class Mu extends Wg.PlatformEvent{constructor(e,r,n=Wg.EventType.Info){super(e,n),this.privRequestId=r}get requestId(){return this.privRequestId}}wt.SpeechSynthesisEvent=Mu;class ok extends Mu{constructor(e,r,n){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=r,this.privTurnAudioDestinationId=n}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}wt.SynthesisTriggeredEvent=ok;class sk extends Mu{constructor(e,r){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=r}get authFetchEventId(){return this.privAuthFetchEventId}}wt.ConnectingToSynthesisServiceEvent=sk;class ak extends Mu{constructor(e,r){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=r}get authFetchEventId(){return this.privAuthFetchEventId}}wt.SynthesisStartedEvent=ak;var Hg;function ck(){if(Hg)return jo;Hg=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.SynthesisTurn=void 0;const t=b(),e=ye,r=E(),n=th,o=wt;let s=class Dp{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=t.createNoDashGuid(),this.privTurnDeferral=new t.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(i){this.privStreamId=i}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(i){this.privAudioOutputFormat=i}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const i=new r.PropertyCollection;return i.setProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),i}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const i=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(i),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(i,c,u,l){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=i,this.privRawText=c,this.privIsSSML=u,this.privAudioOutputStream=new e.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",l!==void 0&&(this.privTurnAudioDestination=l,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new o.SynthesisTriggeredEvent(this.requestId,void 0,l===void 0?void 0:l.id()))}onPreConnectionStart(i){this.privAuthFetchEventId=i,this.onEvent(new o.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(i){i&&this.onComplete()}onConnectionEstablishCompleted(i){if(i===200){this.onEvent(new o.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else i===403&&this.onComplete()}onServiceResponseMessage(i){const c=JSON.parse(i);this.streamId=c.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(i){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new t.Deferred;const c=JSON.parse(i);c.webrtc&&(this.privWebRTCSDP=c.webrtc.connectionString)}onAudioChunkReceived(i){this.isSynthesizing&&(this.privAudioOutputStream.write(i),this.privBytesReceived+=i.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(i))}onTextBoundaryEvent(i){this.updateTextOffset(i.Data.text.Text,i.Type)}onVisemeMetadataReceived(i){i.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=i.Data.AnimationChunk)}onSessionEnd(i){this.privAudioDuration=i.Data.Offset}async constructSynthesisResult(){const i=await this.getAllReceivedAudioWithHeader();return new r.SpeechSynthesisResult(this.requestId,r.ResultReason.SynthesizingAudioCompleted,i,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const i=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",i}onEvent(i){t.Events.instance.onEvent(i)}static isXmlTag(i){return i.length>=2&&i[0]==="<"&&i[i.length-1]===">"}updateTextOffset(i,c){c===n.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(i,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+i.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!Dp.isXmlTag(i)&&this.updateTextOffset(i,c))):(this.privSentenceOffset=this.privRawText.indexOf(i,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+i.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!Dp.isXmlTag(i)&&this.updateTextOffset(i,c)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(i){return this.privRawText.indexOf("<",i+1)>this.privRawText.indexOf(">",i+1)}};return jo.SynthesisTurn=s,jo}var xo={},Vg;function uk(){if(Vg)return xo;Vg=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.SynthesisAdapterBase=void 0;const t=b(),e=E(),r=M(),n=Kt;let o=class{constructor(a,i,c,u){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new t.ArgumentNullError("authentication");if(!i)throw new t.ArgumentNullError("connectionFactory");if(!c)throw new t.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=i,this.privSynthesizerConfig=c,this.privIsDisposed=!1,this.privSessionAudioDestination=u,this.privSynthesisTurn=new r.SynthesisTurn,this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privSynthesisContext=new r.SynthesisContext,this.privAgentConfig=new r.AgentConfig,this.connectionEvents.attach(l=>{if(l.name==="ConnectionClosedEvent"){const p=l;p.statusCode!==1e3&&this.cancelSynthesisLocal(e.CancellationReason.Error,p.statusCode===1007?e.CancellationErrorCode.BadRequestParameters:e.CancellationErrorCode.ConnectionFailure,`${p.reason} websocket error code: ${p.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=a),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}async dispose(a){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(a)}async connect(){await this.connectImpl()}async sendNetworkMessage(a,i){const c=typeof i=="string"?t.MessageType.Text:t.MessageType.Binary,u=typeof i=="string"?"application/json":"";return(await this.fetchConnection()).send(new n.SpeechConnectionMessage(c,a,this.privSynthesisTurn.requestId,u,i))}async Speak(a,i,c,u,l,p){let d;if(i?d=a:d=this.privSynthesizer.buildSsml(a),this.speakOverride!==void 0)return this.speakOverride(d,c,u,l);this.privSuccessCallback=u,this.privErrorCallback=l,this.privSynthesisTurn.startNewSynthesis(c,a,i,p);try{await this.connectImpl();const h=await this.fetchConnection();await this.sendSynthesisContext(h),await this.sendSsmlMessage(h,d,c),this.onSynthesisStarted(c),this.receiveMessage()}catch(h){return this.cancelSynthesisLocal(e.CancellationReason.Error,e.CancellationErrorCode.ConnectionFailure,h),Promise.reject(h)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new n.SpeechConnectionMessage(t.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(a,i,c,u){const l=new e.PropertyCollection;l.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]);const p=new e.SpeechSynthesisResult(a,e.ResultReason.Canceled,void 0,u,l);if(this.onSynthesisCancelled(p),this.privSuccessCallback)try{this.privSuccessCallback(p)}catch{}}cancelSynthesisLocal(a,i,c){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,i,c))}processTypeSpecificMessages(a){return!0}async receiveMessage(){try{const i=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!i)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const c=n.SpeechConnectionMessage.fromConnectionMessage(i);if(c.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(c.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(c.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(c.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===c.streamId.toLowerCase()&&c.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(c.binaryBody),this.onSynthesizing(c.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(c.binaryBody));break;case"audio.metadata":const u=r.SynthesisAudioMetadata.fromJSON(c.textBody).Metadata;for(const p of u)switch(p.Type){case r.MetadataType.WordBoundary:case r.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(p);const d=new e.SpeechSynthesisWordBoundaryEventArgs(p.Data.Offset,p.Data.Duration,p.Data.text.Text,p.Data.text.Length,p.Type===r.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,p.Data.text.BoundaryType);this.onWordBoundary(d);break;case r.MetadataType.Bookmark:const h=new e.SpeechSynthesisBookmarkEventArgs(p.Data.Offset,p.Data.Bookmark);this.onBookmarkReached(h);break;case r.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(p),p.Data.IsLastAnimation){const v=new e.SpeechSynthesisVisemeEventArgs(p.Data.Offset,p.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(v)}break;case r.MetadataType.AvatarSignal:this.onAvatarEvent(p);break;case r.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(p);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let l;try{l=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(l)}catch(p){this.privErrorCallback&&this.privErrorCallback(p)}this.onSynthesisCompleted(l);break;default:this.processTypeSpecificMessages(c)||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(c.path.toLowerCase(),c.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();const i=this.synthesisContext.toJSON();if(i)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",i))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(c=>c.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=t.createNoDashGuid(),this.privConnectionId=t.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const i=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=i.then(async c=>{this.privSynthesisTurn.onAuthCompleted(!1);const u=this.privConnectionFactory.create(this.privSynthesizerConfig,c,this.privConnectionId);u.events.attach(p=>{this.connectionEvents.onEvent(p)});const l=await u.open();return l.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.resolve(u)):l.statusCode===403&&!a?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${l.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Url)} Reason: ${l.reason}`))},c=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(c)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,i){if(i)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",i))}sendSsmlMessage(a,i,c){return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"ssml",c,"application/ssml+xml",i))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const a=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}};return xo.SynthesisAdapterBase=o,o.telemetryDataEnabled=!0,xo}var Lo={},Kg;function lk(){if(Kg)return Lo;Kg=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.AvatarSynthesisAdapter=void 0;const t=E(),e=M();let r=class extends e.SynthesisAdapterBase{constructor(o,s,a,i,c){super(o,s,a,void 0),this.privAvatarSynthesizer=i,this.privSynthesizer=i,this.privAvatarConfig=c}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var o,s,a,i,c,u,l,p,d,h,v,m,y,f,g,S;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(o=this.privAvatarConfig.videoFormat)==null?void 0:o.bitrate,codec:(s=this.privAvatarConfig.videoFormat)==null?void 0:s.codec,crop:{bottomRight:{x:(c=(i=(a=this.privAvatarConfig.videoFormat)==null?void 0:a.cropRange)==null?void 0:i.bottomRight)==null?void 0:c.x,y:(p=(l=(u=this.privAvatarConfig.videoFormat)==null?void 0:u.cropRange)==null?void 0:l.bottomRight)==null?void 0:p.y},topLeft:{x:(v=(h=(d=this.privAvatarConfig.videoFormat)==null?void 0:d.cropRange)==null?void 0:h.topLeft)==null?void 0:v.x,y:(f=(y=(m=this.privAvatarConfig.videoFormat)==null?void 0:m.cropRange)==null?void 0:y.topLeft)==null?void 0:f.y}},resolution:{height:(g=this.privAvatarConfig.videoFormat)==null?void 0:g.height,width:(S=this.privAvatarConfig.videoFormat)==null?void 0:S.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(o){if(this.privAvatarSynthesizer.avatarEventReceived){const s=new t.AvatarEventArgs(o.Data.Offset,o.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,s)}catch{}}}};return Lo.AvatarSynthesisAdapter=r,Lo}var Bo={},Jg;function pk(){if(Jg)return Bo;Jg=1,Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.SpeechSynthesisAdapter=void 0;const t=E(),e=M();let r=class extends e.SynthesisAdapterBase{constructor(o,s,a,i,c){super(o,s,a,c),this.privSpeechSynthesizer=i,this.privSynthesizer=i}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(o){const s=new t.SpeechSynthesisEventArgs(new t.SpeechSynthesisResult(o,t.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,s)}onSynthesizing(o){if(this.privSpeechSynthesizer.synthesizing)try{const s=this.privSynthesisTurn.audioOutputFormat.addHeader(o),a=new t.SpeechSynthesisEventArgs(new t.SpeechSynthesisResult(this.privSynthesisTurn.requestId,t.ResultReason.SynthesizingAudio,s));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,a)}catch{}}onSynthesisCancelled(o){if(this.privSpeechSynthesizer.SynthesisCanceled){const s=new t.SpeechSynthesisEventArgs(o);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,s)}catch{}}}onSynthesisCompleted(o){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new t.SpeechSynthesisEventArgs(o))}catch{}}onWordBoundary(o){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,o)}catch{}}onVisemeReceived(o){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,o)}catch{}}onBookmarkReached(o){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,o)}catch{}}};return Bo.SpeechSynthesisAdapter=r,Bo}var Fo={},Gg;function dk(){if(Gg)return Fo;Gg=1,Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.SynthesisRestAdapter=void 0;const t=fe(),e=E(),r=St(),n=ve;let o=class{constructor(a,i){let c=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!c){const l=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"westus"),p=r.ConnectionFactoryBase.getHostSuffix(l);c=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`https://${l}.tts.speech${p}`)}this.privUri=`${c}/cognitiveservices/voices/list`;const u=t.RestConfigBase.requestOptions;this.privRestAdapter=new t.RestMessageAdapter(u),this.privAuthentication=i}getVoicesList(a){return this.privRestAdapter.setHeaders(n.HeaderNames.ConnectionId,a),this.privAuthentication.fetch(a).then(i=>(this.privRestAdapter.setHeaders(i.headerName,i.token),this.privRestAdapter.request(t.RestRequestType.Get,this.privUri)))}};return Fo.SynthesisRestAdapter=o,Fo}var Tl={},Qg;function hk(){return Qg||(Qg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesizerConfig=t.SynthesisServiceType=void 0;const e=M();var r;(function(o){o[o.Standard=0]="Standard",o[o.Custom=1]="Custom"})(r=t.SynthesisServiceType||(t.SynthesisServiceType={}));class n{constructor(s,a){this.privSynthesisServiceType=r.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=s||new e.SpeechServiceConfig(new e.Context(null)),this.privParameters=a}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(s){this.privSynthesisServiceType=s}set synthesisVideoSection(s){this.privSpeechServiceConfig.Context.synthesis={video:s}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}t.SynthesizerConfig=n}(Tl)),Tl}var qo={},Yg;function vk(){if(Yg)return qo;Yg=1,Object.defineProperty(qo,"__esModule",{value:!0}),qo.SynthesisContext=void 0;const t=E();let e=class{constructor(){this.privContext={}}setSection(n,o){this.privContext[n]=o}set audioOutputFormat(n){this.privAudioOutputFormat=n}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(n){const o=this.buildSynthesisContext(n);this.setSection("synthesis",o)}buildSynthesisContext(n){return{audio:{metadataOptions:{bookmarkEnabled:!!(n!=null&&n.bookmarkReached),punctuationBoundaryEnabled:n==null?void 0:n.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(n!=null&&n.wordBoundary)),sentenceBoundaryEnabled:n==null?void 0:n.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(n!=null&&n.visemeReceived),wordBoundaryEnabled:n==null?void 0:n.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(n!=null&&n.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:n==null?void 0:n.autoDetectSourceLanguage}}}};return qo.SynthesisContext=e,qo}var Uo={},Xg;function fk(){if(Xg)return Uo;Xg=1,Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.SpeakerRecognitionConfig=void 0;const t=M();let e=class{constructor(n,o){this.privContext=n||new t.Context(null),this.privParameters=o}get parameters(){return this.privParameters}get Context(){return this.privContext}};return Uo.SpeakerRecognitionConfig=e,Uo}var $o={},Zg;function gk(){if(Zg)return $o;Zg=1,Object.defineProperty($o,"__esModule",{value:!0}),$o.SpeakerServiceRecognizer=void 0;const t=fe(),e=b(),r=E(),n=M(),o=Kt;let s=class extends n.ServiceRecognizerBase{constructor(i,c,u,l,p){super(i,c,u,l,p),this.privSpeakerRecognizer=p,this.privSpeakerAudioSource=u,this.recognizeSpeaker=d=>this.recognizeSpeakerOnce(d),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(i){let c=!1;const u=new r.PropertyCollection;switch(i.messageType===e.MessageType.Text&&u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,i.textBody),i.path.toLowerCase()){case"speaker.response":const p=JSON.parse(i.textBody);let d;p.status.statusCode.toLowerCase()!=="success"?d=new r.SpeakerRecognitionResult(p,r.ResultReason.Canceled,r.CancellationErrorCode.ServiceError,p.status.reason):d=new r.SpeakerRecognitionResult(p,r.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(d),c=!0;break}const l=new e.Deferred;return l.resolve(c),l.promise}cancelRecognition(i,c,u,l,p){if(new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[l]),this.privResultDeferral){const h=new r.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:p,reason:p}},r.ResultReason.Canceled,l,p);try{this.privResultDeferral.resolve(h)}catch(v){this.privResultDeferral.reject(v)}}}async recognizeSpeakerOnce(i){this.privSpeakerModel=i,this.voiceProfileType=i.scenario,this.privResultDeferral||(this.privResultDeferral=new e.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const c=this.connectImpl(),u=this.sendPreAudioMessages(this.extractSpeakerContext(i)),l=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),p=await this.privSpeakerAudioSource.format,d=await this.privSpeakerAudioSource.deviceInfo,h=new t.ReplayableAudioNode(l,p.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(h,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:d};try{await c,await u}catch(y){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,y)}const v=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,v),this.receiveMessage(),this.sendAudio(h).then(()=>{},y=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,y)}),this.privResultDeferral.promise}async sendPreAudioMessages(i){const c=await this.fetchConnection();await this.sendSpeakerRecognition(c,i)}async sendSpeakerRecognition(i,c){const u=JSON.stringify(c);return i.send(new o.SpeechConnectionMessage(e.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",u))}extractSpeakerContext(i){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:i.profileIds,scenario:i.scenario}}};return $o.SpeakerServiceRecognizer=s,$o}var Wo={},em;function mk(){if(em)return Wo;em=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.VoiceServiceRecognizer=void 0;const t=fe(),e=b(),r=E(),n=M(),o=Kt;let s=class extends n.ServiceRecognizerBase{constructor(i,c,u,l,p){super(i,c,u,l,p),this.privDeferralMap=new e.DeferralMap,this.privSpeakerAudioSource=u,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(i){this.privSpeakerAudioSource=i}processTypeSpecificMessages(i){let c=!1;const u=new r.PropertyCollection;switch(i.messageType===e.MessageType.Text&&u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,i.textBody),i.path.toLowerCase()){case"speaker.profiles":const p=JSON.parse(i.textBody);switch(p.operation.toLowerCase()){case"create":this.handleCreateResponse(p,i.requestId);break;case"delete":case"reset":this.handleResultResponse(p,i.requestId);break;case"fetch":const m=JSON.parse(i.textBody);this.handleFetchResponse(m,i.requestId);break}c=!0;break;case"speaker.phrases":const d=JSON.parse(i.textBody);this.handlePhrasesResponse(d,i.requestId),c=!0;break;case"speaker.profile.enrollment":const h=JSON.parse(i.textBody),v=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(h.enrollment?h.enrollment.enrollmentStatus:h.status.statusCode),h.enrollment?JSON.stringify(h.enrollment):void 0,h.status.reason);this.privDeferralMap.getId(i.requestId)&&this.privDeferralMap.complete(i.requestId,v),this.privRequestSession.onSpeechEnded(),c=!0;break}const l=new e.Deferred;return l.resolve(c),l.promise}cancelRecognition(i,c,u,l,p){new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[l]);const h=new r.VoiceProfileEnrollmentResult(r.ResultReason.Canceled,p,p);this.privDeferralMap.getId(c)&&this.privDeferralMap.complete(c,h)}async createProfile(i,c){this.voiceProfileType=i.toString();const u=this.connectImpl();try{const l=new e.Deferred;return await u,await this.sendCreateProfile(l,i,c),this.receiveMessage(),l.promise}catch(l){throw l}}async resetProfile(i){return this.voiceProfileType=i.profileType.toString(),this.sendCommonRequest("reset",i.profileType,i)}async deleteProfile(i){return this.voiceProfileType=i.profileType.toString(),this.sendCommonRequest("delete",i.profileType,i)}async retrieveEnrollmentResult(i){return this.voiceProfileType=i.profileType.toString(),this.privExpectedProfileId=i.profileId,this.sendCommonRequest("fetch",i.profileType,i)}async getAllProfiles(i){return this.voiceProfileType=i.toString(),this.sendCommonRequest("fetch",i)}async getActivationPhrases(i,c){this.voiceProfileType=i.toString();const u=this.connectImpl();try{const l=new e.Deferred;return await u,await this.sendPhrasesRequest(l,i,c),this.receiveMessage(),l.promise}catch(l){throw l}}async enrollProfile(i){this.voiceProfileType=i.profileType.toString();const c=new e.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const u=this.connectImpl(),l=this.sendPreAudioMessages(i,c),p=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),d=await this.privSpeakerAudioSource.format,h=await this.privSpeakerAudioSource.deviceInfo,v=new t.ReplayableAudioNode(p,d.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(v,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:h};try{await u,await l}catch(f){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,f)}const m=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,m),this.receiveMessage(),this.sendAudio(v).then(()=>{},f=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,f)}),c.promise}async sendPreAudioMessages(i,c){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,c),await this.sendBaseRequest(u,"enroll",this.scenarioFrom(i.profileType),i)}async sendPhrasesRequest(i,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,i);const p=this.scenarioFrom(c),d={locale:u,scenario:p};return l.send(new o.SpeechConnectionMessage(e.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCreateProfile(i,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,i);const p=c===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":c===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",d={locale:u,number:"1",scenario:p};return l.send(new o.SpeechConnectionMessage(e.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCommonRequest(i,c,u=void 0){const l=this.connectImpl();try{const p=new e.Deferred;this.privRequestSession.onSpeechContext(),await l;const d=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,p),await this.sendBaseRequest(d,i,this.scenarioFrom(c),u),this.receiveMessage(),p.promise}catch(p){throw p}}async sendBaseRequest(i,c,u,l){const p={scenario:u};return l?p.profileIds=[l.profileId]:p.maxPageSize=-1,i.send(new o.SpeechConnectionMessage(e.MessageType.Text,`speaker.profile.${c}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(p)))}extractSpeakerContext(i){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:i.profileIds,scenario:i.scenario}}handlePhrasesResponse(i,c){if(this.privDeferralMap.getId(c))if(i.status.statusCode.toLowerCase()!=="success"){const u=r.ResultReason.Canceled,l=new r.VoiceProfilePhraseResult(u,i.status.statusCode,i.passPhraseType,[]);this.privDeferralMap.complete(c,l)}else if(i.phrases&&i.phrases.length>0){const u=r.ResultReason.EnrollingVoiceProfile,l=new r.VoiceProfilePhraseResult(u,i.status.statusCode,i.passPhraseType,i.phrases);this.privDeferralMap.complete(c,l)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${c} not found`)}handleCreateResponse(i,c){if(i.profiles&&i.profiles.length>0)if(this.privDeferralMap.getId(c)){const u=i.profiles.map(l=>l.profileId);this.privDeferralMap.complete(c,u)}else throw new Error(`Voice Profile create request for requestID ${c} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(i,c){if(this.privDeferralMap.getId(c)){const u=i.operation.toLowerCase()==="delete"?r.ResultReason.DeletedVoiceProfile:r.ResultReason.ResetVoiceProfile,l=i.status.statusCode.toLowerCase()==="success"?u:r.ResultReason.Canceled,p=new r.VoiceProfileResult(l,`statusCode: ${i.status.statusCode}, errorDetails: ${i.status.reason}`);this.privDeferralMap.complete(c,p)}else throw new Error(`Voice Profile create request for requestID ${c} not found`)}handleFetchResponse(i,c){if(this.privDeferralMap.getId(c)&&i.profiles[0]){if(this.privExpectedProfileId&&i.profiles.length===1&&i.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const u=i.profiles[0],l=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(u.enrollmentStatus),JSON.stringify(u),i.status.reason);this.privDeferralMap.complete(c,l)}else if(i.profiles.length>0){const u=i.profiles,l=[];for(const p of u)l.push(new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(p.enrollmentStatus),JSON.stringify(p),i.status.reason));this.privDeferralMap.complete(c,l)}}else throw new Error(`Voice Profile fetch request for requestID ${c} not found`)}enrollmentReasonFrom(i){switch(i.toLowerCase()){case"enrolled":return r.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return r.ResultReason.Canceled;default:return r.ResultReason.EnrollingVoiceProfile}}scenarioFrom(i){return i===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":i===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return Wo.VoiceServiceRecognizer=s,Wo}var nP={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.type=t.connectivity=t.Device=t.OS=t.System=t.Context=t.SpeechServiceConfig=void 0;class e{constructor(i){this.context=i}serialize(){return JSON.stringify(this,(i,c)=>{if(c&&typeof c=="object"&&!Array.isArray(c)){const u={};for(const l in c)Object.hasOwnProperty.call(c,l)&&(u[l&&l.charAt(0).toLowerCase()+l.substring(1)]=c[l]);return u}return c})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(i){this.recognition=i.toLowerCase()}}t.SpeechServiceConfig=e;class r{constructor(i){this.system=new n,this.os=i}}t.Context=r;class n{constructor(){const i="1.36.0";this.name="SpeechSDK",this.version=i,this.build="JavaScript",this.lang="JavaScript"}}t.System=n;class o{constructor(i,c,u){this.platform=i,this.name=c,this.version=u}}t.OS=o;class s{constructor(i,c,u){this.manufacturer=i,this.model=c,this.version=u}}t.Device=s,function(a){a.Bluetooth="Bluetooth",a.Wired="Wired",a.WiFi="WiFi",a.Cellular="Cellular",a.InBuilt="InBuilt",a.Unknown="Unknown"}(t.connectivity||(t.connectivity={})),function(a){a.Phone="Phone",a.Speaker="Speaker",a.Car="Car",a.Headset="Headset",a.Thermostat="Thermostat",a.Microphones="Microphones",a.Deskphone="Deskphone",a.RemoteControl="RemoteControl",a.Unknown="Unknown",a.File="File",a.Stream="Stream"}(t.type||(t.type={}))})(nP);var tm;function M(){return tm||(tm=1,function(t){var e=F&&F.__createBinding||(Object.create?function(s,a,i,c){c===void 0&&(c=i),Object.defineProperty(s,c,{enumerable:!0,get:function(){return a[i]}})}:function(s,a,i,c){c===void 0&&(c=i),s[c]=a[i]}),r=F&&F.__exportStar||function(s,a){for(var i in s)i!=="default"&&!a.hasOwnProperty(i)&&e(a,s,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguagesOpenRangeOptionName=t.ForceDictationPropertyName=t.ServicePropertiesPropertyName=t.CancellationErrorCodePropertyName=t.OutputFormatPropertyName=void 0,r(Oc,t),r(Bc,t),r(Hn,t),r(eC,t),r(tC,t),r(sA(),t),r(aA(),t),r(hu,t),r(cA(),t),r(uA(),t),r(lA(),t),r(JC,t),r(vu,t),r(dA(),t),r(hA(),t),r(vA(),t),r(fA(),t),r(HC(),t),r(gA(),t),r(GC,t),r(mA(),t),r(fu,t),r(CA(),t),r(PA(),t),r(gu,t),r(mu,t),r(yu,t),r(RA(),t),r(EA(),t),r(wA(),t),r(IA(),t),r(TA(),t),r(Su,t),r(AA(),t),r(Cu,t),r(ZC,t),r(Pu,t),r(Eu,t),r(wu,t),r(eP,t),r(FA(),t),r(_u,t),r(ik(),t),r(th,t),r(ck(),t),r(uk(),t);var n=lk();Object.defineProperty(t,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return n.AvatarSynthesisAdapter}});var o=pk();Object.defineProperty(t,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return o.SpeechSynthesisAdapter}}),r(dk(),t),r(hk(),t),r(vk(),t),r(fk(),t),r(gk(),t),r(mk(),t),r(nP,t),t.OutputFormatPropertyName="OutputFormat",t.CancellationErrorCodePropertyName="CancellationErrorCode",t.ServicePropertiesPropertyName="ServiceProperties",t.ForceDictationPropertyName="ForceDictation",t.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"}(ll)),ll}(function(t){var e=F&&F.__createBinding||(Object.create?function(o,s,a,i){i===void 0&&(i=a),Object.defineProperty(o,i,{enumerable:!0,get:function(){return s[a]}})}:function(o,s,a,i){i===void 0&&(i=a),o[i]=s[a]}),r=F&&F.__exportStar||function(o,s){for(var a in o)a!=="default"&&!s.hasOwnProperty(a)&&e(s,o,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=M();new n.AgentConfig,r(E(),t)})(qr);class yk{constructor(){this.speechConfig=qr.SpeechConfig.fromSubscription(D0,N0),this.audioConfig=qr.AudioConfig.fromDefaultMicrophoneInput(),this.speechRecognizer=new qr.SpeechRecognizer(this.speechConfig,this.audioConfig),this.speechSynthesizer=new qr.SpeechSynthesizer(this.speechConfig),this.speakStartTime=null,this.speakStopTime=null}startSpeechRecognition(e){this.speechRecognizer.recognizing=(r,n)=>{console.log(r,n)},this.speechRecognizer.recognized=(r,n)=>{n.result.reason===qr.ResultReason.RecognizedSpeech&&e(n.result.text)},this.speechRecognizer.startContinuousRecognitionAsync()}speak(e){return new Promise(r=>{this.speakStartTime=Date.now(),this.speechSynthesizer.speakTextAsync(e,n=>{if(n.reason===qr.ResultReason.SynthesizingAudioCompleted){this.speakStopTime=Date.now();const o=this.speakStopTime-this.speakStartTime;r(o)}})})}stopSpeechRecognition(){this.speechRecognizer.stopContinuousRecognitionAsync()}close(){this.speechRecognizer.close()}}const iP=({loading:t,handleApiCall:e,addOnChat:r,currentFile:n})=>{const[o,s]=T.useState(!1),[a,i]=T.useState(null),[c,u]=T.useState(""),l=()=>{const d=new yk;o?(a.stopSpeechRecognition(),a.close(),s(!1)):(s(!0),i(d),d.startSpeechRecognition(h=>{if(!h.length)return;const v={id:tc(),userMessage:h};r(v),setTimeout(()=>{e(h)},0),d.stopSpeechRecognition(),s(!1)}))},p=d=>{if(d.preventDefault(),!c.length)return;const h={id:tc(),userMessage:c};r(h),setTimeout(()=>{e(c)},0),u("")};return A.jsxs("form",{onSubmit:p,className:"flex border-t-2 border-[#a1ffbf] bg-gray-100",children:[A.jsx("button",{className:"w-12 flex justify-center items-center h-10 hover:bg-slate-300",onClick:l,type:"button",disabled:!!(!n||t),children:o?A.jsx(U1,{color:"red"}):A.jsx(q1,{color:"#767676"})}),A.jsx("input",{type:"text",placeholder:"Write your message here",className:"px-6 flex-1 bg-gray-100",disabled:!!(!n||t||o),value:c,onChange:d=>u(d.target.value)}),A.jsx("button",{type:"submit",className:"w-12 flex justify-center items-center h-10 hover:bg-slate-300",disabled:!!(!n||t||o),children:A.jsx(F1,{color:"#767676"})})]})};iP.propTypes={loading:V.bool,handleApiCall:V.func,addOnChat:V.func,currentFile:V.object};const Sk=()=>{const[t,e]=T.useState(Iv),[r,n]=T.useState(!1),[o,s]=T.useState({url:"",pageNo:1}),[a,i]=T.useState(!1),[c,u]=T.useState(),l=y=>{u(y)},p=()=>{e(Iv)},d=async y=>{n(!0);try{const g=await(await fetch(`${Ea}/api/chat?query=${y}`)).json(),S=g==null?void 0:g.Result,C=g==null?void 0:g.Source.split(`
`).filter(R=>R!==""),P={id:tc(),botMessage:S,urlsArray:C};m(P)}catch(f){console.log(f)}finally{n(!1)}},h=(y,f)=>{i(!1),s({url:"",pageNo:1}),setTimeout(()=>{s({url:y,pageNo:f}),i(!0)},0)},v=()=>i(!1),m=y=>{e(f=>[...f,y])};return A.jsxs("div",{className:`lg:w-[1000px] h-[100dvh] lg:h-[90dvh] grid grid-cols-1 ${a?"md:grid-cols-2":"md:grid-cols-1"} gap-2  mx-auto rounded-lg overflow-hidden shadow`,children:[A.jsxs("div",{className:" lg:min-w-[500px] bg-white flex flex-col shadow-lg shadow-slate-700 flex-grow overflow-auto",children:[A.jsx(LS,{addCurrentFile:l,currentFile:c,resetChat:p}),A.jsx(BS,{chats:t,loading:r,handleClick:h}),A.jsx(iP,{loading:r,addOnChat:m,handleApiCall:d,currentFile:c})]}),a?A.jsx(FS,{pdfDetails:o,hidePdf:v}):null]})};function Ck(){return A.jsx("div",{className:"bg-[url(./assets/bg.jpg)] bg-fixed bg-cover h-[100dvh] lg:p-8",children:A.jsx(a0,{children:A.jsx(IS,{path:"/",element:A.jsx(Sk,{})})})})}_l.createRoot(document.getElementById("root")).render(A.jsx(Lt.StrictMode,{children:A.jsxs(l0,{children:[A.jsx(D1,{}),A.jsx(Ck,{})]})}));
